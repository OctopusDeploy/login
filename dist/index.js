"use strict";var Lu=Object.create;var Ar=Object.defineProperty;var Wu=Object.getOwnPropertyDescriptor;var xu=Object.getOwnPropertyNames;var Fu=Object.getPrototypeOf,Uu=Object.prototype.hasOwnProperty;var z=(n,t)=>()=>(n&&(t=n(n=0)),t);var Y=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),Ei=(n,t)=>{for(var o in t)Ar(n,o,{get:t[o],enumerable:!0})},Pi=(n,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of xu(t))!Uu.call(n,a)&&a!==o&&Ar(n,a,{get:()=>t[a],enumerable:!(i=Wu(t,a))||i.enumerable});return n};var ae=(n,t,o)=>(o=n!=null?Lu(Fu(n)):{},Pi(t||!n||!n.__esModule?Ar(o,"default",{value:n,enumerable:!0}):o,n)),Mu=n=>Pi(Ar({},"__esModule",{value:!0}),n);var Cr=Y(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.toCommandProperties=mt.toCommandValue=void 0;function ju(n){return n==null?"":typeof n=="string"||n instanceof String?n:JSON.stringify(n)}mt.toCommandValue=ju;function $u(n){return Object.keys(n).length?{title:n.title,file:n.file,line:n.startLine,endLine:n.endLine,col:n.startColumn,endColumn:n.endColumn}:{}}mt.toCommandProperties=$u});var ki=Y(ue=>{"use strict";var zu=ue&&ue.__createBinding||(Object.create?function(n,t,o,i){i===void 0&&(i=o),Object.defineProperty(n,i,{enumerable:!0,get:function(){return t[o]}})}:function(n,t,o,i){i===void 0&&(i=o),n[i]=t[o]}),Nu=ue&&ue.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),Hu=ue&&ue.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var o in n)o!=="default"&&Object.hasOwnProperty.call(n,o)&&zu(t,n,o);return Nu(t,n),t};Object.defineProperty(ue,"__esModule",{value:!0});ue.issue=ue.issueCommand=void 0;var Vu=Hu(require("os")),Ci=Cr();function Oi(n,t,o){let i=new On(n,t,o);process.stdout.write(i.toString()+Vu.EOL)}ue.issueCommand=Oi;function Yu(n,t=""){Oi(n,{},t)}ue.issue=Yu;var Ai="::",On=class{constructor(t,o,i){t||(t="missing.command"),this.command=t,this.properties=o,this.message=i}toString(){let t=Ai+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let o=!0;for(let i in this.properties)if(this.properties.hasOwnProperty(i)){let a=this.properties[i];a&&(o?o=!1:t+=",",t+=`${i}=${Qu(a)}`)}}return t+=`${Ai}${Gu(this.message)}`,t}};function Gu(n){return Ci.toCommandValue(n).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Qu(n){return Ci.toCommandValue(n).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});function Ft(){return Or>kr.length-16&&(Bi.default.randomFillSync(kr),Or=0),kr.slice(Or,Or+=16)}var Bi,kr,Or,kn=z(()=>{Bi=ae(require("crypto")),kr=new Uint8Array(256),Or=kr.length});var qi,Di=z(()=>{qi=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Ku(n){return typeof n=="string"&&qi.test(n)}var Me,Ut=z(()=>{Di();Me=Ku});function Ju(n,t=0){let o=(H[n[t+0]]+H[n[t+1]]+H[n[t+2]]+H[n[t+3]]+"-"+H[n[t+4]]+H[n[t+5]]+"-"+H[n[t+6]]+H[n[t+7]]+"-"+H[n[t+8]]+H[n[t+9]]+"-"+H[n[t+10]]+H[n[t+11]]+H[n[t+12]]+H[n[t+13]]+H[n[t+14]]+H[n[t+15]]).toLowerCase();if(!Me(o))throw TypeError("Stringified UUID is invalid");return o}var H,je,Mt=z(()=>{Ut();H=[];for(let n=0;n<256;++n)H.push((n+256).toString(16).substr(1));je=Ju});function Zu(n,t,o){let i=t&&o||0,a=t||new Array(16);n=n||{};let l=n.node||Ii,f=n.clockseq!==void 0?n.clockseq:Bn;if(l==null||f==null){let g=n.random||(n.rng||Ft)();l==null&&(l=Ii=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),f==null&&(f=Bn=(g[6]<<8|g[7])&16383)}let m=n.msecs!==void 0?n.msecs:Date.now(),h=n.nsecs!==void 0?n.nsecs:Dn+1,d=m-qn+(h-Dn)/1e4;if(d<0&&n.clockseq===void 0&&(f=f+1&16383),(d<0||m>qn)&&n.nsecs===void 0&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");qn=m,Dn=h,Bn=f,m+=122192928e5;let y=((m&268435455)*1e4+h)%4294967296;a[i++]=y>>>24&255,a[i++]=y>>>16&255,a[i++]=y>>>8&255,a[i++]=y&255;let _=m/4294967296*1e4&268435455;a[i++]=_>>>8&255,a[i++]=_&255,a[i++]=_>>>24&15|16,a[i++]=_>>>16&255,a[i++]=f>>>8|128,a[i++]=f&255;for(let g=0;g<6;++g)a[i+g]=l[g];return t||je(a)}var Ii,Bn,qn,Dn,Li,Wi=z(()=>{kn();Mt();qn=0,Dn=0;Li=Zu});function Xu(n){if(!Me(n))throw TypeError("Invalid UUID");let t,o=new Uint8Array(16);return o[0]=(t=parseInt(n.slice(0,8),16))>>>24,o[1]=t>>>16&255,o[2]=t>>>8&255,o[3]=t&255,o[4]=(t=parseInt(n.slice(9,13),16))>>>8,o[5]=t&255,o[6]=(t=parseInt(n.slice(14,18),16))>>>8,o[7]=t&255,o[8]=(t=parseInt(n.slice(19,23),16))>>>8,o[9]=t&255,o[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,o[11]=t/4294967296&255,o[12]=t>>>24&255,o[13]=t>>>16&255,o[14]=t>>>8&255,o[15]=t&255,o}var Br,In=z(()=>{Ut();Br=Xu});function el(n){n=unescape(encodeURIComponent(n));let t=[];for(let o=0;o<n.length;++o)t.push(n.charCodeAt(o));return t}function qr(n,t,o){function i(a,l,f,m){if(typeof a=="string"&&(a=el(a)),typeof l=="string"&&(l=Br(l)),l.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let h=new Uint8Array(16+a.length);if(h.set(l),h.set(a,l.length),h=o(h),h[6]=h[6]&15|t,h[8]=h[8]&63|128,f){m=m||0;for(let d=0;d<16;++d)f[m+d]=h[d];return f}return je(h)}try{i.name=n}catch{}return i.DNS=tl,i.URL=rl,i}var tl,rl,Ln=z(()=>{Mt();In();tl="6ba7b810-9dad-11d1-80b4-00c04fd430c8",rl="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function nl(n){return Array.isArray(n)?n=Buffer.from(n):typeof n=="string"&&(n=Buffer.from(n,"utf8")),xi.default.createHash("md5").update(n).digest()}var xi,Fi,Ui=z(()=>{xi=ae(require("crypto"));Fi=nl});var ol,Mi,ji=z(()=>{Ln();Ui();ol=qr("v3",48,Fi),Mi=ol});function il(n,t,o){n=n||{};let i=n.random||(n.rng||Ft)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){o=o||0;for(let a=0;a<16;++a)t[o+a]=i[a];return t}return je(i)}var $i,zi=z(()=>{kn();Mt();$i=il});function sl(n){return Array.isArray(n)?n=Buffer.from(n):typeof n=="string"&&(n=Buffer.from(n,"utf8")),Ni.default.createHash("sha1").update(n).digest()}var Ni,Hi,Vi=z(()=>{Ni=ae(require("crypto"));Hi=sl});var al,Yi,Gi=z(()=>{Ln();Vi();al=qr("v5",80,Hi),Yi=al});var Qi,Ki=z(()=>{Qi="00000000-0000-0000-0000-000000000000"});function ul(n){if(!Me(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}var Ji,Zi=z(()=>{Ut();Ji=ul});var Xi={};Ei(Xi,{NIL:()=>Qi,parse:()=>Br,stringify:()=>je,v1:()=>Li,v3:()=>Mi,v4:()=>$i,v5:()=>Yi,validate:()=>Me,version:()=>Ji});var es=z(()=>{Wi();ji();zi();Gi();Ki();Zi();Ut();Mt();In()});var os=Y(le=>{"use strict";var ll=le&&le.__createBinding||(Object.create?function(n,t,o,i){i===void 0&&(i=o),Object.defineProperty(n,i,{enumerable:!0,get:function(){return t[o]}})}:function(n,t,o,i){i===void 0&&(i=o),n[i]=t[o]}),fl=le&&le.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),rs=le&&le.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var o in n)o!=="default"&&Object.hasOwnProperty.call(n,o)&&ll(t,n,o);return fl(t,n),t};Object.defineProperty(le,"__esModule",{value:!0});le.prepareKeyValueMessage=le.issueFileCommand=void 0;var ts=rs(require("fs")),Wn=rs(require("os")),cl=(es(),Mu(Xi)),ns=Cr();function dl(n,t){let o=process.env[`GITHUB_${n}`];if(!o)throw new Error(`Unable to find environment variable for file command ${n}`);if(!ts.existsSync(o))throw new Error(`Missing file at path: ${o}`);ts.appendFileSync(o,`${ns.toCommandValue(t)}${Wn.EOL}`,{encoding:"utf8"})}le.issueFileCommand=dl;function hl(n,t){let o=`ghadelimiter_${cl.v4()}`,i=ns.toCommandValue(t);if(n.includes(o))throw new Error(`Unexpected input: name should not contain the delimiter "${o}"`);if(i.includes(o))throw new Error(`Unexpected input: value should not contain the delimiter "${o}"`);return`${n}<<${o}${Wn.EOL}${i}${Wn.EOL}${o}`}le.prepareKeyValueMessage=hl});var ss=Y(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.checkBypass=bt.getProxyUrl=void 0;function pl(n){let t=n.protocol==="https:";if(is(n))return;let o=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(o)try{return new URL(o)}catch{if(!o.startsWith("http://")&&!o.startsWith("https://"))return new URL(`http://${o}`)}else return}bt.getProxyUrl=pl;function is(n){if(!n.hostname)return!1;let t=n.hostname;if(ml(t))return!0;let o=process.env.no_proxy||process.env.NO_PROXY||"";if(!o)return!1;let i;n.port?i=Number(n.port):n.protocol==="http:"?i=80:n.protocol==="https:"&&(i=443);let a=[n.hostname.toUpperCase()];typeof i=="number"&&a.push(`${a[0]}:${i}`);for(let l of o.split(",").map(f=>f.trim().toUpperCase()).filter(f=>f))if(l==="*"||a.some(f=>f===l||f.endsWith(`.${l}`)||l.startsWith(".")&&f.endsWith(`${l}`)))return!0;return!1}bt.checkBypass=is;function ml(n){let t=n.toLowerCase();return t==="localhost"||t.startsWith("127.")||t.startsWith("[::1]")||t.startsWith("[0:0:0:0:0:0:0:1]")}});var fs=Y(yt=>{"use strict";var Oc=require("net"),bl=require("tls"),xn=require("http"),as=require("https"),yl=require("events"),kc=require("assert"),gl=require("util");yt.httpOverHttp=_l;yt.httpsOverHttp=Sl;yt.httpOverHttps=wl;yt.httpsOverHttps=Rl;function _l(n){var t=new Ce(n);return t.request=xn.request,t}function Sl(n){var t=new Ce(n);return t.request=xn.request,t.createSocket=us,t.defaultPort=443,t}function wl(n){var t=new Ce(n);return t.request=as.request,t}function Rl(n){var t=new Ce(n);return t.request=as.request,t.createSocket=us,t.defaultPort=443,t}function Ce(n){var t=this;t.options=n||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||xn.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(i,a,l,f){for(var m=ls(a,l,f),h=0,d=t.requests.length;h<d;++h){var y=t.requests[h];if(y.host===m.host&&y.port===m.port){t.requests.splice(h,1),y.request.onSocket(i);return}}i.destroy(),t.removeSocket(i)})}gl.inherits(Ce,yl.EventEmitter);Ce.prototype.addRequest=function(t,o,i,a){var l=this,f=Fn({request:t},l.options,ls(o,i,a));if(l.sockets.length>=this.maxSockets){l.requests.push(f);return}l.createSocket(f,function(m){m.on("free",h),m.on("close",d),m.on("agentRemove",d),t.onSocket(m);function h(){l.emit("free",m,f)}function d(y){l.removeSocket(m),m.removeListener("free",h),m.removeListener("close",d),m.removeListener("agentRemove",d)}})};Ce.prototype.createSocket=function(t,o){var i=this,a={};i.sockets.push(a);var l=Fn({},i.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(l.localAddress=t.localAddress),l.proxyAuth&&(l.headers=l.headers||{},l.headers["Proxy-Authorization"]="Basic "+new Buffer(l.proxyAuth).toString("base64")),$e("making CONNECT request");var f=i.request(l);f.useChunkedEncodingByDefault=!1,f.once("response",m),f.once("upgrade",h),f.once("connect",d),f.once("error",y),f.end();function m(_){_.upgrade=!0}function h(_,g,w){process.nextTick(function(){d(_,g,w)})}function d(_,g,w){if(f.removeAllListeners(),g.removeAllListeners(),_.statusCode!==200){$e("tunneling socket could not be established, statusCode=%d",_.statusCode),g.destroy();var S=new Error("tunneling socket could not be established, statusCode="+_.statusCode);S.code="ECONNRESET",t.request.emit("error",S),i.removeSocket(a);return}if(w.length>0){$e("got illegal response body from proxy"),g.destroy();var S=new Error("got illegal response body from proxy");S.code="ECONNRESET",t.request.emit("error",S),i.removeSocket(a);return}return $e("tunneling connection has established"),i.sockets[i.sockets.indexOf(a)]=g,o(g)}function y(_){f.removeAllListeners(),$e(`tunneling socket could not be established, cause=%s
`,_.message,_.stack);var g=new Error("tunneling socket could not be established, cause="+_.message);g.code="ECONNRESET",t.request.emit("error",g),i.removeSocket(a)}};Ce.prototype.removeSocket=function(t){var o=this.sockets.indexOf(t);if(o!==-1){this.sockets.splice(o,1);var i=this.requests.shift();i&&this.createSocket(i,function(a){i.request.onSocket(a)})}};function us(n,t){var o=this;Ce.prototype.createSocket.call(o,n,function(i){var a=n.request.getHeader("host"),l=Fn({},o.options,{socket:i,servername:a?a.replace(/:.*$/,""):n.host}),f=bl.connect(0,l);o.sockets[o.sockets.indexOf(i)]=f,t(f)})}function ls(n,t,o){return typeof n=="string"?{host:n,port:t,localAddress:o}:n}function Fn(n){for(var t=1,o=arguments.length;t<o;++t){var i=arguments[t];if(typeof i=="object")for(var a=Object.keys(i),l=0,f=a.length;l<f;++l){var m=a[l];i[m]!==void 0&&(n[m]=i[m])}}return n}var $e;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?$e=function(){var n=Array.prototype.slice.call(arguments);typeof n[0]=="string"?n[0]="TUNNEL: "+n[0]:n.unshift("TUNNEL:"),console.error.apply(console,n)}:$e=function(){};yt.debug=$e});var ds=Y((qc,cs)=>{cs.exports=fs()});var ps=Y(I=>{"use strict";var vl=I&&I.__createBinding||(Object.create?function(n,t,o,i){i===void 0&&(i=o),Object.defineProperty(n,i,{enumerable:!0,get:function(){return t[o]}})}:function(n,t,o,i){i===void 0&&(i=o),n[i]=t[o]}),Tl=I&&I.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),Fr=I&&I.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var o in n)o!=="default"&&Object.hasOwnProperty.call(n,o)&&vl(t,n,o);return Tl(t,n),t},j=I&&I.__awaiter||function(n,t,o,i){function a(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(_){f(_)}}function h(y){try{d(i.throw(y))}catch(_){f(_)}}function d(y){y.done?l(y.value):a(y.value).then(m,h)}d((i=i.apply(n,t||[])).next())})};Object.defineProperty(I,"__esModule",{value:!0});I.HttpClient=I.isHttps=I.HttpClientResponse=I.HttpClientError=I.getProxyUrl=I.MediaTypes=I.Headers=I.HttpCodes=void 0;var Dr=Fr(require("http")),Un=Fr(require("https")),hs=Fr(ss()),Ir=Fr(ds()),ye;(function(n){n[n.OK=200]="OK",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.ResourceMoved=302]="ResourceMoved",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.SwitchProxy=306]="SwitchProxy",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.TooManyRequests=429]="TooManyRequests",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout"})(ye=I.HttpCodes||(I.HttpCodes={}));var G;(function(n){n.Accept="accept",n.ContentType="content-type"})(G=I.Headers||(I.Headers={}));var ze;(function(n){n.ApplicationJson="application/json"})(ze=I.MediaTypes||(I.MediaTypes={}));function El(n){let t=hs.getProxyUrl(new URL(n));return t?t.href:""}I.getProxyUrl=El;var Pl=[ye.MovedPermanently,ye.ResourceMoved,ye.SeeOther,ye.TemporaryRedirect,ye.PermanentRedirect],Al=[ye.BadGateway,ye.ServiceUnavailable,ye.GatewayTimeout],Cl=["OPTIONS","GET","DELETE","HEAD"],Ol=10,kl=5,Wr=class n extends Error{constructor(t,o){super(t),this.name="HttpClientError",this.statusCode=o,Object.setPrototypeOf(this,n.prototype)}};I.HttpClientError=Wr;var xr=class{constructor(t){this.message=t}readBody(){return j(this,void 0,void 0,function*(){return new Promise(t=>j(this,void 0,void 0,function*(){let o=Buffer.alloc(0);this.message.on("data",i=>{o=Buffer.concat([o,i])}),this.message.on("end",()=>{t(o.toString())})}))})}readBodyBuffer(){return j(this,void 0,void 0,function*(){return new Promise(t=>j(this,void 0,void 0,function*(){let o=[];this.message.on("data",i=>{o.push(i)}),this.message.on("end",()=>{t(Buffer.concat(o))})}))})}};I.HttpClientResponse=xr;function Bl(n){return new URL(n).protocol==="https:"}I.isHttps=Bl;var Mn=class{constructor(t,o,i){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=o||[],this.requestOptions=i,i&&(i.ignoreSslError!=null&&(this._ignoreSslError=i.ignoreSslError),this._socketTimeout=i.socketTimeout,i.allowRedirects!=null&&(this._allowRedirects=i.allowRedirects),i.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=i.allowRedirectDowngrade),i.maxRedirects!=null&&(this._maxRedirects=Math.max(i.maxRedirects,0)),i.keepAlive!=null&&(this._keepAlive=i.keepAlive),i.allowRetries!=null&&(this._allowRetries=i.allowRetries),i.maxRetries!=null&&(this._maxRetries=i.maxRetries))}options(t,o){return j(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,o||{})})}get(t,o){return j(this,void 0,void 0,function*(){return this.request("GET",t,null,o||{})})}del(t,o){return j(this,void 0,void 0,function*(){return this.request("DELETE",t,null,o||{})})}post(t,o,i){return j(this,void 0,void 0,function*(){return this.request("POST",t,o,i||{})})}patch(t,o,i){return j(this,void 0,void 0,function*(){return this.request("PATCH",t,o,i||{})})}put(t,o,i){return j(this,void 0,void 0,function*(){return this.request("PUT",t,o,i||{})})}head(t,o){return j(this,void 0,void 0,function*(){return this.request("HEAD",t,null,o||{})})}sendStream(t,o,i,a){return j(this,void 0,void 0,function*(){return this.request(t,o,i,a)})}getJson(t,o={}){return j(this,void 0,void 0,function*(){o[G.Accept]=this._getExistingOrDefaultHeader(o,G.Accept,ze.ApplicationJson);let i=yield this.get(t,o);return this._processResponse(i,this.requestOptions)})}postJson(t,o,i={}){return j(this,void 0,void 0,function*(){let a=JSON.stringify(o,null,2);i[G.Accept]=this._getExistingOrDefaultHeader(i,G.Accept,ze.ApplicationJson),i[G.ContentType]=this._getExistingOrDefaultHeader(i,G.ContentType,ze.ApplicationJson);let l=yield this.post(t,a,i);return this._processResponse(l,this.requestOptions)})}putJson(t,o,i={}){return j(this,void 0,void 0,function*(){let a=JSON.stringify(o,null,2);i[G.Accept]=this._getExistingOrDefaultHeader(i,G.Accept,ze.ApplicationJson),i[G.ContentType]=this._getExistingOrDefaultHeader(i,G.ContentType,ze.ApplicationJson);let l=yield this.put(t,a,i);return this._processResponse(l,this.requestOptions)})}patchJson(t,o,i={}){return j(this,void 0,void 0,function*(){let a=JSON.stringify(o,null,2);i[G.Accept]=this._getExistingOrDefaultHeader(i,G.Accept,ze.ApplicationJson),i[G.ContentType]=this._getExistingOrDefaultHeader(i,G.ContentType,ze.ApplicationJson);let l=yield this.patch(t,a,i);return this._processResponse(l,this.requestOptions)})}request(t,o,i,a){return j(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let l=new URL(o),f=this._prepareRequest(t,l,a),m=this._allowRetries&&Cl.includes(t)?this._maxRetries+1:1,h=0,d;do{if(d=yield this.requestRaw(f,i),d&&d.message&&d.message.statusCode===ye.Unauthorized){let _;for(let g of this.handlers)if(g.canHandleAuthentication(d)){_=g;break}return _?_.handleAuthentication(this,f,i):d}let y=this._maxRedirects;for(;d.message.statusCode&&Pl.includes(d.message.statusCode)&&this._allowRedirects&&y>0;){let _=d.message.headers.location;if(!_)break;let g=new URL(_);if(l.protocol==="https:"&&l.protocol!==g.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield d.readBody(),g.hostname!==l.hostname)for(let w in a)w.toLowerCase()==="authorization"&&delete a[w];f=this._prepareRequest(t,g,a),d=yield this.requestRaw(f,i),y--}if(!d.message.statusCode||!Al.includes(d.message.statusCode))return d;h+=1,h<m&&(yield d.readBody(),yield this._performExponentialBackoff(h))}while(h<m);return d})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,o){return j(this,void 0,void 0,function*(){return new Promise((i,a)=>{function l(f,m){f?a(f):m?i(m):a(new Error("Unknown error"))}this.requestRawWithCallback(t,o,l)})})}requestRawWithCallback(t,o,i){typeof o=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(o,"utf8"));let a=!1;function l(h,d){a||(a=!0,i(h,d))}let f=t.httpModule.request(t.options,h=>{let d=new xr(h);l(void 0,d)}),m;f.on("socket",h=>{m=h}),f.setTimeout(this._socketTimeout||3*6e4,()=>{m&&m.end(),l(new Error(`Request timeout: ${t.options.path}`))}),f.on("error",function(h){l(h)}),o&&typeof o=="string"&&f.write(o,"utf8"),o&&typeof o!="string"?(o.on("close",function(){f.end()}),o.pipe(f)):f.end()}getAgent(t){let o=new URL(t);return this._getAgent(o)}_prepareRequest(t,o,i){let a={};a.parsedUrl=o;let l=a.parsedUrl.protocol==="https:";a.httpModule=l?Un:Dr;let f=l?443:80;if(a.options={},a.options.host=a.parsedUrl.hostname,a.options.port=a.parsedUrl.port?parseInt(a.parsedUrl.port):f,a.options.path=(a.parsedUrl.pathname||"")+(a.parsedUrl.search||""),a.options.method=t,a.options.headers=this._mergeHeaders(i),this.userAgent!=null&&(a.options.headers["user-agent"]=this.userAgent),a.options.agent=this._getAgent(a.parsedUrl),this.handlers)for(let m of this.handlers)m.prepareRequest(a.options);return a}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Lr(this.requestOptions.headers),Lr(t||{})):Lr(t||{})}_getExistingOrDefaultHeader(t,o,i){let a;return this.requestOptions&&this.requestOptions.headers&&(a=Lr(this.requestOptions.headers)[o]),t[o]||a||i}_getAgent(t){let o,i=hs.getProxyUrl(t),a=i&&i.hostname;if(this._keepAlive&&a&&(o=this._proxyAgent),this._keepAlive&&!a&&(o=this._agent),o)return o;let l=t.protocol==="https:",f=100;if(this.requestOptions&&(f=this.requestOptions.maxSockets||Dr.globalAgent.maxSockets),i&&i.hostname){let m={maxSockets:f,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(i.username||i.password)&&{proxyAuth:`${i.username}:${i.password}`}),{host:i.hostname,port:i.port})},h,d=i.protocol==="https:";l?h=d?Ir.httpsOverHttps:Ir.httpsOverHttp:h=d?Ir.httpOverHttps:Ir.httpOverHttp,o=h(m),this._proxyAgent=o}if(this._keepAlive&&!o){let m={keepAlive:this._keepAlive,maxSockets:f};o=l?new Un.Agent(m):new Dr.Agent(m),this._agent=o}return o||(o=l?Un.globalAgent:Dr.globalAgent),l&&this._ignoreSslError&&(o.options=Object.assign(o.options||{},{rejectUnauthorized:!1})),o}_performExponentialBackoff(t){return j(this,void 0,void 0,function*(){t=Math.min(Ol,t);let o=kl*Math.pow(2,t);return new Promise(i=>setTimeout(()=>i(),o))})}_processResponse(t,o){return j(this,void 0,void 0,function*(){return new Promise((i,a)=>j(this,void 0,void 0,function*(){let l=t.message.statusCode||0,f={statusCode:l,result:null,headers:{}};l===ye.NotFound&&i(f);function m(y,_){if(typeof _=="string"){let g=new Date(_);if(!isNaN(g.valueOf()))return g}return _}let h,d;try{d=yield t.readBody(),d&&d.length>0&&(o&&o.deserializeDates?h=JSON.parse(d,m):h=JSON.parse(d),f.result=h),f.headers=t.message.headers}catch{}if(l>299){let y;h&&h.message?y=h.message:d&&d.length>0?y=d:y=`Failed request: (${l})`;let _=new Wr(y,l);_.result=f.result,a(_)}else i(f)}))})}};I.HttpClient=Mn;var Lr=n=>Object.keys(n).reduce((t,o)=>(t[o.toLowerCase()]=n[o],t),{})});var ms=Y(Se=>{"use strict";var Nn=Se&&Se.__awaiter||function(n,t,o,i){function a(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(_){f(_)}}function h(y){try{d(i.throw(y))}catch(_){f(_)}}function d(y){y.done?l(y.value):a(y.value).then(m,h)}d((i=i.apply(n,t||[])).next())})};Object.defineProperty(Se,"__esModule",{value:!0});Se.PersonalAccessTokenCredentialHandler=Se.BearerCredentialHandler=Se.BasicCredentialHandler=void 0;var jn=class{constructor(t,o){this.username=t,this.password=o}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Nn(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Se.BasicCredentialHandler=jn;var $n=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return Nn(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Se.BearerCredentialHandler=$n;var zn=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Nn(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Se.PersonalAccessTokenCredentialHandler=zn});var gs=Y(gt=>{"use strict";var bs=gt&&gt.__awaiter||function(n,t,o,i){function a(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(_){f(_)}}function h(y){try{d(i.throw(y))}catch(_){f(_)}}function d(y){y.done?l(y.value):a(y.value).then(m,h)}d((i=i.apply(n,t||[])).next())})};Object.defineProperty(gt,"__esModule",{value:!0});gt.OidcClient=void 0;var ql=ps(),Dl=ms(),ys=Vn(),Hn=class n{static createHttpClient(t=!0,o=10){let i={allowRetries:t,maxRetries:o};return new ql.HttpClient("actions/oidc-client",[new Dl.BearerCredentialHandler(n.getRequestToken())],i)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var o;return bs(this,void 0,void 0,function*(){let l=(o=(yield n.createHttpClient().getJson(t).catch(f=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${f.statusCode}
 
        Error Message: ${f.result.message}`)})).result)===null||o===void 0?void 0:o.value;if(!l)throw new Error("Response json body do not have ID Token field");return l})}static getIDToken(t){return bs(this,void 0,void 0,function*(){try{let o=n.getIDTokenUrl();if(t){let a=encodeURIComponent(t);o=`${o}&audience=${a}`}ys.debug(`ID token url is ${o}`);let i=yield n.getCall(o);return ys.setSecret(i),i}catch(o){throw new Error(`Error message: ${o.message}`)}})}};gt.OidcClient=Hn});var Kn=Y(J=>{"use strict";var Yn=J&&J.__awaiter||function(n,t,o,i){function a(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(_){f(_)}}function h(y){try{d(i.throw(y))}catch(_){f(_)}}function d(y){y.done?l(y.value):a(y.value).then(m,h)}d((i=i.apply(n,t||[])).next())})};Object.defineProperty(J,"__esModule",{value:!0});J.summary=J.markdownSummary=J.SUMMARY_DOCS_URL=J.SUMMARY_ENV_VAR=void 0;var Il=require("os"),Gn=require("fs"),{access:Ll,appendFile:Wl,writeFile:xl}=Gn.promises;J.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";J.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var Qn=class{constructor(){this._buffer=""}filePath(){return Yn(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[J.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${J.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield Ll(t,Gn.constants.R_OK|Gn.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,o,i={}){let a=Object.entries(i).map(([l,f])=>` ${l}="${f}"`).join("");return o?`<${t}${a}>${o}</${t}>`:`<${t}${a}>`}write(t){return Yn(this,void 0,void 0,function*(){let o=!!(t!=null&&t.overwrite),i=yield this.filePath();return yield(o?xl:Wl)(i,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return Yn(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,o=!1){return this._buffer+=t,o?this.addEOL():this}addEOL(){return this.addRaw(Il.EOL)}addCodeBlock(t,o){let i=Object.assign({},o&&{lang:o}),a=this.wrap("pre",this.wrap("code",t),i);return this.addRaw(a).addEOL()}addList(t,o=!1){let i=o?"ol":"ul",a=t.map(f=>this.wrap("li",f)).join(""),l=this.wrap(i,a);return this.addRaw(l).addEOL()}addTable(t){let o=t.map(a=>{let l=a.map(f=>{if(typeof f=="string")return this.wrap("td",f);let{header:m,data:h,colspan:d,rowspan:y}=f,_=m?"th":"td",g=Object.assign(Object.assign({},d&&{colspan:d}),y&&{rowspan:y});return this.wrap(_,h,g)}).join("");return this.wrap("tr",l)}).join(""),i=this.wrap("table",o);return this.addRaw(i).addEOL()}addDetails(t,o){let i=this.wrap("details",this.wrap("summary",t)+o);return this.addRaw(i).addEOL()}addImage(t,o,i){let{width:a,height:l}=i||{},f=Object.assign(Object.assign({},a&&{width:a}),l&&{height:l}),m=this.wrap("img",null,Object.assign({src:t,alt:o},f));return this.addRaw(m).addEOL()}addHeading(t,o){let i=`h${o}`,a=["h1","h2","h3","h4","h5","h6"].includes(i)?i:"h1",l=this.wrap(a,t);return this.addRaw(l).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,o){let i=Object.assign({},o&&{cite:o}),a=this.wrap("blockquote",t,i);return this.addRaw(a).addEOL()}addLink(t,o){let i=this.wrap("a",t,{href:o});return this.addRaw(i).addEOL()}},_s=new Qn;J.markdownSummary=_s;J.summary=_s});var Ss=Y(Z=>{"use strict";var Fl=Z&&Z.__createBinding||(Object.create?function(n,t,o,i){i===void 0&&(i=o),Object.defineProperty(n,i,{enumerable:!0,get:function(){return t[o]}})}:function(n,t,o,i){i===void 0&&(i=o),n[i]=t[o]}),Ul=Z&&Z.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),Ml=Z&&Z.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var o in n)o!=="default"&&Object.hasOwnProperty.call(n,o)&&Fl(t,n,o);return Ul(t,n),t};Object.defineProperty(Z,"__esModule",{value:!0});Z.toPlatformPath=Z.toWin32Path=Z.toPosixPath=void 0;var jl=Ml(require("path"));function $l(n){return n.replace(/[\\]/g,"/")}Z.toPosixPath=$l;function zl(n){return n.replace(/[/]/g,"\\")}Z.toWin32Path=zl;function Nl(n){return n.replace(/[/\\]/g,jl.sep)}Z.toPlatformPath=Nl});var Vn=Y(v=>{"use strict";var Hl=v&&v.__createBinding||(Object.create?function(n,t,o,i){i===void 0&&(i=o),Object.defineProperty(n,i,{enumerable:!0,get:function(){return t[o]}})}:function(n,t,o,i){i===void 0&&(i=o),n[i]=t[o]}),Vl=v&&v.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),ws=v&&v.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var o in n)o!=="default"&&Object.hasOwnProperty.call(n,o)&&Hl(t,n,o);return Vl(t,n),t},Rs=v&&v.__awaiter||function(n,t,o,i){function a(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(_){f(_)}}function h(y){try{d(i.throw(y))}catch(_){f(_)}}function d(y){y.done?l(y.value):a(y.value).then(m,h)}d((i=i.apply(n,t||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.getIDToken=v.getState=v.saveState=v.group=v.endGroup=v.startGroup=v.info=v.notice=v.warning=v.error=v.debug=v.isDebug=v.setFailed=v.setCommandEcho=v.setOutput=v.getBooleanInput=v.getMultilineInput=v.getInput=v.addPath=v.setSecret=v.exportVariable=v.ExitCode=void 0;var fe=ki(),Je=os(),_t=Cr(),vs=ws(require("os")),Yl=ws(require("path")),Gl=gs(),Ts;(function(n){n[n.Success=0]="Success",n[n.Failure=1]="Failure"})(Ts=v.ExitCode||(v.ExitCode={}));function Ql(n,t){let o=_t.toCommandValue(t);if(process.env[n]=o,process.env.GITHUB_ENV||"")return Je.issueFileCommand("ENV",Je.prepareKeyValueMessage(n,t));fe.issueCommand("set-env",{name:n},o)}v.exportVariable=Ql;function Kl(n){fe.issueCommand("add-mask",{},n)}v.setSecret=Kl;function Jl(n){process.env.GITHUB_PATH||""?Je.issueFileCommand("PATH",n):fe.issueCommand("add-path",{},n),process.env.PATH=`${n}${Yl.delimiter}${process.env.PATH}`}v.addPath=Jl;function Jn(n,t){let o=process.env[`INPUT_${n.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!o)throw new Error(`Input required and not supplied: ${n}`);return t&&t.trimWhitespace===!1?o:o.trim()}v.getInput=Jn;function Zl(n,t){let o=Jn(n,t).split(`
`).filter(i=>i!=="");return t&&t.trimWhitespace===!1?o:o.map(i=>i.trim())}v.getMultilineInput=Zl;function Xl(n,t){let o=["true","True","TRUE"],i=["false","False","FALSE"],a=Jn(n,t);if(o.includes(a))return!0;if(i.includes(a))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${n}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}v.getBooleanInput=Xl;function ef(n,t){if(process.env.GITHUB_OUTPUT||"")return Je.issueFileCommand("OUTPUT",Je.prepareKeyValueMessage(n,t));process.stdout.write(vs.EOL),fe.issueCommand("set-output",{name:n},_t.toCommandValue(t))}v.setOutput=ef;function tf(n){fe.issue("echo",n?"on":"off")}v.setCommandEcho=tf;function rf(n){process.exitCode=Ts.Failure,Es(n)}v.setFailed=rf;function nf(){return process.env.RUNNER_DEBUG==="1"}v.isDebug=nf;function of(n){fe.issueCommand("debug",{},n)}v.debug=of;function Es(n,t={}){fe.issueCommand("error",_t.toCommandProperties(t),n instanceof Error?n.toString():n)}v.error=Es;function sf(n,t={}){fe.issueCommand("warning",_t.toCommandProperties(t),n instanceof Error?n.toString():n)}v.warning=sf;function af(n,t={}){fe.issueCommand("notice",_t.toCommandProperties(t),n instanceof Error?n.toString():n)}v.notice=af;function uf(n){process.stdout.write(n+vs.EOL)}v.info=uf;function Ps(n){fe.issue("group",n)}v.startGroup=Ps;function As(){fe.issue("endgroup")}v.endGroup=As;function lf(n,t){return Rs(this,void 0,void 0,function*(){Ps(n);let o;try{o=yield t()}finally{As()}return o})}v.group=lf;function ff(n,t){if(process.env.GITHUB_STATE||"")return Je.issueFileCommand("STATE",Je.prepareKeyValueMessage(n,t));fe.issueCommand("save-state",{name:n},_t.toCommandValue(t))}v.saveState=ff;function cf(n){return process.env[`STATE_${n}`]||""}v.getState=cf;function df(n){return Rs(this,void 0,void 0,function*(){return yield Gl.OidcClient.getIDToken(n)})}v.getIDToken=df;var hf=Kn();Object.defineProperty(v,"summary",{enumerable:!0,get:function(){return hf.summary}});var pf=Kn();Object.defineProperty(v,"markdownSummary",{enumerable:!0,get:function(){return pf.markdownSummary}});var Zn=Ss();Object.defineProperty(v,"toPosixPath",{enumerable:!0,get:function(){return Zn.toPosixPath}});Object.defineProperty(v,"toWin32Path",{enumerable:!0,get:function(){return Zn.toWin32Path}});Object.defineProperty(v,"toPlatformPath",{enumerable:!0,get:function(){return Zn.toPlatformPath}})});var ks=Y((Ur,Os)=>{(function(n,t){typeof Ur=="object"&&typeof Os<"u"?t(Ur):typeof define=="function"&&define.amd?define(["exports"],t):(n=typeof globalThis<"u"?globalThis:n||self,t(n.WebStreamsPolyfill={}))})(Ur,function(n){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function i(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let a=i();function l(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=o,m=Promise,h=Promise.prototype.then,d=Promise.resolve.bind(m),y=Promise.reject.bind(m);function _(e){return new m(e)}function g(e){return d(e)}function w(e){return y(e)}function S(e,r,s){return h.call(e,r,s)}function L(e,r,s){S(S(e,r,s),void 0,f)}function B(e,r){L(e,r)}function q(e,r){L(e,void 0,r)}function F(e,r,s){return S(e,r,s)}function Q(e){S(e,void 0,f)}let C=(()=>{let e=a&&a.queueMicrotask;if(typeof e=="function")return e;let r=g(void 0);return s=>S(r,s)})();function M(e,r,s){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,r,s)}function D(e,r,s){try{return g(M(e,r,s))}catch(u){return w(u)}}let qe=16384;class te{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(r){let s=this._back,u=s;s._elements.length===qe-1&&(u={_elements:[],_next:void 0}),s._elements.push(r),u!==s&&(this._back=u,s._next=u),++this._size}shift(){let r=this._front,s=r,u=this._cursor,c=u+1,p=r._elements,b=p[u];return c===qe&&(s=r._next,c=0),--this._size,this._cursor=c,r!==s&&(this._front=s),p[u]=void 0,b}forEach(r){let s=this._cursor,u=this._front,c=u._elements;for(;(s!==c.length||u._next!==void 0)&&!(s===c.length&&(u=u._next,c=u._elements,s=0,c.length===0));)r(c[s]),++s}peek(){let r=this._front,s=this._cursor;return r._elements[s]}}function lo(e,r){e._ownerReadableStream=r,r._reader=e,r._state==="readable"?Jr(e):r._state==="closed"?fa(e):fo(e,r._storedError)}function Kr(e,r){let s=e._ownerReadableStream;return me(s,r)}function ve(e){e._ownerReadableStream._state==="readable"?Zr(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):ca(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function nt(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Jr(e){e._closedPromise=_((r,s)=>{e._closedPromise_resolve=r,e._closedPromise_reject=s})}function fo(e,r){Jr(e),Zr(e,r)}function fa(e){Jr(e),co(e)}function Zr(e,r){e._closedPromise_reject!==void 0&&(Q(e._closedPromise),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function ca(e,r){fo(e,r)}function co(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let ho=t("[[AbortSteps]]"),po=t("[[ErrorSteps]]"),Xr=t("[[CancelSteps]]"),en=t("[[PullSteps]]"),mo=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},da=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function ha(e){return typeof e=="object"||typeof e=="function"}function Te(e,r){if(e!==void 0&&!ha(e))throw new TypeError(`${r} is not an object.`)}function he(e,r){if(typeof e!="function")throw new TypeError(`${r} is not a function.`)}function pa(e){return typeof e=="object"&&e!==null||typeof e=="function"}function bo(e,r){if(!pa(e))throw new TypeError(`${r} is not an object.`)}function Ee(e,r,s){if(e===void 0)throw new TypeError(`Parameter ${r} is required in '${s}'.`)}function tn(e,r,s){if(e===void 0)throw new TypeError(`${r} is required in '${s}'.`)}function rn(e){return Number(e)}function yo(e){return e===0?0:e}function ma(e){return yo(da(e))}function go(e,r){let u=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=yo(c),!mo(c))throw new TypeError(`${r} is not a finite number`);if(c=ma(c),c<0||c>u)throw new TypeError(`${r} is outside the accepted range of 0 to ${u}, inclusive`);return!mo(c)||c===0?0:c}function nn(e,r){if(!xe(e))throw new TypeError(`${r} is not a ReadableStream.`)}function ot(e){return new vt(e)}function _o(e,r){e._reader._readRequests.push(r)}function on(e,r,s){let c=e._reader._readRequests.shift();s?c._closeSteps():c._chunkSteps(r)}function Qt(e){return e._reader._readRequests.length}function So(e){let r=e._reader;return!(r===void 0||!De(r))}class vt{constructor(r){if(Ee(r,1,"ReadableStreamDefaultReader"),nn(r,"First parameter"),Fe(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");lo(this,r),this._readRequests=new te}get closed(){return De(this)?this._closedPromise:w(Kt("closed"))}cancel(r=void 0){return De(this)?this._ownerReadableStream===void 0?w(nt("cancel")):Kr(this,r):w(Kt("cancel"))}read(){if(!De(this))return w(Kt("read"));if(this._ownerReadableStream===void 0)return w(nt("read from"));let r,s,u=_((p,b)=>{r=p,s=b});return Tt(this,{_chunkSteps:p=>r({value:p,done:!1}),_closeSteps:()=>r({value:void 0,done:!0}),_errorSteps:p=>s(p)}),u}releaseLock(){if(!De(this))throw Kt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ve(this)}}}Object.defineProperties(vt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(vt.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function De(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof vt}function Tt(e,r){let s=e._ownerReadableStream;s._disturbed=!0,s._state==="closed"?r._closeSteps():s._state==="errored"?r._errorSteps(s._storedError):s._readableStreamController[en](r)}function Kt(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let wo=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Ro{constructor(r,s){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=r,this._preventCancel=s}next(){let r=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?F(this._ongoingPromise,r,r):r(),this._ongoingPromise}return(r){let s=()=>this._returnSteps(r);return this._ongoingPromise?F(this._ongoingPromise,s,s):s()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let r=this._reader;if(r._ownerReadableStream===void 0)return w(nt("iterate"));let s,u,c=_((b,R)=>{s=b,u=R});return Tt(r,{_chunkSteps:b=>{this._ongoingPromise=void 0,C(()=>s({value:b,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,ve(r),s({value:void 0,done:!0})},_errorSteps:b=>{this._ongoingPromise=void 0,this._isFinished=!0,ve(r),u(b)}}),c}_returnSteps(r){if(this._isFinished)return Promise.resolve({value:r,done:!0});this._isFinished=!0;let s=this._reader;if(s._ownerReadableStream===void 0)return w(nt("finish iterating"));if(!this._preventCancel){let u=Kr(s,r);return ve(s),F(u,()=>({value:r,done:!0}))}return ve(s),g({value:r,done:!0})}}let vo={next(){return To(this)?this._asyncIteratorImpl.next():w(Eo("next"))},return(e){return To(this)?this._asyncIteratorImpl.return(e):w(Eo("return"))}};wo!==void 0&&Object.setPrototypeOf(vo,wo);function ba(e,r){let s=ot(e),u=new Ro(s,r),c=Object.create(vo);return c._asyncIteratorImpl=u,c}function To(e){if(!l(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Ro}catch{return!1}}function Eo(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Po=Number.isNaN||function(e){return e!==e};function Et(e){return e.slice()}function Ao(e,r,s,u,c){new Uint8Array(e).set(new Uint8Array(s,u,c),r)}function Mf(e){return e}function Jt(e){return!1}function Co(e,r,s){if(e.slice)return e.slice(r,s);let u=s-r,c=new ArrayBuffer(u);return Ao(c,0,e,r,u),c}function ya(e){return!(typeof e!="number"||Po(e)||e<0)}function Oo(e){let r=Co(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(r)}function sn(e){let r=e._queue.shift();return e._queueTotalSize-=r.size,e._queueTotalSize<0&&(e._queueTotalSize=0),r.value}function an(e,r,s){if(!ya(s)||s===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:r,size:s}),e._queueTotalSize+=s}function ga(e){return e._queue.peek().value}function Ie(e){e._queue=new te,e._queueTotalSize=0}class Pt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!un(this))throw dn("view");return this._view}respond(r){if(!un(this))throw dn("respond");if(Ee(r,1,"respond"),r=go(r,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Jt(this._view.buffer),rr(this._associatedReadableByteStreamController,r)}respondWithNewView(r){if(!un(this))throw dn("respondWithNewView");if(Ee(r,1,"respondWithNewView"),!ArrayBuffer.isView(r))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Jt(r.buffer),nr(this._associatedReadableByteStreamController,r)}}Object.defineProperties(Pt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Pt.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class it{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!He(this))throw Ct("byobRequest");return cn(this)}get desiredSize(){if(!He(this))throw Ct("desiredSize");return xo(this)}close(){if(!He(this))throw Ct("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let r=this._controlledReadableByteStream._state;if(r!=="readable")throw new TypeError(`The stream (in ${r} state) is not in the readable state and cannot be closed`);At(this)}enqueue(r){if(!He(this))throw Ct("enqueue");if(Ee(r,1,"enqueue"),!ArrayBuffer.isView(r))throw new TypeError("chunk must be an array buffer view");if(r.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(r.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let s=this._controlledReadableByteStream._state;if(s!=="readable")throw new TypeError(`The stream (in ${s} state) is not in the readable state and cannot be enqueued to`);tr(this,r)}error(r=void 0){if(!He(this))throw Ct("error");pe(this,r)}[Xr](r){ko(this),Ie(this);let s=this._cancelAlgorithm(r);return er(this),s}[en](r){let s=this._controlledReadableByteStream;if(this._queueTotalSize>0){let c=this._queue.shift();this._queueTotalSize-=c.byteLength,Io(this);let p=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);r._chunkSteps(p);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let c;try{c=new ArrayBuffer(u)}catch(b){r._errorSteps(b);return}let p={buffer:c,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(p)}_o(s,r),Ve(this)}}Object.defineProperties(it.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(it.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function He(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof it}function un(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Pt}function Ve(e){if(!Ra(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();L(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ve(e))},u=>{pe(e,u)})}function ko(e){fn(e),e._pendingPullIntos=new te}function ln(e,r){let s=!1;e._state==="closed"&&(s=!0);let u=Bo(r);r.readerType==="default"?on(e,u,s):Ea(e,u,s)}function Bo(e){let r=e.bytesFilled,s=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,r/s)}function Zt(e,r,s,u){e._queue.push({buffer:r,byteOffset:s,byteLength:u}),e._queueTotalSize+=u}function qo(e,r){let s=r.elementSize,u=r.bytesFilled-r.bytesFilled%s,c=Math.min(e._queueTotalSize,r.byteLength-r.bytesFilled),p=r.bytesFilled+c,b=p-p%s,R=c,E=!1;b>u&&(R=b-r.bytesFilled,E=!0);let A=e._queue;for(;R>0;){let O=A.peek(),k=Math.min(R,O.byteLength),$=r.byteOffset+r.bytesFilled;Ao(r.buffer,$,O.buffer,O.byteOffset,k),O.byteLength===k?A.shift():(O.byteOffset+=k,O.byteLength-=k),e._queueTotalSize-=k,Do(e,k,r),R-=k}return E}function Do(e,r,s){s.bytesFilled+=r}function Io(e){e._queueTotalSize===0&&e._closeRequested?(er(e),Wt(e._controlledReadableByteStream)):Ve(e)}function fn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Lo(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let r=e._pendingPullIntos.peek();qo(e,r)&&(Xt(e),ln(e._controlledReadableByteStream,r))}}function _a(e,r,s){let u=e._controlledReadableByteStream,c=1;r.constructor!==DataView&&(c=r.constructor.BYTES_PER_ELEMENT);let p=r.constructor,b=r.buffer,R={buffer:b,bufferByteLength:b.byteLength,byteOffset:r.byteOffset,byteLength:r.byteLength,bytesFilled:0,elementSize:c,viewConstructor:p,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(R),Mo(u,s);return}if(u._state==="closed"){let E=new p(R.buffer,R.byteOffset,0);s._closeSteps(E);return}if(e._queueTotalSize>0){if(qo(e,R)){let E=Bo(R);Io(e),s._chunkSteps(E);return}if(e._closeRequested){let E=new TypeError("Insufficient bytes to fill elements in the given buffer");pe(e,E),s._errorSteps(E);return}}e._pendingPullIntos.push(R),Mo(u,s),Ve(e)}function Sa(e,r){let s=e._controlledReadableByteStream;if(hn(s))for(;jo(s)>0;){let u=Xt(e);ln(s,u)}}function wa(e,r,s){if(Do(e,r,s),s.bytesFilled<s.elementSize)return;Xt(e);let u=s.bytesFilled%s.elementSize;if(u>0){let c=s.byteOffset+s.bytesFilled,p=Co(s.buffer,c-u,c);Zt(e,p,0,p.byteLength)}s.bytesFilled-=u,ln(e._controlledReadableByteStream,s),Lo(e)}function Wo(e,r){let s=e._pendingPullIntos.peek();fn(e),e._controlledReadableByteStream._state==="closed"?Sa(e):wa(e,r,s),Ve(e)}function Xt(e){return e._pendingPullIntos.shift()}function Ra(e){let r=e._controlledReadableByteStream;return r._state!=="readable"||e._closeRequested||!e._started?!1:!!(So(r)&&Qt(r)>0||hn(r)&&jo(r)>0||xo(e)>0)}function er(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function At(e){let r=e._controlledReadableByteStream;if(!(e._closeRequested||r._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw pe(e,u),u}er(e),Wt(r)}}function tr(e,r){let s=e._controlledReadableByteStream;if(e._closeRequested||s._state!=="readable")return;let u=r.buffer,c=r.byteOffset,p=r.byteLength,b=u;if(e._pendingPullIntos.length>0){let R=e._pendingPullIntos.peek();Jt(R.buffer),R.buffer=R.buffer}if(fn(e),So(s))if(Qt(s)===0)Zt(e,b,c,p);else{e._pendingPullIntos.length>0&&Xt(e);let R=new Uint8Array(b,c,p);on(s,R,!1)}else hn(s)?(Zt(e,b,c,p),Lo(e)):Zt(e,b,c,p);Ve(e)}function pe(e,r){let s=e._controlledReadableByteStream;s._state==="readable"&&(ko(e),Ie(e),er(e),ci(s,r))}function cn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let r=e._pendingPullIntos.peek(),s=new Uint8Array(r.buffer,r.byteOffset+r.bytesFilled,r.byteLength-r.bytesFilled),u=Object.create(Pt.prototype);Ta(u,e,s),e._byobRequest=u}return e._byobRequest}function xo(e){let r=e._controlledReadableByteStream._state;return r==="errored"?null:r==="closed"?0:e._strategyHWM-e._queueTotalSize}function rr(e,r){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(r!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(r===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(s.bytesFilled+r>s.byteLength)throw new RangeError("bytesWritten out of range")}s.buffer=s.buffer,Wo(e,r)}function nr(e,r){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(r.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(r.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(s.byteOffset+s.bytesFilled!==r.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(s.bufferByteLength!==r.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(s.bytesFilled+r.byteLength>s.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=r.byteLength;s.buffer=r.buffer,Wo(e,c)}function Fo(e,r,s,u,c,p,b){r._controlledReadableByteStream=e,r._pullAgain=!1,r._pulling=!1,r._byobRequest=null,r._queue=r._queueTotalSize=void 0,Ie(r),r._closeRequested=!1,r._started=!1,r._strategyHWM=p,r._pullAlgorithm=u,r._cancelAlgorithm=c,r._autoAllocateChunkSize=b,r._pendingPullIntos=new te,e._readableStreamController=r;let R=s();L(g(R),()=>{r._started=!0,Ve(r)},E=>{pe(r,E)})}function va(e,r,s){let u=Object.create(it.prototype),c=()=>{},p=()=>g(void 0),b=()=>g(void 0);r.start!==void 0&&(c=()=>r.start(u)),r.pull!==void 0&&(p=()=>r.pull(u)),r.cancel!==void 0&&(b=E=>r.cancel(E));let R=r.autoAllocateChunkSize;if(R===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Fo(e,u,c,p,b,s,R)}function Ta(e,r,s){e._associatedReadableByteStreamController=r,e._view=s}function dn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Ct(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Uo(e){return new Ot(e)}function Mo(e,r){e._reader._readIntoRequests.push(r)}function Ea(e,r,s){let c=e._reader._readIntoRequests.shift();s?c._closeSteps(r):c._chunkSteps(r)}function jo(e){return e._reader._readIntoRequests.length}function hn(e){let r=e._reader;return!(r===void 0||!Ye(r))}class Ot{constructor(r){if(Ee(r,1,"ReadableStreamBYOBReader"),nn(r,"First parameter"),Fe(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!He(r._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");lo(this,r),this._readIntoRequests=new te}get closed(){return Ye(this)?this._closedPromise:w(or("closed"))}cancel(r=void 0){return Ye(this)?this._ownerReadableStream===void 0?w(nt("cancel")):Kr(this,r):w(or("cancel"))}read(r){if(!Ye(this))return w(or("read"));if(!ArrayBuffer.isView(r))return w(new TypeError("view must be an array buffer view"));if(r.byteLength===0)return w(new TypeError("view must have non-zero byteLength"));if(r.buffer.byteLength===0)return w(new TypeError("view's buffer must have non-zero byteLength"));if(Jt(r.buffer),this._ownerReadableStream===void 0)return w(nt("read from"));let s,u,c=_((b,R)=>{s=b,u=R});return $o(this,r,{_chunkSteps:b=>s({value:b,done:!1}),_closeSteps:b=>s({value:b,done:!0}),_errorSteps:b=>u(b)}),c}releaseLock(){if(!Ye(this))throw or("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ve(this)}}}Object.defineProperties(Ot.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ot.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Ye(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Ot}function $o(e,r,s){let u=e._ownerReadableStream;u._disturbed=!0,u._state==="errored"?s._errorSteps(u._storedError):_a(u._readableStreamController,r,s)}function or(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function kt(e,r){let{highWaterMark:s}=e;if(s===void 0)return r;if(Po(s)||s<0)throw new RangeError("Invalid highWaterMark");return s}function ir(e){let{size:r}=e;return r||(()=>1)}function sr(e,r){Te(e,r);let s=e==null?void 0:e.highWaterMark,u=e==null?void 0:e.size;return{highWaterMark:s===void 0?void 0:rn(s),size:u===void 0?void 0:Pa(u,`${r} has member 'size' that`)}}function Pa(e,r){return he(e,r),s=>rn(e(s))}function Aa(e,r){Te(e,r);let s=e==null?void 0:e.abort,u=e==null?void 0:e.close,c=e==null?void 0:e.start,p=e==null?void 0:e.type,b=e==null?void 0:e.write;return{abort:s===void 0?void 0:Ca(s,e,`${r} has member 'abort' that`),close:u===void 0?void 0:Oa(u,e,`${r} has member 'close' that`),start:c===void 0?void 0:ka(c,e,`${r} has member 'start' that`),write:b===void 0?void 0:Ba(b,e,`${r} has member 'write' that`),type:p}}function Ca(e,r,s){return he(e,s),u=>D(e,r,[u])}function Oa(e,r,s){return he(e,s),()=>D(e,r,[])}function ka(e,r,s){return he(e,s),u=>M(e,r,[u])}function Ba(e,r,s){return he(e,s),(u,c)=>D(e,r,[u,c])}function zo(e,r){if(!st(e))throw new TypeError(`${r} is not a WritableStream.`)}function qa(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Da=typeof AbortController=="function";function Ia(){if(Da)return new AbortController}class Bt{constructor(r={},s={}){r===void 0?r=null:bo(r,"First parameter");let u=sr(s,"Second parameter"),c=Aa(r,"First parameter");if(Ho(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let b=ir(u),R=kt(u,1);Ga(this,c,R,b)}get locked(){if(!st(this))throw cr("locked");return at(this)}abort(r=void 0){return st(this)?at(this)?w(new TypeError("Cannot abort a stream that already has a writer")):ar(this,r):w(cr("abort"))}close(){return st(this)?at(this)?w(new TypeError("Cannot close a stream that already has a writer")):_e(this)?w(new TypeError("Cannot close an already-closing stream")):Vo(this):w(cr("close"))}getWriter(){if(!st(this))throw cr("getWriter");return No(this)}}Object.defineProperties(Bt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Bt.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function No(e){return new qt(e)}function La(e,r,s,u,c=1,p=()=>1){let b=Object.create(Bt.prototype);Ho(b);let R=Object.create(ut.prototype);return Zo(b,R,e,r,s,u,c,p),b}function Ho(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new te,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function st(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof Bt}function at(e){return e._writer!==void 0}function ar(e,r){var s;if(e._state==="closed"||e._state==="errored")return g(void 0);e._writableStreamController._abortReason=r,(s=e._writableStreamController._abortController)===null||s===void 0||s.abort();let u=e._state;if(u==="closed"||u==="errored")return g(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;u==="erroring"&&(c=!0,r=void 0);let p=_((b,R)=>{e._pendingAbortRequest={_promise:void 0,_resolve:b,_reject:R,_reason:r,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=p,c||mn(e,r),p}function Vo(e){let r=e._state;if(r==="closed"||r==="errored")return w(new TypeError(`The stream (in ${r} state) is not in the writable state and cannot be closed`));let s=_((c,p)=>{let b={_resolve:c,_reject:p};e._closeRequest=b}),u=e._writer;return u!==void 0&&e._backpressure&&r==="writable"&&Tn(u),Qa(e._writableStreamController),s}function Wa(e){return _((s,u)=>{let c={_resolve:s,_reject:u};e._writeRequests.push(c)})}function pn(e,r){if(e._state==="writable"){mn(e,r);return}bn(e)}function mn(e,r){let s=e._writableStreamController;e._state="erroring",e._storedError=r;let u=e._writer;u!==void 0&&Go(u,r),!ja(e)&&s._started&&bn(e)}function bn(e){e._state="errored",e._writableStreamController[po]();let r=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(r)}),e._writeRequests=new te,e._pendingAbortRequest===void 0){ur(e);return}let s=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,s._wasAlreadyErroring){s._reject(r),ur(e);return}let u=e._writableStreamController[ho](s._reason);L(u,()=>{s._resolve(),ur(e)},c=>{s._reject(c),ur(e)})}function xa(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Fa(e,r){e._inFlightWriteRequest._reject(r),e._inFlightWriteRequest=void 0,pn(e,r)}function Ua(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let s=e._writer;s!==void 0&&ri(s)}function Ma(e,r){e._inFlightCloseRequest._reject(r),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(r),e._pendingAbortRequest=void 0),pn(e,r)}function _e(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function ja(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function $a(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function za(e){e._inFlightWriteRequest=e._writeRequests.shift()}function ur(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let r=e._writer;r!==void 0&&Rn(r,e._storedError)}function yn(e,r){let s=e._writer;s!==void 0&&r!==e._backpressure&&(r?ru(s):Tn(s)),e._backpressure=r}class qt{constructor(r){if(Ee(r,1,"WritableStreamDefaultWriter"),zo(r,"First parameter"),at(r))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=r,r._writer=this;let s=r._state;if(s==="writable")!_e(r)&&r._backpressure?hr(this):ni(this),dr(this);else if(s==="erroring")vn(this,r._storedError),dr(this);else if(s==="closed")ni(this),eu(this);else{let u=r._storedError;vn(this,u),ti(this,u)}}get closed(){return Ge(this)?this._closedPromise:w(Qe("closed"))}get desiredSize(){if(!Ge(this))throw Qe("desiredSize");if(this._ownerWritableStream===void 0)throw Dt("desiredSize");return Ya(this)}get ready(){return Ge(this)?this._readyPromise:w(Qe("ready"))}abort(r=void 0){return Ge(this)?this._ownerWritableStream===void 0?w(Dt("abort")):Na(this,r):w(Qe("abort"))}close(){if(!Ge(this))return w(Qe("close"));let r=this._ownerWritableStream;return r===void 0?w(Dt("close")):_e(r)?w(new TypeError("Cannot close an already-closing stream")):Yo(this)}releaseLock(){if(!Ge(this))throw Qe("releaseLock");this._ownerWritableStream!==void 0&&Qo(this)}write(r=void 0){return Ge(this)?this._ownerWritableStream===void 0?w(Dt("write to")):Ko(this,r):w(Qe("write"))}}Object.defineProperties(qt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(qt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Ge(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof qt}function Na(e,r){let s=e._ownerWritableStream;return ar(s,r)}function Yo(e){let r=e._ownerWritableStream;return Vo(r)}function Ha(e){let r=e._ownerWritableStream,s=r._state;return _e(r)||s==="closed"?g(void 0):s==="errored"?w(r._storedError):Yo(e)}function Va(e,r){e._closedPromiseState==="pending"?Rn(e,r):tu(e,r)}function Go(e,r){e._readyPromiseState==="pending"?oi(e,r):nu(e,r)}function Ya(e){let r=e._ownerWritableStream,s=r._state;return s==="errored"||s==="erroring"?null:s==="closed"?0:Xo(r._writableStreamController)}function Qo(e){let r=e._ownerWritableStream,s=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Go(e,s),Va(e,s),r._writer=void 0,e._ownerWritableStream=void 0}function Ko(e,r){let s=e._ownerWritableStream,u=s._writableStreamController,c=Ka(u,r);if(s!==e._ownerWritableStream)return w(Dt("write to"));let p=s._state;if(p==="errored")return w(s._storedError);if(_e(s)||p==="closed")return w(new TypeError("The stream is closing or closed and cannot be written to"));if(p==="erroring")return w(s._storedError);let b=Wa(s);return Ja(u,r,c),b}let Jo={};class ut{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!gn(this))throw wn("abortReason");return this._abortReason}get signal(){if(!gn(this))throw wn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(r=void 0){if(!gn(this))throw wn("error");this._controlledWritableStream._state==="writable"&&ei(this,r)}[ho](r){let s=this._abortAlgorithm(r);return lr(this),s}[po](){Ie(this)}}Object.defineProperties(ut.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(ut.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function gn(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof ut}function Zo(e,r,s,u,c,p,b,R){r._controlledWritableStream=e,e._writableStreamController=r,r._queue=void 0,r._queueTotalSize=void 0,Ie(r),r._abortReason=void 0,r._abortController=Ia(),r._started=!1,r._strategySizeAlgorithm=R,r._strategyHWM=b,r._writeAlgorithm=u,r._closeAlgorithm=c,r._abortAlgorithm=p;let E=Sn(r);yn(e,E);let A=s(),O=g(A);L(O,()=>{r._started=!0,fr(r)},k=>{r._started=!0,pn(e,k)})}function Ga(e,r,s,u){let c=Object.create(ut.prototype),p=()=>{},b=()=>g(void 0),R=()=>g(void 0),E=()=>g(void 0);r.start!==void 0&&(p=()=>r.start(c)),r.write!==void 0&&(b=A=>r.write(A,c)),r.close!==void 0&&(R=()=>r.close()),r.abort!==void 0&&(E=A=>r.abort(A)),Zo(e,c,p,b,R,E,s,u)}function lr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Qa(e){an(e,Jo,0),fr(e)}function Ka(e,r){try{return e._strategySizeAlgorithm(r)}catch(s){return _n(e,s),1}}function Xo(e){return e._strategyHWM-e._queueTotalSize}function Ja(e,r,s){try{an(e,r,s)}catch(c){_n(e,c);return}let u=e._controlledWritableStream;if(!_e(u)&&u._state==="writable"){let c=Sn(e);yn(u,c)}fr(e)}function fr(e){let r=e._controlledWritableStream;if(!e._started||r._inFlightWriteRequest!==void 0)return;if(r._state==="erroring"){bn(r);return}if(e._queue.length===0)return;let u=ga(e);u===Jo?Za(e):Xa(e,u)}function _n(e,r){e._controlledWritableStream._state==="writable"&&ei(e,r)}function Za(e){let r=e._controlledWritableStream;$a(r),sn(e);let s=e._closeAlgorithm();lr(e),L(s,()=>{Ua(r)},u=>{Ma(r,u)})}function Xa(e,r){let s=e._controlledWritableStream;za(s);let u=e._writeAlgorithm(r);L(u,()=>{xa(s);let c=s._state;if(sn(e),!_e(s)&&c==="writable"){let p=Sn(e);yn(s,p)}fr(e)},c=>{s._state==="writable"&&lr(e),Fa(s,c)})}function Sn(e){return Xo(e)<=0}function ei(e,r){let s=e._controlledWritableStream;lr(e),mn(s,r)}function cr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function wn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Qe(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Dt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function dr(e){e._closedPromise=_((r,s)=>{e._closedPromise_resolve=r,e._closedPromise_reject=s,e._closedPromiseState="pending"})}function ti(e,r){dr(e),Rn(e,r)}function eu(e){dr(e),ri(e)}function Rn(e,r){e._closedPromise_reject!==void 0&&(Q(e._closedPromise),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function tu(e,r){ti(e,r)}function ri(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function hr(e){e._readyPromise=_((r,s)=>{e._readyPromise_resolve=r,e._readyPromise_reject=s}),e._readyPromiseState="pending"}function vn(e,r){hr(e),oi(e,r)}function ni(e){hr(e),Tn(e)}function oi(e,r){e._readyPromise_reject!==void 0&&(Q(e._readyPromise),e._readyPromise_reject(r),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function ru(e){hr(e)}function nu(e,r){vn(e,r)}function Tn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let ii=typeof DOMException<"u"?DOMException:void 0;function ou(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function iu(){let e=function(s,u){this.message=s||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let su=ou(ii)?ii:iu();function si(e,r,s,u,c,p){let b=ot(e),R=No(r);e._disturbed=!0;let E=!1,A=g(void 0);return _((O,k)=>{let $;if(p!==void 0){if($=()=>{let T=new su("Aborted","AbortError"),P=[];u||P.push(()=>r._state==="writable"?ar(r,T):g(void 0)),c||P.push(()=>e._state==="readable"?me(e,T):g(void 0)),K(()=>Promise.all(P.map(W=>W())),!0,T)},p.aborted){$();return}p.addEventListener("abort",$)}function be(){return _((T,P)=>{function W(re){re?T():S(ct(),W,P)}W(!1)})}function ct(){return E?g(!0):S(R._readyPromise,()=>_((T,P)=>{Tt(b,{_chunkSteps:W=>{A=S(Ko(R,W),void 0,o),T(!1)},_closeSteps:()=>T(!0),_errorSteps:P})}))}if(Pe(e,b._closedPromise,T=>{u?se(!0,T):K(()=>ar(r,T),!0,T)}),Pe(r,R._closedPromise,T=>{c?se(!0,T):K(()=>me(e,T),!0,T)}),V(e,b._closedPromise,()=>{s?se():K(()=>Ha(R))}),_e(r)||r._state==="closed"){let T=new TypeError("the destination writable stream closed before all data could be piped to it");c?se(!0,T):K(()=>me(e,T),!0,T)}Q(be());function Ue(){let T=A;return S(A,()=>T!==A?Ue():void 0)}function Pe(T,P,W){T._state==="errored"?W(T._storedError):q(P,W)}function V(T,P,W){T._state==="closed"?W():B(P,W)}function K(T,P,W){if(E)return;E=!0,r._state==="writable"&&!_e(r)?B(Ue(),re):re();function re(){L(T(),()=>Ae(P,W),dt=>Ae(!0,dt))}}function se(T,P){E||(E=!0,r._state==="writable"&&!_e(r)?B(Ue(),()=>Ae(T,P)):Ae(T,P))}function Ae(T,P){Qo(R),ve(b),p!==void 0&&p.removeEventListener("abort",$),T?k(P):O(void 0)}})}class lt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!pr(this))throw yr("desiredSize");return En(this)}close(){if(!pr(this))throw yr("close");if(!ft(this))throw new TypeError("The stream is not in a state that permits close");Lt(this)}enqueue(r=void 0){if(!pr(this))throw yr("enqueue");if(!ft(this))throw new TypeError("The stream is not in a state that permits enqueue");return br(this,r)}error(r=void 0){if(!pr(this))throw yr("error");Le(this,r)}[Xr](r){Ie(this);let s=this._cancelAlgorithm(r);return mr(this),s}[en](r){let s=this._controlledReadableStream;if(this._queue.length>0){let u=sn(this);this._closeRequested&&this._queue.length===0?(mr(this),Wt(s)):It(this),r._chunkSteps(u)}else _o(s,r),It(this)}}Object.defineProperties(lt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(lt.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function pr(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof lt}function It(e){if(!ai(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();L(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,It(e))},u=>{Le(e,u)})}function ai(e){let r=e._controlledReadableStream;return!ft(e)||!e._started?!1:!!(Fe(r)&&Qt(r)>0||En(e)>0)}function mr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Lt(e){if(!ft(e))return;let r=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(mr(e),Wt(r))}function br(e,r){if(!ft(e))return;let s=e._controlledReadableStream;if(Fe(s)&&Qt(s)>0)on(s,r,!1);else{let u;try{u=e._strategySizeAlgorithm(r)}catch(c){throw Le(e,c),c}try{an(e,r,u)}catch(c){throw Le(e,c),c}}It(e)}function Le(e,r){let s=e._controlledReadableStream;s._state==="readable"&&(Ie(e),mr(e),ci(s,r))}function En(e){let r=e._controlledReadableStream._state;return r==="errored"?null:r==="closed"?0:e._strategyHWM-e._queueTotalSize}function au(e){return!ai(e)}function ft(e){let r=e._controlledReadableStream._state;return!e._closeRequested&&r==="readable"}function ui(e,r,s,u,c,p,b){r._controlledReadableStream=e,r._queue=void 0,r._queueTotalSize=void 0,Ie(r),r._started=!1,r._closeRequested=!1,r._pullAgain=!1,r._pulling=!1,r._strategySizeAlgorithm=b,r._strategyHWM=p,r._pullAlgorithm=u,r._cancelAlgorithm=c,e._readableStreamController=r;let R=s();L(g(R),()=>{r._started=!0,It(r)},E=>{Le(r,E)})}function uu(e,r,s,u){let c=Object.create(lt.prototype),p=()=>{},b=()=>g(void 0),R=()=>g(void 0);r.start!==void 0&&(p=()=>r.start(c)),r.pull!==void 0&&(b=()=>r.pull(c)),r.cancel!==void 0&&(R=E=>r.cancel(E)),ui(e,c,p,b,R,s,u)}function yr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function lu(e,r){return He(e._readableStreamController)?cu(e):fu(e)}function fu(e,r){let s=ot(e),u=!1,c=!1,p=!1,b=!1,R,E,A,O,k,$=_(V=>{k=V});function be(){return u?(c=!0,g(void 0)):(u=!0,Tt(s,{_chunkSteps:K=>{C(()=>{c=!1;let se=K,Ae=K;p||br(A._readableStreamController,se),b||br(O._readableStreamController,Ae),u=!1,c&&be()})},_closeSteps:()=>{u=!1,p||Lt(A._readableStreamController),b||Lt(O._readableStreamController),(!p||!b)&&k(void 0)},_errorSteps:()=>{u=!1}}),g(void 0))}function ct(V){if(p=!0,R=V,b){let K=Et([R,E]),se=me(e,K);k(se)}return $}function Ue(V){if(b=!0,E=V,p){let K=Et([R,E]),se=me(e,K);k(se)}return $}function Pe(){}return A=Pn(Pe,be,ct),O=Pn(Pe,be,Ue),q(s._closedPromise,V=>{Le(A._readableStreamController,V),Le(O._readableStreamController,V),(!p||!b)&&k(void 0)}),[A,O]}function cu(e){let r=ot(e),s=!1,u=!1,c=!1,p=!1,b=!1,R,E,A,O,k,$=_(T=>{k=T});function be(T){q(T._closedPromise,P=>{T===r&&(pe(A._readableStreamController,P),pe(O._readableStreamController,P),(!p||!b)&&k(void 0))})}function ct(){Ye(r)&&(ve(r),r=ot(e),be(r)),Tt(r,{_chunkSteps:P=>{C(()=>{u=!1,c=!1;let W=P,re=P;if(!p&&!b)try{re=Oo(P)}catch(dt){pe(A._readableStreamController,dt),pe(O._readableStreamController,dt),k(me(e,dt));return}p||tr(A._readableStreamController,W),b||tr(O._readableStreamController,re),s=!1,u?Pe():c&&V()})},_closeSteps:()=>{s=!1,p||At(A._readableStreamController),b||At(O._readableStreamController),A._readableStreamController._pendingPullIntos.length>0&&rr(A._readableStreamController,0),O._readableStreamController._pendingPullIntos.length>0&&rr(O._readableStreamController,0),(!p||!b)&&k(void 0)},_errorSteps:()=>{s=!1}})}function Ue(T,P){De(r)&&(ve(r),r=Uo(e),be(r));let W=P?O:A,re=P?A:O;$o(r,T,{_chunkSteps:ht=>{C(()=>{u=!1,c=!1;let pt=P?b:p;if(P?p:b)pt||nr(W._readableStreamController,ht);else{let Ti;try{Ti=Oo(ht)}catch(Cn){pe(W._readableStreamController,Cn),pe(re._readableStreamController,Cn),k(me(e,Cn));return}pt||nr(W._readableStreamController,ht),tr(re._readableStreamController,Ti)}s=!1,u?Pe():c&&V()})},_closeSteps:ht=>{s=!1;let pt=P?b:p,Pr=P?p:b;pt||At(W._readableStreamController),Pr||At(re._readableStreamController),ht!==void 0&&(pt||nr(W._readableStreamController,ht),!Pr&&re._readableStreamController._pendingPullIntos.length>0&&rr(re._readableStreamController,0)),(!pt||!Pr)&&k(void 0)},_errorSteps:()=>{s=!1}})}function Pe(){if(s)return u=!0,g(void 0);s=!0;let T=cn(A._readableStreamController);return T===null?ct():Ue(T._view,!1),g(void 0)}function V(){if(s)return c=!0,g(void 0);s=!0;let T=cn(O._readableStreamController);return T===null?ct():Ue(T._view,!0),g(void 0)}function K(T){if(p=!0,R=T,b){let P=Et([R,E]),W=me(e,P);k(W)}return $}function se(T){if(b=!0,E=T,p){let P=Et([R,E]),W=me(e,P);k(W)}return $}function Ae(){}return A=fi(Ae,Pe,K),O=fi(Ae,V,se),be(r),[A,O]}function du(e,r){Te(e,r);let s=e,u=s==null?void 0:s.autoAllocateChunkSize,c=s==null?void 0:s.cancel,p=s==null?void 0:s.pull,b=s==null?void 0:s.start,R=s==null?void 0:s.type;return{autoAllocateChunkSize:u===void 0?void 0:go(u,`${r} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:hu(c,s,`${r} has member 'cancel' that`),pull:p===void 0?void 0:pu(p,s,`${r} has member 'pull' that`),start:b===void 0?void 0:mu(b,s,`${r} has member 'start' that`),type:R===void 0?void 0:bu(R,`${r} has member 'type' that`)}}function hu(e,r,s){return he(e,s),u=>D(e,r,[u])}function pu(e,r,s){return he(e,s),u=>D(e,r,[u])}function mu(e,r,s){return he(e,s),u=>M(e,r,[u])}function bu(e,r){if(e=`${e}`,e!=="bytes")throw new TypeError(`${r} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function yu(e,r){Te(e,r);let s=e==null?void 0:e.mode;return{mode:s===void 0?void 0:gu(s,`${r} has member 'mode' that`)}}function gu(e,r){if(e=`${e}`,e!=="byob")throw new TypeError(`${r} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function _u(e,r){return Te(e,r),{preventCancel:!!(e==null?void 0:e.preventCancel)}}function li(e,r){Te(e,r);let s=e==null?void 0:e.preventAbort,u=e==null?void 0:e.preventCancel,c=e==null?void 0:e.preventClose,p=e==null?void 0:e.signal;return p!==void 0&&Su(p,`${r} has member 'signal' that`),{preventAbort:!!s,preventCancel:!!u,preventClose:!!c,signal:p}}function Su(e,r){if(!qa(e))throw new TypeError(`${r} is not an AbortSignal.`)}function wu(e,r){Te(e,r);let s=e==null?void 0:e.readable;tn(s,"readable","ReadableWritablePair"),nn(s,`${r} has member 'readable' that`);let u=e==null?void 0:e.writable;return tn(u,"writable","ReadableWritablePair"),zo(u,`${r} has member 'writable' that`),{readable:s,writable:u}}class We{constructor(r={},s={}){r===void 0?r=null:bo(r,"First parameter");let u=sr(s,"Second parameter"),c=du(r,"First parameter");if(An(this),c.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let p=kt(u,0);va(this,c,p)}else{let p=ir(u),b=kt(u,1);uu(this,c,b,p)}}get locked(){if(!xe(this))throw Ke("locked");return Fe(this)}cancel(r=void 0){return xe(this)?Fe(this)?w(new TypeError("Cannot cancel a stream that already has a reader")):me(this,r):w(Ke("cancel"))}getReader(r=void 0){if(!xe(this))throw Ke("getReader");return yu(r,"First parameter").mode===void 0?ot(this):Uo(this)}pipeThrough(r,s={}){if(!xe(this))throw Ke("pipeThrough");Ee(r,1,"pipeThrough");let u=wu(r,"First parameter"),c=li(s,"Second parameter");if(Fe(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(at(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let p=si(this,u.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return Q(p),u.readable}pipeTo(r,s={}){if(!xe(this))return w(Ke("pipeTo"));if(r===void 0)return w("Parameter 1 is required in 'pipeTo'.");if(!st(r))return w(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=li(s,"Second parameter")}catch(c){return w(c)}return Fe(this)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):at(r)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):si(this,r,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!xe(this))throw Ke("tee");let r=lu(this);return Et(r)}values(r=void 0){if(!xe(this))throw Ke("values");let s=_u(r,"First parameter");return ba(this,s.preventCancel)}}Object.defineProperties(We.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(We.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(We.prototype,t.asyncIterator,{value:We.prototype.values,writable:!0,configurable:!0});function Pn(e,r,s,u=1,c=()=>1){let p=Object.create(We.prototype);An(p);let b=Object.create(lt.prototype);return ui(p,b,e,r,s,u,c),p}function fi(e,r,s){let u=Object.create(We.prototype);An(u);let c=Object.create(it.prototype);return Fo(u,c,e,r,s,0,void 0),u}function An(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function xe(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof We}function Fe(e){return e._reader!==void 0}function me(e,r){if(e._disturbed=!0,e._state==="closed")return g(void 0);if(e._state==="errored")return w(e._storedError);Wt(e);let s=e._reader;s!==void 0&&Ye(s)&&(s._readIntoRequests.forEach(c=>{c._closeSteps(void 0)}),s._readIntoRequests=new te);let u=e._readableStreamController[Xr](r);return F(u,o)}function Wt(e){e._state="closed";let r=e._reader;r!==void 0&&(co(r),De(r)&&(r._readRequests.forEach(s=>{s._closeSteps()}),r._readRequests=new te))}function ci(e,r){e._state="errored",e._storedError=r;let s=e._reader;s!==void 0&&(Zr(s,r),De(s)?(s._readRequests.forEach(u=>{u._errorSteps(r)}),s._readRequests=new te):(s._readIntoRequests.forEach(u=>{u._errorSteps(r)}),s._readIntoRequests=new te))}function Ke(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function di(e,r){Te(e,r);let s=e==null?void 0:e.highWaterMark;return tn(s,"highWaterMark","QueuingStrategyInit"),{highWaterMark:rn(s)}}let hi=e=>e.byteLength;try{Object.defineProperty(hi,"name",{value:"size",configurable:!0})}catch{}class gr{constructor(r){Ee(r,1,"ByteLengthQueuingStrategy"),r=di(r,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=r.highWaterMark}get highWaterMark(){if(!mi(this))throw pi("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!mi(this))throw pi("size");return hi}}Object.defineProperties(gr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(gr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function pi(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function mi(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof gr}let bi=()=>1;try{Object.defineProperty(bi,"name",{value:"size",configurable:!0})}catch{}class _r{constructor(r){Ee(r,1,"CountQueuingStrategy"),r=di(r,"First parameter"),this._countQueuingStrategyHighWaterMark=r.highWaterMark}get highWaterMark(){if(!gi(this))throw yi("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!gi(this))throw yi("size");return bi}}Object.defineProperties(_r.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(_r.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function yi(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function gi(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof _r}function Ru(e,r){Te(e,r);let s=e==null?void 0:e.flush,u=e==null?void 0:e.readableType,c=e==null?void 0:e.start,p=e==null?void 0:e.transform,b=e==null?void 0:e.writableType;return{flush:s===void 0?void 0:vu(s,e,`${r} has member 'flush' that`),readableType:u,start:c===void 0?void 0:Tu(c,e,`${r} has member 'start' that`),transform:p===void 0?void 0:Eu(p,e,`${r} has member 'transform' that`),writableType:b}}function vu(e,r,s){return he(e,s),u=>D(e,r,[u])}function Tu(e,r,s){return he(e,s),u=>M(e,r,[u])}function Eu(e,r,s){return he(e,s),(u,c)=>D(e,r,[u,c])}class Sr{constructor(r={},s={},u={}){r===void 0&&(r=null);let c=sr(s,"Second parameter"),p=sr(u,"Third parameter"),b=Ru(r,"First parameter");if(b.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(b.writableType!==void 0)throw new RangeError("Invalid writableType specified");let R=kt(p,0),E=ir(p),A=kt(c,1),O=ir(c),k,$=_(be=>{k=be});Pu(this,$,A,O,R,E),Cu(this,b),b.start!==void 0?k(b.start(this._transformStreamController)):k(void 0)}get readable(){if(!_i(this))throw vi("readable");return this._readable}get writable(){if(!_i(this))throw vi("writable");return this._writable}}Object.defineProperties(Sr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Sr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function Pu(e,r,s,u,c,p){function b(){return r}function R($){return Bu(e,$)}function E($){return qu(e,$)}function A(){return Du(e)}e._writable=La(b,R,A,E,s,u);function O(){return Iu(e)}function k($){return Rr(e,$),g(void 0)}e._readable=Pn(b,O,k,c,p),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,vr(e,!0),e._transformStreamController=void 0}function _i(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Sr}function wr(e,r){Le(e._readable._readableStreamController,r),Rr(e,r)}function Rr(e,r){Si(e._transformStreamController),_n(e._writable._writableStreamController,r),e._backpressure&&vr(e,!1)}function vr(e,r){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=_(s=>{e._backpressureChangePromise_resolve=s}),e._backpressure=r}class xt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Tr(this))throw Er("desiredSize");let r=this._controlledTransformStream._readable._readableStreamController;return En(r)}enqueue(r=void 0){if(!Tr(this))throw Er("enqueue");wi(this,r)}error(r=void 0){if(!Tr(this))throw Er("error");Ou(this,r)}terminate(){if(!Tr(this))throw Er("terminate");ku(this)}}Object.defineProperties(xt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(xt.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Tr(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof xt}function Au(e,r,s,u){r._controlledTransformStream=e,e._transformStreamController=r,r._transformAlgorithm=s,r._flushAlgorithm=u}function Cu(e,r){let s=Object.create(xt.prototype),u=p=>{try{return wi(s,p),g(void 0)}catch(b){return w(b)}},c=()=>g(void 0);r.transform!==void 0&&(u=p=>r.transform(p,s)),r.flush!==void 0&&(c=()=>r.flush(s)),Au(e,s,u,c)}function Si(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function wi(e,r){let s=e._controlledTransformStream,u=s._readable._readableStreamController;if(!ft(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{br(u,r)}catch(p){throw Rr(s,p),s._readable._storedError}au(u)!==s._backpressure&&vr(s,!0)}function Ou(e,r){wr(e._controlledTransformStream,r)}function Ri(e,r){let s=e._transformAlgorithm(r);return F(s,void 0,u=>{throw wr(e._controlledTransformStream,u),u})}function ku(e){let r=e._controlledTransformStream,s=r._readable._readableStreamController;Lt(s);let u=new TypeError("TransformStream terminated");Rr(r,u)}function Bu(e,r){let s=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return F(u,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return Ri(s,r)})}return Ri(s,r)}function qu(e,r){return wr(e,r),g(void 0)}function Du(e){let r=e._readable,s=e._transformStreamController,u=s._flushAlgorithm();return Si(s),F(u,()=>{if(r._state==="errored")throw r._storedError;Lt(r._readableStreamController)},c=>{throw wr(e,c),r._storedError})}function Iu(e){return vr(e,!1),e._backpressureChangePromise}function Er(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function vi(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}n.ByteLengthQueuingStrategy=gr,n.CountQueuingStrategy=_r,n.ReadableByteStreamController=it,n.ReadableStream=We,n.ReadableStreamBYOBReader=Ot,n.ReadableStreamBYOBRequest=Pt,n.ReadableStreamDefaultController=lt,n.ReadableStreamDefaultReader=vt,n.TransformStream=Sr,n.TransformStreamDefaultController=xt,n.WritableStream=Bt,n.WritableStreamDefaultController=ut,n.WritableStreamDefaultWriter=qt,Object.defineProperty(n,"__esModule",{value:!0})})});var Bs=Y(()=>{if(!globalThis.ReadableStream)try{let n=require("node:process"),{emitWarning:t}=n;try{n.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),n.emitWarning=t}catch(o){throw n.emitWarning=t,o}}catch{Object.assign(globalThis,ks())}try{let{Blob:n}=require("buffer");n&&!n.prototype.stream&&(n.prototype.stream=function(o){let i=0,a=this;return new ReadableStream({type:"bytes",async pull(l){let m=await a.slice(i,Math.min(a.size,i+65536)).arrayBuffer();i+=m.byteLength,l.enqueue(new Uint8Array(m)),i===a.size&&l.close()}})})}catch{}});async function*Xn(n,t=!0){for(let o of n)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(t){let i=o.byteOffset,a=o.byteOffset+o.byteLength;for(;i!==a;){let l=Math.min(a-i,qs),f=o.buffer.slice(i,i+l);i+=f.byteLength,yield new Uint8Array(f)}}else yield o;else{let i=0,a=o;for(;i!==a.size;){let f=await a.slice(i,Math.min(a.size,i+qs)).arrayBuffer();i+=f.byteLength,yield new Uint8Array(f)}}}var $c,qs,Ds,bf,Oe,jt=z(()=>{$c=ae(Bs(),1);qs=65536;Ds=class eo{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],o={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let i=new TextEncoder;for(let l of t){let f;ArrayBuffer.isView(l)?f=new Uint8Array(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)):l instanceof ArrayBuffer?f=new Uint8Array(l.slice(0)):l instanceof eo?f=l:f=i.encode(`${l}`),this.#r+=ArrayBuffer.isView(f)?f.byteLength:f.size,this.#e.push(f)}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let a=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(a)?a:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,o="";for await(let i of Xn(this.#e,!1))o+=t.decode(i,{stream:!0});return o+=t.decode(),o}async arrayBuffer(){let t=new Uint8Array(this.size),o=0;for await(let i of Xn(this.#e,!1))t.set(i,o),o+=i.length;return t.buffer}stream(){let t=Xn(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let i=await t.next();i.done?o.close():o.enqueue(i.value)},async cancel(){await t.return()}})}slice(t=0,o=this.size,i=""){let{size:a}=this,l=t<0?Math.max(a+t,0):Math.min(t,a),f=o<0?Math.max(a+o,0):Math.min(o,a),m=Math.max(f-l,0),h=this.#e,d=[],y=0;for(let g of h){if(y>=m)break;let w=ArrayBuffer.isView(g)?g.byteLength:g.size;if(l&&w<=l)l-=w,f-=w;else{let S;ArrayBuffer.isView(g)?(S=g.subarray(l,Math.min(w,f)),y+=S.byteLength):(S=g.slice(l,Math.min(w,f)),y+=S.size),f-=w,d.push(S),l=0}}let _=new eo([],{type:String(i).toLowerCase()});return _.#r=m,_.#e=d,_}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(Ds.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});bf=Ds,Oe=bf});var yf,gf,St,to=z(()=>{jt();yf=class extends Oe{#e=0;#t="";constructor(t,o,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,i),i===null&&(i={});let a=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(a)||(this.#e=a),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof Oe&&/^(File)$/.test(t[Symbol.toStringTag])}},gf=yf,St=gf});function Ws(n,t=Oe){var o=`${Is()}${Is()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],a=`--${o}\r
Content-Disposition: form-data; name="`;return n.forEach((l,f)=>typeof l=="string"?i.push(a+ro(f)+`"\r
\r
${l.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(a+ro(f)+`"; filename="${ro(l.name,1)}"\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,l,`\r
`)),i.push(`--${o}--`),new t(i,{type:"multipart/form-data; boundary="+o})}var $t,_f,Sf,Is,wf,Ls,ro,Ze,Xe,Mr=z(()=>{jt();to();({toStringTag:$t,iterator:_f,hasInstance:Sf}=Symbol),Is=Math.random,wf="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Ls=(n,t,o)=>(n+="",/^(Blob|File)$/.test(t&&t[$t])?[(o=o!==void 0?o+"":t[$t]=="File"?t.name:"blob",n),t.name!==o||t[$t]=="blob"?new St([t],o,t):t]:[n,t+""]),ro=(n,t)=>(t?n:n.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Ze=(n,t,o)=>{if(t.length<o)throw new TypeError(`Failed to execute '${n}' on 'FormData': ${o} arguments required, but only ${t.length} present.`)},Xe=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[$t](){return"FormData"}[_f](){return this.entries()}static[Sf](t){return t&&typeof t=="object"&&t[$t]==="FormData"&&!wf.some(o=>typeof t[o]!="function")}append(...t){Ze("append",arguments,2),this.#e.push(Ls(...t))}delete(t){Ze("delete",arguments,1),t+="",this.#e=this.#e.filter(([o])=>o!==t)}get(t){Ze("get",arguments,1),t+="";for(var o=this.#e,i=o.length,a=0;a<i;a++)if(o[a][0]===t)return o[a][1];return null}getAll(t,o){return Ze("getAll",arguments,1),o=[],t+="",this.#e.forEach(i=>i[0]===t&&o.push(i[1])),o}has(t){return Ze("has",arguments,1),t+="",this.#e.some(o=>o[0]===t)}forEach(t,o){Ze("forEach",arguments,1);for(var[i,a]of this)t.call(o,a,i,this)}set(...t){Ze("set",arguments,2);var o=[],i=!0;t=Ls(...t),this.#e.forEach(a=>{a[0]===t[0]?i&&(i=!o.push(t)):o.push(a)}),i&&o.push(t),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var js=Y((td,Ms)=>{if(!globalThis.DOMException)try{let{MessageChannel:n}=require("worker_threads"),t=new n().port1,o=new ArrayBuffer;t.postMessage(o,[o,o])}catch(n){n.constructor.name==="DOMException"&&(globalThis.DOMException=n.constructor)}Ms.exports=globalThis.DOMException});var Nt,zs,Rf,$s,oo=z(()=>{Nt=require("node:fs"),zs=ae(js(),1);to();jt();({stat:Rf}=Nt.promises),$s=class n{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified}slice(t,o){return new n({path:this.#e,lastModified:this.lastModified,size:o-t,start:this.#t+t})}async*stream(){let{mtimeMs:t}=await Rf(this.#e);if(t>this.lastModified)throw new zs.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Nt.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var Hs={};Ei(Hs,{toFormData:()=>Of});function Cf(n){let t=n.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let o=t[2]||t[3]||"",i=o.slice(o.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(a,l)=>String.fromCharCode(l)),i}async function Of(n,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let o=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new io(o[1]||o[2]),a,l,f,m,h,d,y=[],_=new Xe,g=q=>{f+=B.decode(q,{stream:!0})},w=q=>{y.push(q)},S=()=>{let q=new St(y,d,{type:h});_.append(m,q)},L=()=>{_.append(m,f)},B=new TextDecoder("utf-8");B.decode(),i.onPartBegin=function(){i.onPartData=g,i.onPartEnd=L,a="",l="",f="",m="",h="",d=null,y.length=0},i.onHeaderField=function(q){a+=B.decode(q,{stream:!0})},i.onHeaderValue=function(q){l+=B.decode(q,{stream:!0})},i.onHeaderEnd=function(){if(l+=B.decode(),a=a.toLowerCase(),a==="content-disposition"){let q=l.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);q&&(m=q[2]||q[3]||""),d=Cf(l),d&&(i.onPartData=w,i.onPartEnd=S)}else a==="content-type"&&(h=l);l="",a=""};for await(let q of n)i.write(q);return i.end(),_}var we,x,Ns,Ne,$r,zr,vf,Ht,Tf,Ef,Pf,Af,et,io,Vs=z(()=>{oo();Mr();we=0,x={START_BOUNDARY:we++,HEADER_FIELD_START:we++,HEADER_FIELD:we++,HEADER_VALUE_START:we++,HEADER_VALUE:we++,HEADER_VALUE_ALMOST_DONE:we++,HEADERS_ALMOST_DONE:we++,PART_DATA_START:we++,PART_DATA:we++,END:we++},Ns=1,Ne={PART_BOUNDARY:Ns,LAST_BOUNDARY:Ns*=2},$r=10,zr=13,vf=32,Ht=45,Tf=58,Ef=97,Pf=122,Af=n=>n|32,et=()=>{},io=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=et,this.onHeaderField=et,this.onHeadersEnd=et,this.onHeaderValue=et,this.onPartBegin=et,this.onPartData=et,this.onPartEnd=et,this.boundaryChars={},t=`\r
--`+t;let o=new Uint8Array(t.length);for(let i=0;i<t.length;i++)o[i]=t.charCodeAt(i),this.boundaryChars[o[i]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=x.START_BOUNDARY}write(t){let o=0,i=t.length,a=this.index,{lookbehind:l,boundary:f,boundaryChars:m,index:h,state:d,flags:y}=this,_=this.boundary.length,g=_-1,w=t.length,S,L,B=C=>{this[C+"Mark"]=o},q=C=>{delete this[C+"Mark"]},F=(C,M,D,qe)=>{(M===void 0||M!==D)&&this[C](qe&&qe.subarray(M,D))},Q=(C,M)=>{let D=C+"Mark";D in this&&(M?(F(C,this[D],o,t),delete this[D]):(F(C,this[D],t.length,t),this[D]=0))};for(o=0;o<i;o++)switch(S=t[o],d){case x.START_BOUNDARY:if(h===f.length-2){if(S===Ht)y|=Ne.LAST_BOUNDARY;else if(S!==zr)return;h++;break}else if(h-1===f.length-2){if(y&Ne.LAST_BOUNDARY&&S===Ht)d=x.END,y=0;else if(!(y&Ne.LAST_BOUNDARY)&&S===$r)h=0,F("onPartBegin"),d=x.HEADER_FIELD_START;else return;break}S!==f[h+2]&&(h=-2),S===f[h+2]&&h++;break;case x.HEADER_FIELD_START:d=x.HEADER_FIELD,B("onHeaderField"),h=0;case x.HEADER_FIELD:if(S===zr){q("onHeaderField"),d=x.HEADERS_ALMOST_DONE;break}if(h++,S===Ht)break;if(S===Tf){if(h===1)return;Q("onHeaderField",!0),d=x.HEADER_VALUE_START;break}if(L=Af(S),L<Ef||L>Pf)return;break;case x.HEADER_VALUE_START:if(S===vf)break;B("onHeaderValue"),d=x.HEADER_VALUE;case x.HEADER_VALUE:S===zr&&(Q("onHeaderValue",!0),F("onHeaderEnd"),d=x.HEADER_VALUE_ALMOST_DONE);break;case x.HEADER_VALUE_ALMOST_DONE:if(S!==$r)return;d=x.HEADER_FIELD_START;break;case x.HEADERS_ALMOST_DONE:if(S!==$r)return;F("onHeadersEnd"),d=x.PART_DATA_START;break;case x.PART_DATA_START:d=x.PART_DATA,B("onPartData");case x.PART_DATA:if(a=h,h===0){for(o+=g;o<w&&!(t[o]in m);)o+=_;o-=g,S=t[o]}if(h<f.length)f[h]===S?(h===0&&Q("onPartData",!0),h++):h=0;else if(h===f.length)h++,S===zr?y|=Ne.PART_BOUNDARY:S===Ht?y|=Ne.LAST_BOUNDARY:h=0;else if(h-1===f.length)if(y&Ne.PART_BOUNDARY){if(h=0,S===$r){y&=~Ne.PART_BOUNDARY,F("onPartEnd"),F("onPartBegin"),d=x.HEADER_FIELD_START;break}}else y&Ne.LAST_BOUNDARY&&S===Ht?(F("onPartEnd"),d=x.END,y=0):h=0;if(h>0)l[h-1]=S;else if(a>0){let C=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);F("onPartData",0,a,C),a=0,B("onPartData"),o--}break;case x.END:break;default:throw new Error(`Unexpected state entered: ${d}`)}Q("onHeaderField"),Q("onHeaderValue"),Q("onPartData"),this.index=h,this.state=d,this.flags=y}end(){if(this.state===x.HEADER_FIELD_START&&this.index===0||this.state===x.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==x.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var U=ae(Vn()),la=require("os");var aa=ae(require("node:http"),1),ua=ae(require("node:https"),1),rt=ae(require("node:zlib"),1),ie=ae(require("node:stream"),1),Gt=require("node:buffer");function mf(n){if(!/^data:/i.test(n))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');n=n.replace(/\r?\n/g,"");let t=n.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let o=n.substring(5,t).split(";"),i="",a=!1,l=o[0]||"text/plain",f=l;for(let y=1;y<o.length;y++)o[y]==="base64"?a=!0:o[y]&&(f+=`;${o[y]}`,o[y].indexOf("charset=")===0&&(i=o[y].substring(8)));!o[0]&&!i.length&&(f+=";charset=US-ASCII",i="US-ASCII");let m=a?"base64":"ascii",h=unescape(n.substring(t+1)),d=Buffer.from(h,m);return d.type=l,d.typeFull=f,d.charset=i,d}var Cs=mf;var ce=ae(require("node:stream"),1),Be=require("node:util"),ne=require("node:buffer");jt();Mr();var ke=class extends Error{constructor(t,o){super(t),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var X=class extends ke{constructor(t,o,i){super(t,o),i&&(this.code=this.errno=i.code,this.erroredSysCall=i.syscall)}};var jr=Symbol.toStringTag,no=n=>typeof n=="object"&&typeof n.append=="function"&&typeof n.delete=="function"&&typeof n.get=="function"&&typeof n.getAll=="function"&&typeof n.has=="function"&&typeof n.set=="function"&&typeof n.sort=="function"&&n[jr]==="URLSearchParams",zt=n=>n&&typeof n=="object"&&typeof n.arrayBuffer=="function"&&typeof n.type=="string"&&typeof n.stream=="function"&&typeof n.constructor=="function"&&/^(Blob|File)$/.test(n[jr]),xs=n=>typeof n=="object"&&(n[jr]==="AbortSignal"||n[jr]==="EventTarget"),Fs=(n,t)=>{let o=new URL(t).hostname,i=new URL(n).hostname;return o===i||o.endsWith(`.${i}`)},Us=(n,t)=>{let o=new URL(t).protocol,i=new URL(n).protocol;return o===i};var kf=(0,Be.promisify)(ce.default.pipeline),ee=Symbol("Body internals"),Re=class{constructor(t,{size:o=0}={}){let i=null;t===null?t=null:no(t)?t=ne.Buffer.from(t.toString()):zt(t)||ne.Buffer.isBuffer(t)||(Be.types.isAnyArrayBuffer(t)?t=ne.Buffer.from(t):ArrayBuffer.isView(t)?t=ne.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof ce.default||(t instanceof Xe?(t=Ws(t),i=t.type.split("=")[1]):t=ne.Buffer.from(String(t))));let a=t;ne.Buffer.isBuffer(t)?a=ce.default.Readable.from(t):zt(t)&&(a=ce.default.Readable.from(t.stream())),this[ee]={body:t,stream:a,boundary:i,disturbed:!1,error:null},this.size=o,t instanceof ce.default&&t.on("error",l=>{let f=l instanceof ke?l:new X(`Invalid response body while trying to fetch ${this.url}: ${l.message}`,"system",l);this[ee].error=f})}get body(){return this[ee].stream}get bodyUsed(){return this[ee].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:o,byteLength:i}=await so(this);return t.slice(o,o+i)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let i=new Xe,a=new URLSearchParams(await this.text());for(let[l,f]of a)i.append(l,f);return i}let{toFormData:o}=await Promise.resolve().then(()=>(Vs(),Hs));return o(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[ee].body&&this[ee].body.type||"",o=await this.arrayBuffer();return new Oe([o],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await so(this);return new TextDecoder().decode(t)}buffer(){return so(this)}};Re.prototype.buffer=(0,Be.deprecate)(Re.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Re.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Be.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function so(n){if(n[ee].disturbed)throw new TypeError(`body used already for: ${n.url}`);if(n[ee].disturbed=!0,n[ee].error)throw n[ee].error;let{body:t}=n;if(t===null)return ne.Buffer.alloc(0);if(!(t instanceof ce.default))return ne.Buffer.alloc(0);let o=[],i=0;try{for await(let a of t){if(n.size>0&&i+a.length>n.size){let l=new X(`content size at ${n.url} over limit: ${n.size}`,"max-size");throw t.destroy(l),l}i+=a.length,o.push(a)}}catch(a){throw a instanceof ke?a:new X(`Invalid response body while trying to fetch ${n.url}: ${a.message}`,"system",a)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return o.every(a=>typeof a=="string")?ne.Buffer.from(o.join("")):ne.Buffer.concat(o,i)}catch(a){throw new X(`Could not create Buffer from response body for ${n.url}: ${a.message}`,"system",a)}else throw new X(`Premature close of server response while trying to fetch ${n.url}`)}var wt=(n,t)=>{let o,i,{body:a}=n[ee];if(n.bodyUsed)throw new Error("cannot clone body after it is used");return a instanceof ce.default&&typeof a.getBoundary!="function"&&(o=new ce.PassThrough({highWaterMark:t}),i=new ce.PassThrough({highWaterMark:t}),a.pipe(o),a.pipe(i),n[ee].stream=o,a=i),a},Bf=(0,Be.deprecate)(n=>n.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Nr=(n,t)=>n===null?null:typeof n=="string"?"text/plain;charset=UTF-8":no(n)?"application/x-www-form-urlencoded;charset=UTF-8":zt(n)?n.type||null:ne.Buffer.isBuffer(n)||Be.types.isAnyArrayBuffer(n)||ArrayBuffer.isView(n)?null:n instanceof Xe?`multipart/form-data; boundary=${t[ee].boundary}`:n&&typeof n.getBoundary=="function"?`multipart/form-data;boundary=${Bf(n)}`:n instanceof ce.default?null:"text/plain;charset=UTF-8",Ys=n=>{let{body:t}=n[ee];return t===null?0:zt(t)?t.size:ne.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},Gs=async(n,{body:t})=>{t===null?n.end():await kf(t,n)};var ao=require("node:util"),Vt=ae(require("node:http"),1),Hr=typeof Vt.default.validateHeaderName=="function"?Vt.default.validateHeaderName:n=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(n)){let t=new TypeError(`Header name must be a valid HTTP token [${n}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},uo=typeof Vt.default.validateHeaderValue=="function"?Vt.default.validateHeaderValue:(n,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let o=new TypeError(`Invalid character in header content ["${n}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},oe=class n extends URLSearchParams{constructor(t){let o=[];if(t instanceof n){let i=t.raw();for(let[a,l]of Object.entries(i))o.push(...l.map(f=>[a,f]))}else if(t!=null)if(typeof t=="object"&&!ao.types.isBoxedPrimitive(t)){let i=t[Symbol.iterator];if(i==null)o.push(...Object.entries(t));else{if(typeof i!="function")throw new TypeError("Header pairs must be iterable");o=[...t].map(a=>{if(typeof a!="object"||ao.types.isBoxedPrimitive(a))throw new TypeError("Each header pair must be an iterable object");return[...a]}).map(a=>{if(a.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...a]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([i,a])=>(Hr(i),uo(i,String(a)),[String(i).toLowerCase(),String(a)])):void 0,super(o),new Proxy(this,{get(i,a,l){switch(a){case"append":case"set":return(f,m)=>(Hr(f),uo(f,String(m)),URLSearchParams.prototype[a].call(i,String(f).toLowerCase(),String(m)));case"delete":case"has":case"getAll":return f=>(Hr(f),URLSearchParams.prototype[a].call(i,String(f).toLowerCase()));case"keys":return()=>(i.sort(),new Set(URLSearchParams.prototype.keys.call(i)).keys());default:return Reflect.get(i,a,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let o=this.getAll(t);if(o.length===0)return null;let i=o.join(", ");return/^content-encoding$/i.test(t)&&(i=i.toLowerCase()),i}forEach(t,o=void 0){for(let i of this.keys())Reflect.apply(t,o,[this.get(i),i,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,o)=>(t[o]=this.getAll(o),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,o)=>{let i=this.getAll(o);return o==="host"?t[o]=i[0]:t[o]=i.length>1?i:i[0],t},{})}};Object.defineProperties(oe.prototype,["get","entries","forEach","values"].reduce((n,t)=>(n[t]={enumerable:!0},n),{}));function Qs(n=[]){return new oe(n.reduce((t,o,i,a)=>(i%2===0&&t.push(a.slice(i,i+2)),t),[]).filter(([t,o])=>{try{return Hr(t),uo(t,String(o)),!0}catch{return!1}}))}var qf=new Set([301,302,303,307,308]),Vr=n=>qf.has(n);var ge=Symbol("Response internals"),de=class n extends Re{constructor(t=null,o={}){super(t,o);let i=o.status!=null?o.status:200,a=new oe(o.headers);if(t!==null&&!a.has("Content-Type")){let l=Nr(t,this);l&&a.append("Content-Type",l)}this[ge]={type:"default",url:o.url,status:i,statusText:o.statusText||"",headers:a,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[ge].type}get url(){return this[ge].url||""}get status(){return this[ge].status}get ok(){return this[ge].status>=200&&this[ge].status<300}get redirected(){return this[ge].counter>0}get statusText(){return this[ge].statusText}get headers(){return this[ge].headers}get highWaterMark(){return this[ge].highWaterMark}clone(){return new n(wt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,o=302){if(!Vr(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new n(null,{headers:{location:new URL(t).toString()},status:o})}static error(){let t=new n(null,{status:0,statusText:""});return t[ge].type="error",t}static json(t=void 0,o={}){let i=JSON.stringify(t);if(i===void 0)throw new TypeError("data is not JSON serializable");let a=new oe(o&&o.headers);return a.has("content-type")||a.set("content-type","application/json"),new n(i,{...o,headers:a})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(de.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var oa=require("node:url"),ia=require("node:util");var Ks=n=>{if(n.search)return n.search;let t=n.href.length-1,o=n.hash||(n.href[t]==="#"?"#":"");return n.href[t-o.length]==="?"?"?":""};var Zs=require("node:net");function Js(n,t=!1){return n==null||(n=new URL(n),/^(about|blob|data):$/.test(n.protocol))?"no-referrer":(n.username="",n.password="",n.hash="",t&&(n.pathname="",n.search=""),n)}var Xs=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),ea="strict-origin-when-cross-origin";function ta(n){if(!Xs.has(n))throw new TypeError(`Invalid referrerPolicy: ${n}`);return n}function Df(n){if(/^(http|ws)s:$/.test(n.protocol))return!0;let t=n.host.replace(/(^\[)|(]$)/g,""),o=(0,Zs.isIP)(t);return o===4&&/^127\./.test(t)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:n.host==="localhost"||n.host.endsWith(".localhost")?!1:n.protocol==="file:"}function Rt(n){return/^about:(blank|srcdoc)$/.test(n)||n.protocol==="data:"||/^(blob|filesystem):$/.test(n.protocol)?!0:Df(n)}function ra(n,{referrerURLCallback:t,referrerOriginCallback:o}={}){if(n.referrer==="no-referrer"||n.referrerPolicy==="")return null;let i=n.referrerPolicy;if(n.referrer==="about:client")return"no-referrer";let a=n.referrer,l=Js(a),f=Js(a,!0);l.toString().length>4096&&(l=f),t&&(l=t(l)),o&&(f=o(f));let m=new URL(n.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return l;case"strict-origin":return Rt(l)&&!Rt(m)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return l.origin===m.origin?l:Rt(l)&&!Rt(m)?"no-referrer":f;case"same-origin":return l.origin===m.origin?l:"no-referrer";case"origin-when-cross-origin":return l.origin===m.origin?l:f;case"no-referrer-when-downgrade":return Rt(l)&&!Rt(m)?"no-referrer":l;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function na(n){let t=(n.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let i of t)i&&Xs.has(i)&&(o=i);return o}var N=Symbol("Request internals"),Yt=n=>typeof n=="object"&&typeof n[N]=="object",If=(0,ia.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),tt=class n extends Re{constructor(t,o={}){let i;if(Yt(t)?i=new URL(t.url):(i=new URL(t),t={}),i.username!==""||i.password!=="")throw new TypeError(`${i} is an url with embedded credentials.`);let a=o.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(a)&&(a=a.toUpperCase()),!Yt(o)&&"data"in o&&If(),(o.body!=null||Yt(t)&&t.body!==null)&&(a==="GET"||a==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=o.body?o.body:Yt(t)&&t.body!==null?wt(t):null;super(l,{size:o.size||t.size||0});let f=new oe(o.headers||t.headers||{});if(l!==null&&!f.has("Content-Type")){let d=Nr(l,this);d&&f.set("Content-Type",d)}let m=Yt(t)?t.signal:null;if("signal"in o&&(m=o.signal),m!=null&&!xs(m))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let h=o.referrer==null?t.referrer:o.referrer;if(h==="")h="no-referrer";else if(h){let d=new URL(h);h=/^about:(\/\/)?client$/.test(d)?"client":d}else h=void 0;this[N]={method:a,redirect:o.redirect||t.redirect||"follow",headers:f,parsedURL:i,signal:m,referrer:h},this.follow=o.follow===void 0?t.follow===void 0?20:t.follow:o.follow,this.compress=o.compress===void 0?t.compress===void 0?!0:t.compress:o.compress,this.counter=o.counter||t.counter||0,this.agent=o.agent||t.agent,this.highWaterMark=o.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||t.referrerPolicy||""}get method(){return this[N].method}get url(){return(0,oa.format)(this[N].parsedURL)}get headers(){return this[N].headers}get redirect(){return this[N].redirect}get signal(){return this[N].signal}get referrer(){if(this[N].referrer==="no-referrer")return"";if(this[N].referrer==="client")return"about:client";if(this[N].referrer)return this[N].referrer.toString()}get referrerPolicy(){return this[N].referrerPolicy}set referrerPolicy(t){this[N].referrerPolicy=ta(t)}clone(){return new n(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(tt.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var sa=n=>{let{parsedURL:t}=n[N],o=new oe(n[N].headers);o.has("Accept")||o.set("Accept","*/*");let i=null;if(n.body===null&&/^(post|put)$/i.test(n.method)&&(i="0"),n.body!==null){let m=Ys(n);typeof m=="number"&&!Number.isNaN(m)&&(i=String(m))}i&&o.set("Content-Length",i),n.referrerPolicy===""&&(n.referrerPolicy=ea),n.referrer&&n.referrer!=="no-referrer"?n[N].referrer=ra(n):n[N].referrer="no-referrer",n[N].referrer instanceof URL&&o.set("Referer",n.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),n.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip, deflate, br");let{agent:a}=n;typeof a=="function"&&(a=a(t));let l=Ks(t),f={path:t.pathname+l,method:n.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:n.insecureHTTPParser,agent:a};return{parsedURL:t,options:f}};var Yr=class extends ke{constructor(t,o="aborted"){super(t,o)}};Mr();oo();var Lf=new Set(["data:","http:","https:"]);async function Gr(n,t){return new Promise((o,i)=>{let a=new tt(n,t),{parsedURL:l,options:f}=sa(a);if(!Lf.has(l.protocol))throw new TypeError(`node-fetch cannot load ${n}. URL scheme "${l.protocol.replace(/:$/,"")}" is not supported.`);if(l.protocol==="data:"){let S=Cs(a.url),L=new de(S,{headers:{"Content-Type":S.typeFull}});o(L);return}let m=(l.protocol==="https:"?ua.default:aa.default).request,{signal:h}=a,d=null,y=()=>{let S=new Yr("The operation was aborted.");i(S),a.body&&a.body instanceof ie.default.Readable&&a.body.destroy(S),!(!d||!d.body)&&d.body.emit("error",S)};if(h&&h.aborted){y();return}let _=()=>{y(),w()},g=m(l.toString(),f);h&&h.addEventListener("abort",_);let w=()=>{g.abort(),h&&h.removeEventListener("abort",_)};g.on("error",S=>{i(new X(`request to ${a.url} failed, reason: ${S.message}`,"system",S)),w()}),Wf(g,S=>{d&&d.body&&d.body.destroy(S)}),process.version<"v14"&&g.on("socket",S=>{let L;S.prependListener("end",()=>{L=S._eventsCount}),S.prependListener("close",B=>{if(d&&L<S._eventsCount&&!B){let q=new Error("Premature close");q.code="ERR_STREAM_PREMATURE_CLOSE",d.body.emit("error",q)}})}),g.on("response",S=>{g.setTimeout(0);let L=Qs(S.rawHeaders);if(Vr(S.statusCode)){let C=L.get("Location"),M=null;try{M=C===null?null:new URL(C,a.url)}catch{if(a.redirect!=="manual"){i(new X(`uri requested responds with an invalid redirect URL: ${C}`,"invalid-redirect")),w();return}}switch(a.redirect){case"error":i(new X(`uri requested responds with a redirect, redirect mode is set to error: ${a.url}`,"no-redirect")),w();return;case"manual":break;case"follow":{if(M===null)break;if(a.counter>=a.follow){i(new X(`maximum redirect reached at: ${a.url}`,"max-redirect")),w();return}let D={headers:new oe(a.headers),follow:a.follow,counter:a.counter+1,agent:a.agent,compress:a.compress,method:a.method,body:wt(a),signal:a.signal,size:a.size,referrer:a.referrer,referrerPolicy:a.referrerPolicy};if(!Fs(a.url,M)||!Us(a.url,M))for(let te of["authorization","www-authenticate","cookie","cookie2"])D.headers.delete(te);if(S.statusCode!==303&&a.body&&t.body instanceof ie.default.Readable){i(new X("Cannot follow redirect with body being a readable stream","unsupported-redirect")),w();return}(S.statusCode===303||(S.statusCode===301||S.statusCode===302)&&a.method==="POST")&&(D.method="GET",D.body=void 0,D.headers.delete("content-length"));let qe=na(L);qe&&(D.referrerPolicy=qe),o(Gr(new tt(M,D))),w();return}default:return i(new TypeError(`Redirect option '${a.redirect}' is not a valid value of RequestRedirect`))}}h&&S.once("end",()=>{h.removeEventListener("abort",_)});let B=(0,ie.pipeline)(S,new ie.PassThrough,C=>{C&&i(C)});process.version<"v12.10"&&S.on("aborted",_);let q={url:a.url,status:S.statusCode,statusText:S.statusMessage,headers:L,size:a.size,counter:a.counter,highWaterMark:a.highWaterMark},F=L.get("Content-Encoding");if(!a.compress||a.method==="HEAD"||F===null||S.statusCode===204||S.statusCode===304){d=new de(B,q),o(d);return}let Q={flush:rt.default.Z_SYNC_FLUSH,finishFlush:rt.default.Z_SYNC_FLUSH};if(F==="gzip"||F==="x-gzip"){B=(0,ie.pipeline)(B,rt.default.createGunzip(Q),C=>{C&&i(C)}),d=new de(B,q),o(d);return}if(F==="deflate"||F==="x-deflate"){let C=(0,ie.pipeline)(S,new ie.PassThrough,M=>{M&&i(M)});C.once("data",M=>{(M[0]&15)===8?B=(0,ie.pipeline)(B,rt.default.createInflate(),D=>{D&&i(D)}):B=(0,ie.pipeline)(B,rt.default.createInflateRaw(),D=>{D&&i(D)}),d=new de(B,q),o(d)}),C.once("end",()=>{d||(d=new de(B,q),o(d))});return}if(F==="br"){B=(0,ie.pipeline)(B,rt.default.createBrotliDecompress(),C=>{C&&i(C)}),d=new de(B,q),o(d);return}d=new de(B,q),o(d)}),Gs(g,a).catch(i)})}function Wf(n,t){let o=Gt.Buffer.from(`0\r
\r
`),i=!1,a=!1,l;n.on("response",f=>{let{headers:m}=f;i=m["transfer-encoding"]==="chunked"&&!m["content-length"]}),n.on("socket",f=>{let m=()=>{if(i&&!a){let d=new Error("Premature close");d.code="ERR_STREAM_PREMATURE_CLOSE",t(d)}},h=d=>{a=Gt.Buffer.compare(d.slice(-5),o)===0,!a&&l&&(a=Gt.Buffer.compare(l.slice(-3),o.slice(0,3))===0&&Gt.Buffer.compare(d.slice(-2),o.slice(3))===0),l=d};f.prependListener("close",m),f.on("data",h),n.on("close",()=>{f.removeListener("close",m),f.removeListener("data",h)})})}var Qr={URL:"OCTOPUS_URL",ApiKey:"OCTOPUS_API_KEY",AccessToken:"OCTOPUS_ACCESS_TOKEN"},xf="urn:ietf:params:oauth:grant-type:token-exchange",Ff="urn:ietf:params:oauth:token-type:jwt";async function Uf(){let n={server:(0,U.getInput)("server"),serviceAccountId:(0,U.getInput)("service_account_id"),apiKey:(0,U.getInput)("api_key")},t=[];if(n.server||t.push("The Octopus instance URL is required, please specify using the 'server' input."),!n.serviceAccountId&&!n.apiKey&&t.push("A Service Account Id or API Key is required. Please specify using either the 'service_account_id' or 'api_key' inputs."),t.length>0)throw new Error(t.join(la.EOL));if(n.serviceAccountId){(0,U.info)(`Logging in with OpenID Connect to '${n.server}' using service account '${n.serviceAccountId}'`),(0,U.debug)(`Obtaining OIDC token from GitHub for service account '${n.serviceAccountId}'`);let o;try{o=await(0,U.getIDToken)(n.serviceAccountId)}catch(m){throw(0,U.error)("Please make sure to give write permissions to id-token in the workflow."),m}(0,U.debug)(`Exchanging GitHub OIDC token for access token at '${n.server}' for service account '${n.serviceAccountId}'`);let i=`${n.server}/token/v1`,a={grant_type:xf,audience:n.serviceAccountId,subject_token:o,subject_token_type:Ff},l=await Gr(i,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});if(!l.ok)throw new Error(JSON.stringify(await l.json()));let f=await l.json();(0,U.info)(`Configuring environment to use access token for Octopus Instance '${n.server}' on behalf of service account '${n.serviceAccountId}'`),(0,U.exportVariable)(Qr.URL,n.server),(0,U.exportVariable)(Qr.AccessToken,f.access_token)}else n.apiKey&&((0,U.info)(`Configuring environment to use API Key for '${n.server}'`),(0,U.exportVariable)(Qr.URL,n.server),(0,U.exportVariable)(Qr.ApiKey,n.apiKey));(0,U.info)("\u{1F419} Login successful, your GitHub actions environment has been configured to allow access to your Octopus Instance via the API without needing to supply credentials. Happy deployments!")}Uf().catch(n=>{(0,U.setFailed)(n),process.exit(1)});
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
