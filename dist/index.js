"use strict";var Fu=Object.create;var Ar=Object.defineProperty;var Uu=Object.getOwnPropertyDescriptor;var Mu=Object.getOwnPropertyNames;var ju=Object.getPrototypeOf,$u=Object.prototype.hasOwnProperty;var $=(n,t)=>()=>(n&&(t=n(n=0)),t);var Y=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),Ai=(n,t)=>{for(var o in t)Ar(n,o,{get:t[o],enumerable:!0})},Ci=(n,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Mu(t))!$u.call(n,a)&&a!==o&&Ar(n,a,{get:()=>t[a],enumerable:!(i=Uu(t,a))||i.enumerable});return n};var ne=(n,t,o)=>(o=n!=null?Fu(ju(n)):{},Ci(t||!n||!n.__esModule?Ar(o,"default",{value:n,enumerable:!0}):o,n)),zu=n=>Ci(Ar({},"__esModule",{value:!0}),n);var Cr=Y(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.toCommandProperties=mt.toCommandValue=void 0;function Nu(n){return n==null?"":typeof n=="string"||n instanceof String?n:JSON.stringify(n)}mt.toCommandValue=Nu;function Hu(n){return Object.keys(n).length?{title:n.title,file:n.file,line:n.startLine,endLine:n.endLine,col:n.startColumn,endColumn:n.endColumn}:{}}mt.toCommandProperties=Hu});var qi=Y(ue=>{"use strict";var Vu=ue&&ue.__createBinding||(Object.create?function(n,t,o,i){i===void 0&&(i=o),Object.defineProperty(n,i,{enumerable:!0,get:function(){return t[o]}})}:function(n,t,o,i){i===void 0&&(i=o),n[i]=t[o]}),Yu=ue&&ue.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),Gu=ue&&ue.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var o in n)o!=="default"&&Object.hasOwnProperty.call(n,o)&&Vu(t,n,o);return Yu(t,n),t};Object.defineProperty(ue,"__esModule",{value:!0});ue.issue=ue.issueCommand=void 0;var Qu=Gu(require("os")),ki=Cr();function Bi(n,t,o){let i=new Bn(n,t,o);process.stdout.write(i.toString()+Qu.EOL)}ue.issueCommand=Bi;function Ku(n,t=""){Bi(n,{},t)}ue.issue=Ku;var Oi="::",Bn=class{constructor(t,o,i){t||(t="missing.command"),this.command=t,this.properties=o,this.message=i}toString(){let t=Oi+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let o=!0;for(let i in this.properties)if(this.properties.hasOwnProperty(i)){let a=this.properties[i];a&&(o?o=!1:t+=",",t+=`${i}=${Zu(a)}`)}}return t+=`${Oi}${Ju(this.message)}`,t}};function Ju(n){return ki.toCommandValue(n).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Zu(n){return ki.toCommandValue(n).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});function Ft(){return Or>kr.length-16&&(Di.default.randomFillSync(kr),Or=0),kr.slice(Or,Or+=16)}var Di,kr,Or,qn=$(()=>{Di=ne(require("crypto")),kr=new Uint8Array(256),Or=kr.length});var Ii,xi=$(()=>{Ii=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Xu(n){return typeof n=="string"&&Ii.test(n)}var Me,Ut=$(()=>{xi();Me=Xu});function el(n,t=0){let o=(N[n[t+0]]+N[n[t+1]]+N[n[t+2]]+N[n[t+3]]+"-"+N[n[t+4]]+N[n[t+5]]+"-"+N[n[t+6]]+N[n[t+7]]+"-"+N[n[t+8]]+N[n[t+9]]+"-"+N[n[t+10]]+N[n[t+11]]+N[n[t+12]]+N[n[t+13]]+N[n[t+14]]+N[n[t+15]]).toLowerCase();if(!Me(o))throw TypeError("Stringified UUID is invalid");return o}var N,je,Mt=$(()=>{Ut();N=[];for(let n=0;n<256;++n)N.push((n+256).toString(16).substr(1));je=el});function tl(n,t,o){let i=t&&o||0,a=t||new Array(16);n=n||{};let l=n.node||Li,f=n.clockseq!==void 0?n.clockseq:Dn;if(l==null||f==null){let g=n.random||(n.rng||Ft)();l==null&&(l=Li=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),f==null&&(f=Dn=(g[6]<<8|g[7])&16383)}let m=n.msecs!==void 0?n.msecs:Date.now(),h=n.nsecs!==void 0?n.nsecs:xn+1,d=m-In+(h-xn)/1e4;if(d<0&&n.clockseq===void 0&&(f=f+1&16383),(d<0||m>In)&&n.nsecs===void 0&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");In=m,xn=h,Dn=f,m+=122192928e5;let y=((m&268435455)*1e4+h)%4294967296;a[i++]=y>>>24&255,a[i++]=y>>>16&255,a[i++]=y>>>8&255,a[i++]=y&255;let _=m/4294967296*1e4&268435455;a[i++]=_>>>8&255,a[i++]=_&255,a[i++]=_>>>24&15|16,a[i++]=_>>>16&255,a[i++]=f>>>8|128,a[i++]=f&255;for(let g=0;g<6;++g)a[i+g]=l[g];return t||je(a)}var Li,Dn,In,xn,Wi,Fi=$(()=>{qn();Mt();In=0,xn=0;Wi=tl});function rl(n){if(!Me(n))throw TypeError("Invalid UUID");let t,o=new Uint8Array(16);return o[0]=(t=parseInt(n.slice(0,8),16))>>>24,o[1]=t>>>16&255,o[2]=t>>>8&255,o[3]=t&255,o[4]=(t=parseInt(n.slice(9,13),16))>>>8,o[5]=t&255,o[6]=(t=parseInt(n.slice(14,18),16))>>>8,o[7]=t&255,o[8]=(t=parseInt(n.slice(19,23),16))>>>8,o[9]=t&255,o[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,o[11]=t/4294967296&255,o[12]=t>>>24&255,o[13]=t>>>16&255,o[14]=t>>>8&255,o[15]=t&255,o}var Br,Ln=$(()=>{Ut();Br=rl});function nl(n){n=unescape(encodeURIComponent(n));let t=[];for(let o=0;o<n.length;++o)t.push(n.charCodeAt(o));return t}function qr(n,t,o){function i(a,l,f,m){if(typeof a=="string"&&(a=nl(a)),typeof l=="string"&&(l=Br(l)),l.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let h=new Uint8Array(16+a.length);if(h.set(l),h.set(a,l.length),h=o(h),h[6]=h[6]&15|t,h[8]=h[8]&63|128,f){m=m||0;for(let d=0;d<16;++d)f[m+d]=h[d];return f}return je(h)}try{i.name=n}catch{}return i.DNS=ol,i.URL=il,i}var ol,il,Wn=$(()=>{Mt();Ln();ol="6ba7b810-9dad-11d1-80b4-00c04fd430c8",il="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function sl(n){return Array.isArray(n)?n=Buffer.from(n):typeof n=="string"&&(n=Buffer.from(n,"utf8")),Ui.default.createHash("md5").update(n).digest()}var Ui,Mi,ji=$(()=>{Ui=ne(require("crypto"));Mi=sl});var al,$i,zi=$(()=>{Wn();ji();al=qr("v3",48,Mi),$i=al});function ul(n,t,o){n=n||{};let i=n.random||(n.rng||Ft)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){o=o||0;for(let a=0;a<16;++a)t[o+a]=i[a];return t}return je(i)}var Ni,Hi=$(()=>{qn();Mt();Ni=ul});function ll(n){return Array.isArray(n)?n=Buffer.from(n):typeof n=="string"&&(n=Buffer.from(n,"utf8")),Vi.default.createHash("sha1").update(n).digest()}var Vi,Yi,Gi=$(()=>{Vi=ne(require("crypto"));Yi=ll});var fl,Qi,Ki=$(()=>{Wn();Gi();fl=qr("v5",80,Yi),Qi=fl});var Ji,Zi=$(()=>{Ji="00000000-0000-0000-0000-000000000000"});function cl(n){if(!Me(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}var Xi,es=$(()=>{Ut();Xi=cl});var ts={};Ai(ts,{NIL:()=>Ji,parse:()=>Br,stringify:()=>je,v1:()=>Wi,v3:()=>$i,v4:()=>Ni,v5:()=>Qi,validate:()=>Me,version:()=>Xi});var rs=$(()=>{Fi();zi();Hi();Ki();Zi();es();Ut();Mt();Ln()});var ss=Y(le=>{"use strict";var dl=le&&le.__createBinding||(Object.create?function(n,t,o,i){i===void 0&&(i=o),Object.defineProperty(n,i,{enumerable:!0,get:function(){return t[o]}})}:function(n,t,o,i){i===void 0&&(i=o),n[i]=t[o]}),hl=le&&le.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),os=le&&le.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var o in n)o!=="default"&&Object.hasOwnProperty.call(n,o)&&dl(t,n,o);return hl(t,n),t};Object.defineProperty(le,"__esModule",{value:!0});le.prepareKeyValueMessage=le.issueFileCommand=void 0;var ns=os(require("fs")),Fn=os(require("os")),pl=(rs(),zu(ts)),is=Cr();function ml(n,t){let o=process.env[`GITHUB_${n}`];if(!o)throw new Error(`Unable to find environment variable for file command ${n}`);if(!ns.existsSync(o))throw new Error(`Missing file at path: ${o}`);ns.appendFileSync(o,`${is.toCommandValue(t)}${Fn.EOL}`,{encoding:"utf8"})}le.issueFileCommand=ml;function bl(n,t){let o=`ghadelimiter_${pl.v4()}`,i=is.toCommandValue(t);if(n.includes(o))throw new Error(`Unexpected input: name should not contain the delimiter "${o}"`);if(i.includes(o))throw new Error(`Unexpected input: value should not contain the delimiter "${o}"`);return`${n}<<${o}${Fn.EOL}${i}${Fn.EOL}${o}`}le.prepareKeyValueMessage=bl});var us=Y(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.checkBypass=bt.getProxyUrl=void 0;function yl(n){let t=n.protocol==="https:";if(as(n))return;let o=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(o)try{return new URL(o)}catch{if(!o.startsWith("http://")&&!o.startsWith("https://"))return new URL(`http://${o}`)}else return}bt.getProxyUrl=yl;function as(n){if(!n.hostname)return!1;let t=n.hostname;if(gl(t))return!0;let o=process.env.no_proxy||process.env.NO_PROXY||"";if(!o)return!1;let i;n.port?i=Number(n.port):n.protocol==="http:"?i=80:n.protocol==="https:"&&(i=443);let a=[n.hostname.toUpperCase()];typeof i=="number"&&a.push(`${a[0]}:${i}`);for(let l of o.split(",").map(f=>f.trim().toUpperCase()).filter(f=>f))if(l==="*"||a.some(f=>f===l||f.endsWith(`.${l}`)||l.startsWith(".")&&f.endsWith(`${l}`)))return!0;return!1}bt.checkBypass=as;function gl(n){let t=n.toLowerCase();return t==="localhost"||t.startsWith("127.")||t.startsWith("[::1]")||t.startsWith("[0:0:0:0:0:0:0:1]")}});var ds=Y(yt=>{"use strict";var Bc=require("net"),_l=require("tls"),Un=require("http"),ls=require("https"),Sl=require("events"),qc=require("assert"),wl=require("util");yt.httpOverHttp=Rl;yt.httpsOverHttp=vl;yt.httpOverHttps=Tl;yt.httpsOverHttps=El;function Rl(n){var t=new Ce(n);return t.request=Un.request,t}function vl(n){var t=new Ce(n);return t.request=Un.request,t.createSocket=fs,t.defaultPort=443,t}function Tl(n){var t=new Ce(n);return t.request=ls.request,t}function El(n){var t=new Ce(n);return t.request=ls.request,t.createSocket=fs,t.defaultPort=443,t}function Ce(n){var t=this;t.options=n||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||Un.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(i,a,l,f){for(var m=cs(a,l,f),h=0,d=t.requests.length;h<d;++h){var y=t.requests[h];if(y.host===m.host&&y.port===m.port){t.requests.splice(h,1),y.request.onSocket(i);return}}i.destroy(),t.removeSocket(i)})}wl.inherits(Ce,Sl.EventEmitter);Ce.prototype.addRequest=function(t,o,i,a){var l=this,f=Mn({request:t},l.options,cs(o,i,a));if(l.sockets.length>=this.maxSockets){l.requests.push(f);return}l.createSocket(f,function(m){m.on("free",h),m.on("close",d),m.on("agentRemove",d),t.onSocket(m);function h(){l.emit("free",m,f)}function d(y){l.removeSocket(m),m.removeListener("free",h),m.removeListener("close",d),m.removeListener("agentRemove",d)}})};Ce.prototype.createSocket=function(t,o){var i=this,a={};i.sockets.push(a);var l=Mn({},i.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(l.localAddress=t.localAddress),l.proxyAuth&&(l.headers=l.headers||{},l.headers["Proxy-Authorization"]="Basic "+new Buffer(l.proxyAuth).toString("base64")),$e("making CONNECT request");var f=i.request(l);f.useChunkedEncodingByDefault=!1,f.once("response",m),f.once("upgrade",h),f.once("connect",d),f.once("error",y),f.end();function m(_){_.upgrade=!0}function h(_,g,S){process.nextTick(function(){d(_,g,S)})}function d(_,g,S){if(f.removeAllListeners(),g.removeAllListeners(),_.statusCode!==200){$e("tunneling socket could not be established, statusCode=%d",_.statusCode),g.destroy();var w=new Error("tunneling socket could not be established, statusCode="+_.statusCode);w.code="ECONNRESET",t.request.emit("error",w),i.removeSocket(a);return}if(S.length>0){$e("got illegal response body from proxy"),g.destroy();var w=new Error("got illegal response body from proxy");w.code="ECONNRESET",t.request.emit("error",w),i.removeSocket(a);return}return $e("tunneling connection has established"),i.sockets[i.sockets.indexOf(a)]=g,o(g)}function y(_){f.removeAllListeners(),$e(`tunneling socket could not be established, cause=%s
`,_.message,_.stack);var g=new Error("tunneling socket could not be established, cause="+_.message);g.code="ECONNRESET",t.request.emit("error",g),i.removeSocket(a)}};Ce.prototype.removeSocket=function(t){var o=this.sockets.indexOf(t);if(o!==-1){this.sockets.splice(o,1);var i=this.requests.shift();i&&this.createSocket(i,function(a){i.request.onSocket(a)})}};function fs(n,t){var o=this;Ce.prototype.createSocket.call(o,n,function(i){var a=n.request.getHeader("host"),l=Mn({},o.options,{socket:i,servername:a?a.replace(/:.*$/,""):n.host}),f=_l.connect(0,l);o.sockets[o.sockets.indexOf(i)]=f,t(f)})}function cs(n,t,o){return typeof n=="string"?{host:n,port:t,localAddress:o}:n}function Mn(n){for(var t=1,o=arguments.length;t<o;++t){var i=arguments[t];if(typeof i=="object")for(var a=Object.keys(i),l=0,f=a.length;l<f;++l){var m=a[l];i[m]!==void 0&&(n[m]=i[m])}}return n}var $e;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?$e=function(){var n=Array.prototype.slice.call(arguments);typeof n[0]=="string"?n[0]="TUNNEL: "+n[0]:n.unshift("TUNNEL:"),console.error.apply(console,n)}:$e=function(){};yt.debug=$e});var ps=Y((Ic,hs)=>{hs.exports=ds()});var bs=Y(I=>{"use strict";var Pl=I&&I.__createBinding||(Object.create?function(n,t,o,i){i===void 0&&(i=o),Object.defineProperty(n,i,{enumerable:!0,get:function(){return t[o]}})}:function(n,t,o,i){i===void 0&&(i=o),n[i]=t[o]}),Al=I&&I.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),Fr=I&&I.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var o in n)o!=="default"&&Object.hasOwnProperty.call(n,o)&&Pl(t,n,o);return Al(t,n),t},M=I&&I.__awaiter||function(n,t,o,i){function a(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(_){f(_)}}function h(y){try{d(i.throw(y))}catch(_){f(_)}}function d(y){y.done?l(y.value):a(y.value).then(m,h)}d((i=i.apply(n,t||[])).next())})};Object.defineProperty(I,"__esModule",{value:!0});I.HttpClient=I.isHttps=I.HttpClientResponse=I.HttpClientError=I.getProxyUrl=I.MediaTypes=I.Headers=I.HttpCodes=void 0;var Dr=Fr(require("http")),jn=Fr(require("https")),ms=Fr(us()),Ir=Fr(ps()),ye;(function(n){n[n.OK=200]="OK",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.ResourceMoved=302]="ResourceMoved",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.SwitchProxy=306]="SwitchProxy",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.TooManyRequests=429]="TooManyRequests",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout"})(ye=I.HttpCodes||(I.HttpCodes={}));var G;(function(n){n.Accept="accept",n.ContentType="content-type"})(G=I.Headers||(I.Headers={}));var ze;(function(n){n.ApplicationJson="application/json"})(ze=I.MediaTypes||(I.MediaTypes={}));function Cl(n){let t=ms.getProxyUrl(new URL(n));return t?t.href:""}I.getProxyUrl=Cl;var Ol=[ye.MovedPermanently,ye.ResourceMoved,ye.SeeOther,ye.TemporaryRedirect,ye.PermanentRedirect],kl=[ye.BadGateway,ye.ServiceUnavailable,ye.GatewayTimeout],Bl=["OPTIONS","GET","DELETE","HEAD"],ql=10,Dl=5,Lr=class n extends Error{constructor(t,o){super(t),this.name="HttpClientError",this.statusCode=o,Object.setPrototypeOf(this,n.prototype)}};I.HttpClientError=Lr;var Wr=class{constructor(t){this.message=t}readBody(){return M(this,void 0,void 0,function*(){return new Promise(t=>M(this,void 0,void 0,function*(){let o=Buffer.alloc(0);this.message.on("data",i=>{o=Buffer.concat([o,i])}),this.message.on("end",()=>{t(o.toString())})}))})}readBodyBuffer(){return M(this,void 0,void 0,function*(){return new Promise(t=>M(this,void 0,void 0,function*(){let o=[];this.message.on("data",i=>{o.push(i)}),this.message.on("end",()=>{t(Buffer.concat(o))})}))})}};I.HttpClientResponse=Wr;function Il(n){return new URL(n).protocol==="https:"}I.isHttps=Il;var $n=class{constructor(t,o,i){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=o||[],this.requestOptions=i,i&&(i.ignoreSslError!=null&&(this._ignoreSslError=i.ignoreSslError),this._socketTimeout=i.socketTimeout,i.allowRedirects!=null&&(this._allowRedirects=i.allowRedirects),i.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=i.allowRedirectDowngrade),i.maxRedirects!=null&&(this._maxRedirects=Math.max(i.maxRedirects,0)),i.keepAlive!=null&&(this._keepAlive=i.keepAlive),i.allowRetries!=null&&(this._allowRetries=i.allowRetries),i.maxRetries!=null&&(this._maxRetries=i.maxRetries))}options(t,o){return M(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,o||{})})}get(t,o){return M(this,void 0,void 0,function*(){return this.request("GET",t,null,o||{})})}del(t,o){return M(this,void 0,void 0,function*(){return this.request("DELETE",t,null,o||{})})}post(t,o,i){return M(this,void 0,void 0,function*(){return this.request("POST",t,o,i||{})})}patch(t,o,i){return M(this,void 0,void 0,function*(){return this.request("PATCH",t,o,i||{})})}put(t,o,i){return M(this,void 0,void 0,function*(){return this.request("PUT",t,o,i||{})})}head(t,o){return M(this,void 0,void 0,function*(){return this.request("HEAD",t,null,o||{})})}sendStream(t,o,i,a){return M(this,void 0,void 0,function*(){return this.request(t,o,i,a)})}getJson(t,o={}){return M(this,void 0,void 0,function*(){o[G.Accept]=this._getExistingOrDefaultHeader(o,G.Accept,ze.ApplicationJson);let i=yield this.get(t,o);return this._processResponse(i,this.requestOptions)})}postJson(t,o,i={}){return M(this,void 0,void 0,function*(){let a=JSON.stringify(o,null,2);i[G.Accept]=this._getExistingOrDefaultHeader(i,G.Accept,ze.ApplicationJson),i[G.ContentType]=this._getExistingOrDefaultHeader(i,G.ContentType,ze.ApplicationJson);let l=yield this.post(t,a,i);return this._processResponse(l,this.requestOptions)})}putJson(t,o,i={}){return M(this,void 0,void 0,function*(){let a=JSON.stringify(o,null,2);i[G.Accept]=this._getExistingOrDefaultHeader(i,G.Accept,ze.ApplicationJson),i[G.ContentType]=this._getExistingOrDefaultHeader(i,G.ContentType,ze.ApplicationJson);let l=yield this.put(t,a,i);return this._processResponse(l,this.requestOptions)})}patchJson(t,o,i={}){return M(this,void 0,void 0,function*(){let a=JSON.stringify(o,null,2);i[G.Accept]=this._getExistingOrDefaultHeader(i,G.Accept,ze.ApplicationJson),i[G.ContentType]=this._getExistingOrDefaultHeader(i,G.ContentType,ze.ApplicationJson);let l=yield this.patch(t,a,i);return this._processResponse(l,this.requestOptions)})}request(t,o,i,a){return M(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let l=new URL(o),f=this._prepareRequest(t,l,a),m=this._allowRetries&&Bl.includes(t)?this._maxRetries+1:1,h=0,d;do{if(d=yield this.requestRaw(f,i),d&&d.message&&d.message.statusCode===ye.Unauthorized){let _;for(let g of this.handlers)if(g.canHandleAuthentication(d)){_=g;break}return _?_.handleAuthentication(this,f,i):d}let y=this._maxRedirects;for(;d.message.statusCode&&Ol.includes(d.message.statusCode)&&this._allowRedirects&&y>0;){let _=d.message.headers.location;if(!_)break;let g=new URL(_);if(l.protocol==="https:"&&l.protocol!==g.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield d.readBody(),g.hostname!==l.hostname)for(let S in a)S.toLowerCase()==="authorization"&&delete a[S];f=this._prepareRequest(t,g,a),d=yield this.requestRaw(f,i),y--}if(!d.message.statusCode||!kl.includes(d.message.statusCode))return d;h+=1,h<m&&(yield d.readBody(),yield this._performExponentialBackoff(h))}while(h<m);return d})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,o){return M(this,void 0,void 0,function*(){return new Promise((i,a)=>{function l(f,m){f?a(f):m?i(m):a(new Error("Unknown error"))}this.requestRawWithCallback(t,o,l)})})}requestRawWithCallback(t,o,i){typeof o=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(o,"utf8"));let a=!1;function l(h,d){a||(a=!0,i(h,d))}let f=t.httpModule.request(t.options,h=>{let d=new Wr(h);l(void 0,d)}),m;f.on("socket",h=>{m=h}),f.setTimeout(this._socketTimeout||3*6e4,()=>{m&&m.end(),l(new Error(`Request timeout: ${t.options.path}`))}),f.on("error",function(h){l(h)}),o&&typeof o=="string"&&f.write(o,"utf8"),o&&typeof o!="string"?(o.on("close",function(){f.end()}),o.pipe(f)):f.end()}getAgent(t){let o=new URL(t);return this._getAgent(o)}_prepareRequest(t,o,i){let a={};a.parsedUrl=o;let l=a.parsedUrl.protocol==="https:";a.httpModule=l?jn:Dr;let f=l?443:80;if(a.options={},a.options.host=a.parsedUrl.hostname,a.options.port=a.parsedUrl.port?parseInt(a.parsedUrl.port):f,a.options.path=(a.parsedUrl.pathname||"")+(a.parsedUrl.search||""),a.options.method=t,a.options.headers=this._mergeHeaders(i),this.userAgent!=null&&(a.options.headers["user-agent"]=this.userAgent),a.options.agent=this._getAgent(a.parsedUrl),this.handlers)for(let m of this.handlers)m.prepareRequest(a.options);return a}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},xr(this.requestOptions.headers),xr(t||{})):xr(t||{})}_getExistingOrDefaultHeader(t,o,i){let a;return this.requestOptions&&this.requestOptions.headers&&(a=xr(this.requestOptions.headers)[o]),t[o]||a||i}_getAgent(t){let o,i=ms.getProxyUrl(t),a=i&&i.hostname;if(this._keepAlive&&a&&(o=this._proxyAgent),this._keepAlive&&!a&&(o=this._agent),o)return o;let l=t.protocol==="https:",f=100;if(this.requestOptions&&(f=this.requestOptions.maxSockets||Dr.globalAgent.maxSockets),i&&i.hostname){let m={maxSockets:f,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(i.username||i.password)&&{proxyAuth:`${i.username}:${i.password}`}),{host:i.hostname,port:i.port})},h,d=i.protocol==="https:";l?h=d?Ir.httpsOverHttps:Ir.httpsOverHttp:h=d?Ir.httpOverHttps:Ir.httpOverHttp,o=h(m),this._proxyAgent=o}if(this._keepAlive&&!o){let m={keepAlive:this._keepAlive,maxSockets:f};o=l?new jn.Agent(m):new Dr.Agent(m),this._agent=o}return o||(o=l?jn.globalAgent:Dr.globalAgent),l&&this._ignoreSslError&&(o.options=Object.assign(o.options||{},{rejectUnauthorized:!1})),o}_performExponentialBackoff(t){return M(this,void 0,void 0,function*(){t=Math.min(ql,t);let o=Dl*Math.pow(2,t);return new Promise(i=>setTimeout(()=>i(),o))})}_processResponse(t,o){return M(this,void 0,void 0,function*(){return new Promise((i,a)=>M(this,void 0,void 0,function*(){let l=t.message.statusCode||0,f={statusCode:l,result:null,headers:{}};l===ye.NotFound&&i(f);function m(y,_){if(typeof _=="string"){let g=new Date(_);if(!isNaN(g.valueOf()))return g}return _}let h,d;try{d=yield t.readBody(),d&&d.length>0&&(o&&o.deserializeDates?h=JSON.parse(d,m):h=JSON.parse(d),f.result=h),f.headers=t.message.headers}catch{}if(l>299){let y;h&&h.message?y=h.message:d&&d.length>0?y=d:y=`Failed request: (${l})`;let _=new Lr(y,l);_.result=f.result,a(_)}else i(f)}))})}};I.HttpClient=$n;var xr=n=>Object.keys(n).reduce((t,o)=>(t[o.toLowerCase()]=n[o],t),{})});var ys=Y(Se=>{"use strict";var Vn=Se&&Se.__awaiter||function(n,t,o,i){function a(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(_){f(_)}}function h(y){try{d(i.throw(y))}catch(_){f(_)}}function d(y){y.done?l(y.value):a(y.value).then(m,h)}d((i=i.apply(n,t||[])).next())})};Object.defineProperty(Se,"__esModule",{value:!0});Se.PersonalAccessTokenCredentialHandler=Se.BearerCredentialHandler=Se.BasicCredentialHandler=void 0;var zn=class{constructor(t,o){this.username=t,this.password=o}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Vn(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Se.BasicCredentialHandler=zn;var Nn=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return Vn(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Se.BearerCredentialHandler=Nn;var Hn=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Vn(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Se.PersonalAccessTokenCredentialHandler=Hn});var Ss=Y(gt=>{"use strict";var gs=gt&&gt.__awaiter||function(n,t,o,i){function a(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(_){f(_)}}function h(y){try{d(i.throw(y))}catch(_){f(_)}}function d(y){y.done?l(y.value):a(y.value).then(m,h)}d((i=i.apply(n,t||[])).next())})};Object.defineProperty(gt,"__esModule",{value:!0});gt.OidcClient=void 0;var xl=bs(),Ll=ys(),_s=Ur(),Yn=class n{static createHttpClient(t=!0,o=10){let i={allowRetries:t,maxRetries:o};return new xl.HttpClient("actions/oidc-client",[new Ll.BearerCredentialHandler(n.getRequestToken())],i)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var o;return gs(this,void 0,void 0,function*(){let l=(o=(yield n.createHttpClient().getJson(t).catch(f=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${f.statusCode}
 
        Error Message: ${f.result.message}`)})).result)===null||o===void 0?void 0:o.value;if(!l)throw new Error("Response json body do not have ID Token field");return l})}static getIDToken(t){return gs(this,void 0,void 0,function*(){try{let o=n.getIDTokenUrl();if(t){let a=encodeURIComponent(t);o=`${o}&audience=${a}`}_s.debug(`ID token url is ${o}`);let i=yield n.getCall(o);return _s.setSecret(i),i}catch(o){throw new Error(`Error message: ${o.message}`)}})}};gt.OidcClient=Yn});var Jn=Y(J=>{"use strict";var Gn=J&&J.__awaiter||function(n,t,o,i){function a(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(_){f(_)}}function h(y){try{d(i.throw(y))}catch(_){f(_)}}function d(y){y.done?l(y.value):a(y.value).then(m,h)}d((i=i.apply(n,t||[])).next())})};Object.defineProperty(J,"__esModule",{value:!0});J.summary=J.markdownSummary=J.SUMMARY_DOCS_URL=J.SUMMARY_ENV_VAR=void 0;var Wl=require("os"),Qn=require("fs"),{access:Fl,appendFile:Ul,writeFile:Ml}=Qn.promises;J.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";J.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var Kn=class{constructor(){this._buffer=""}filePath(){return Gn(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[J.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${J.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield Fl(t,Qn.constants.R_OK|Qn.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,o,i={}){let a=Object.entries(i).map(([l,f])=>` ${l}="${f}"`).join("");return o?`<${t}${a}>${o}</${t}>`:`<${t}${a}>`}write(t){return Gn(this,void 0,void 0,function*(){let o=!!(t!=null&&t.overwrite),i=yield this.filePath();return yield(o?Ml:Ul)(i,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return Gn(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,o=!1){return this._buffer+=t,o?this.addEOL():this}addEOL(){return this.addRaw(Wl.EOL)}addCodeBlock(t,o){let i=Object.assign({},o&&{lang:o}),a=this.wrap("pre",this.wrap("code",t),i);return this.addRaw(a).addEOL()}addList(t,o=!1){let i=o?"ol":"ul",a=t.map(f=>this.wrap("li",f)).join(""),l=this.wrap(i,a);return this.addRaw(l).addEOL()}addTable(t){let o=t.map(a=>{let l=a.map(f=>{if(typeof f=="string")return this.wrap("td",f);let{header:m,data:h,colspan:d,rowspan:y}=f,_=m?"th":"td",g=Object.assign(Object.assign({},d&&{colspan:d}),y&&{rowspan:y});return this.wrap(_,h,g)}).join("");return this.wrap("tr",l)}).join(""),i=this.wrap("table",o);return this.addRaw(i).addEOL()}addDetails(t,o){let i=this.wrap("details",this.wrap("summary",t)+o);return this.addRaw(i).addEOL()}addImage(t,o,i){let{width:a,height:l}=i||{},f=Object.assign(Object.assign({},a&&{width:a}),l&&{height:l}),m=this.wrap("img",null,Object.assign({src:t,alt:o},f));return this.addRaw(m).addEOL()}addHeading(t,o){let i=`h${o}`,a=["h1","h2","h3","h4","h5","h6"].includes(i)?i:"h1",l=this.wrap(a,t);return this.addRaw(l).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,o){let i=Object.assign({},o&&{cite:o}),a=this.wrap("blockquote",t,i);return this.addRaw(a).addEOL()}addLink(t,o){let i=this.wrap("a",t,{href:o});return this.addRaw(i).addEOL()}},ws=new Kn;J.markdownSummary=ws;J.summary=ws});var Rs=Y(Z=>{"use strict";var jl=Z&&Z.__createBinding||(Object.create?function(n,t,o,i){i===void 0&&(i=o),Object.defineProperty(n,i,{enumerable:!0,get:function(){return t[o]}})}:function(n,t,o,i){i===void 0&&(i=o),n[i]=t[o]}),$l=Z&&Z.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),zl=Z&&Z.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var o in n)o!=="default"&&Object.hasOwnProperty.call(n,o)&&jl(t,n,o);return $l(t,n),t};Object.defineProperty(Z,"__esModule",{value:!0});Z.toPlatformPath=Z.toWin32Path=Z.toPosixPath=void 0;var Nl=zl(require("path"));function Hl(n){return n.replace(/[\\]/g,"/")}Z.toPosixPath=Hl;function Vl(n){return n.replace(/[/]/g,"\\")}Z.toWin32Path=Vl;function Yl(n){return n.replace(/[/\\]/g,Nl.sep)}Z.toPlatformPath=Yl});var Ur=Y(v=>{"use strict";var Gl=v&&v.__createBinding||(Object.create?function(n,t,o,i){i===void 0&&(i=o),Object.defineProperty(n,i,{enumerable:!0,get:function(){return t[o]}})}:function(n,t,o,i){i===void 0&&(i=o),n[i]=t[o]}),Ql=v&&v.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),vs=v&&v.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var o in n)o!=="default"&&Object.hasOwnProperty.call(n,o)&&Gl(t,n,o);return Ql(t,n),t},Ts=v&&v.__awaiter||function(n,t,o,i){function a(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(_){f(_)}}function h(y){try{d(i.throw(y))}catch(_){f(_)}}function d(y){y.done?l(y.value):a(y.value).then(m,h)}d((i=i.apply(n,t||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.getIDToken=v.getState=v.saveState=v.group=v.endGroup=v.startGroup=v.info=v.notice=v.warning=v.error=v.debug=v.isDebug=v.setFailed=v.setCommandEcho=v.setOutput=v.getBooleanInput=v.getMultilineInput=v.getInput=v.addPath=v.setSecret=v.exportVariable=v.ExitCode=void 0;var fe=qi(),Je=ss(),_t=Cr(),Es=vs(require("os")),Kl=vs(require("path")),Jl=Ss(),Ps;(function(n){n[n.Success=0]="Success",n[n.Failure=1]="Failure"})(Ps=v.ExitCode||(v.ExitCode={}));function Zl(n,t){let o=_t.toCommandValue(t);if(process.env[n]=o,process.env.GITHUB_ENV||"")return Je.issueFileCommand("ENV",Je.prepareKeyValueMessage(n,t));fe.issueCommand("set-env",{name:n},o)}v.exportVariable=Zl;function Xl(n){fe.issueCommand("add-mask",{},n)}v.setSecret=Xl;function ef(n){process.env.GITHUB_PATH||""?Je.issueFileCommand("PATH",n):fe.issueCommand("add-path",{},n),process.env.PATH=`${n}${Kl.delimiter}${process.env.PATH}`}v.addPath=ef;function Zn(n,t){let o=process.env[`INPUT_${n.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!o)throw new Error(`Input required and not supplied: ${n}`);return t&&t.trimWhitespace===!1?o:o.trim()}v.getInput=Zn;function tf(n,t){let o=Zn(n,t).split(`
`).filter(i=>i!=="");return t&&t.trimWhitespace===!1?o:o.map(i=>i.trim())}v.getMultilineInput=tf;function rf(n,t){let o=["true","True","TRUE"],i=["false","False","FALSE"],a=Zn(n,t);if(o.includes(a))return!0;if(i.includes(a))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${n}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}v.getBooleanInput=rf;function nf(n,t){if(process.env.GITHUB_OUTPUT||"")return Je.issueFileCommand("OUTPUT",Je.prepareKeyValueMessage(n,t));process.stdout.write(Es.EOL),fe.issueCommand("set-output",{name:n},_t.toCommandValue(t))}v.setOutput=nf;function of(n){fe.issue("echo",n?"on":"off")}v.setCommandEcho=of;function sf(n){process.exitCode=Ps.Failure,As(n)}v.setFailed=sf;function af(){return process.env.RUNNER_DEBUG==="1"}v.isDebug=af;function uf(n){fe.issueCommand("debug",{},n)}v.debug=uf;function As(n,t={}){fe.issueCommand("error",_t.toCommandProperties(t),n instanceof Error?n.toString():n)}v.error=As;function lf(n,t={}){fe.issueCommand("warning",_t.toCommandProperties(t),n instanceof Error?n.toString():n)}v.warning=lf;function ff(n,t={}){fe.issueCommand("notice",_t.toCommandProperties(t),n instanceof Error?n.toString():n)}v.notice=ff;function cf(n){process.stdout.write(n+Es.EOL)}v.info=cf;function Cs(n){fe.issue("group",n)}v.startGroup=Cs;function Os(){fe.issue("endgroup")}v.endGroup=Os;function df(n,t){return Ts(this,void 0,void 0,function*(){Cs(n);let o;try{o=yield t()}finally{Os()}return o})}v.group=df;function hf(n,t){if(process.env.GITHUB_STATE||"")return Je.issueFileCommand("STATE",Je.prepareKeyValueMessage(n,t));fe.issueCommand("save-state",{name:n},_t.toCommandValue(t))}v.saveState=hf;function pf(n){return process.env[`STATE_${n}`]||""}v.getState=pf;function mf(n){return Ts(this,void 0,void 0,function*(){return yield Jl.OidcClient.getIDToken(n)})}v.getIDToken=mf;var bf=Jn();Object.defineProperty(v,"summary",{enumerable:!0,get:function(){return bf.summary}});var yf=Jn();Object.defineProperty(v,"markdownSummary",{enumerable:!0,get:function(){return yf.markdownSummary}});var Xn=Rs();Object.defineProperty(v,"toPosixPath",{enumerable:!0,get:function(){return Xn.toPosixPath}});Object.defineProperty(v,"toWin32Path",{enumerable:!0,get:function(){return Xn.toWin32Path}});Object.defineProperty(v,"toPlatformPath",{enumerable:!0,get:function(){return Xn.toPlatformPath}})});var qs=Y((jr,Bs)=>{(function(n,t){typeof jr=="object"&&typeof Bs<"u"?t(jr):typeof define=="function"&&define.amd?define(["exports"],t):(n=typeof globalThis<"u"?globalThis:n||self,t(n.WebStreamsPolyfill={}))})(jr,function(n){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function i(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let a=i();function l(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=o,m=Promise,h=Promise.prototype.then,d=Promise.resolve.bind(m),y=Promise.reject.bind(m);function _(e){return new m(e)}function g(e){return d(e)}function S(e){return y(e)}function w(e,r,s){return h.call(e,r,s)}function x(e,r,s){w(w(e,r,s),void 0,f)}function B(e,r){x(e,r)}function q(e,r){x(e,void 0,r)}function F(e,r,s){return w(e,r,s)}function Q(e){w(e,void 0,f)}let C=(()=>{let e=a&&a.queueMicrotask;if(typeof e=="function")return e;let r=g(void 0);return s=>w(r,s)})();function U(e,r,s){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,r,s)}function D(e,r,s){try{return g(U(e,r,s))}catch(u){return S(u)}}let qe=16384;class te{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(r){let s=this._back,u=s;s._elements.length===qe-1&&(u={_elements:[],_next:void 0}),s._elements.push(r),u!==s&&(this._back=u,s._next=u),++this._size}shift(){let r=this._front,s=r,u=this._cursor,c=u+1,p=r._elements,b=p[u];return c===qe&&(s=r._next,c=0),--this._size,this._cursor=c,r!==s&&(this._front=s),p[u]=void 0,b}forEach(r){let s=this._cursor,u=this._front,c=u._elements;for(;(s!==c.length||u._next!==void 0)&&!(s===c.length&&(u=u._next,c=u._elements,s=0,c.length===0));)r(c[s]),++s}peek(){let r=this._front,s=this._cursor;return r._elements[s]}}function co(e,r){e._ownerReadableStream=r,r._reader=e,r._state==="readable"?Xr(e):r._state==="closed"?ha(e):ho(e,r._storedError)}function Zr(e,r){let s=e._ownerReadableStream;return me(s,r)}function ve(e){e._ownerReadableStream._state==="readable"?en(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):pa(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function nt(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Xr(e){e._closedPromise=_((r,s)=>{e._closedPromise_resolve=r,e._closedPromise_reject=s})}function ho(e,r){Xr(e),en(e,r)}function ha(e){Xr(e),po(e)}function en(e,r){e._closedPromise_reject!==void 0&&(Q(e._closedPromise),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function pa(e,r){ho(e,r)}function po(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let mo=t("[[AbortSteps]]"),bo=t("[[ErrorSteps]]"),tn=t("[[CancelSteps]]"),rn=t("[[PullSteps]]"),yo=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},ma=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function ba(e){return typeof e=="object"||typeof e=="function"}function Te(e,r){if(e!==void 0&&!ba(e))throw new TypeError(`${r} is not an object.`)}function he(e,r){if(typeof e!="function")throw new TypeError(`${r} is not a function.`)}function ya(e){return typeof e=="object"&&e!==null||typeof e=="function"}function go(e,r){if(!ya(e))throw new TypeError(`${r} is not an object.`)}function Ee(e,r,s){if(e===void 0)throw new TypeError(`Parameter ${r} is required in '${s}'.`)}function nn(e,r,s){if(e===void 0)throw new TypeError(`${r} is required in '${s}'.`)}function on(e){return Number(e)}function _o(e){return e===0?0:e}function ga(e){return _o(ma(e))}function So(e,r){let u=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=_o(c),!yo(c))throw new TypeError(`${r} is not a finite number`);if(c=ga(c),c<0||c>u)throw new TypeError(`${r} is outside the accepted range of 0 to ${u}, inclusive`);return!yo(c)||c===0?0:c}function sn(e,r){if(!We(e))throw new TypeError(`${r} is not a ReadableStream.`)}function ot(e){return new vt(e)}function wo(e,r){e._reader._readRequests.push(r)}function an(e,r,s){let c=e._reader._readRequests.shift();s?c._closeSteps():c._chunkSteps(r)}function Qt(e){return e._reader._readRequests.length}function Ro(e){let r=e._reader;return!(r===void 0||!De(r))}class vt{constructor(r){if(Ee(r,1,"ReadableStreamDefaultReader"),sn(r,"First parameter"),Fe(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");co(this,r),this._readRequests=new te}get closed(){return De(this)?this._closedPromise:S(Kt("closed"))}cancel(r=void 0){return De(this)?this._ownerReadableStream===void 0?S(nt("cancel")):Zr(this,r):S(Kt("cancel"))}read(){if(!De(this))return S(Kt("read"));if(this._ownerReadableStream===void 0)return S(nt("read from"));let r,s,u=_((p,b)=>{r=p,s=b});return Tt(this,{_chunkSteps:p=>r({value:p,done:!1}),_closeSteps:()=>r({value:void 0,done:!0}),_errorSteps:p=>s(p)}),u}releaseLock(){if(!De(this))throw Kt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ve(this)}}}Object.defineProperties(vt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(vt.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function De(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof vt}function Tt(e,r){let s=e._ownerReadableStream;s._disturbed=!0,s._state==="closed"?r._closeSteps():s._state==="errored"?r._errorSteps(s._storedError):s._readableStreamController[rn](r)}function Kt(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let vo=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class To{constructor(r,s){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=r,this._preventCancel=s}next(){let r=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?F(this._ongoingPromise,r,r):r(),this._ongoingPromise}return(r){let s=()=>this._returnSteps(r);return this._ongoingPromise?F(this._ongoingPromise,s,s):s()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let r=this._reader;if(r._ownerReadableStream===void 0)return S(nt("iterate"));let s,u,c=_((b,R)=>{s=b,u=R});return Tt(r,{_chunkSteps:b=>{this._ongoingPromise=void 0,C(()=>s({value:b,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,ve(r),s({value:void 0,done:!0})},_errorSteps:b=>{this._ongoingPromise=void 0,this._isFinished=!0,ve(r),u(b)}}),c}_returnSteps(r){if(this._isFinished)return Promise.resolve({value:r,done:!0});this._isFinished=!0;let s=this._reader;if(s._ownerReadableStream===void 0)return S(nt("finish iterating"));if(!this._preventCancel){let u=Zr(s,r);return ve(s),F(u,()=>({value:r,done:!0}))}return ve(s),g({value:r,done:!0})}}let Eo={next(){return Po(this)?this._asyncIteratorImpl.next():S(Ao("next"))},return(e){return Po(this)?this._asyncIteratorImpl.return(e):S(Ao("return"))}};vo!==void 0&&Object.setPrototypeOf(Eo,vo);function _a(e,r){let s=ot(e),u=new To(s,r),c=Object.create(Eo);return c._asyncIteratorImpl=u,c}function Po(e){if(!l(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof To}catch{return!1}}function Ao(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Co=Number.isNaN||function(e){return e!==e};function Et(e){return e.slice()}function Oo(e,r,s,u,c){new Uint8Array(e).set(new Uint8Array(s,u,c),r)}function $f(e){return e}function Jt(e){return!1}function ko(e,r,s){if(e.slice)return e.slice(r,s);let u=s-r,c=new ArrayBuffer(u);return Oo(c,0,e,r,u),c}function Sa(e){return!(typeof e!="number"||Co(e)||e<0)}function Bo(e){let r=ko(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(r)}function un(e){let r=e._queue.shift();return e._queueTotalSize-=r.size,e._queueTotalSize<0&&(e._queueTotalSize=0),r.value}function ln(e,r,s){if(!Sa(s)||s===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:r,size:s}),e._queueTotalSize+=s}function wa(e){return e._queue.peek().value}function Ie(e){e._queue=new te,e._queueTotalSize=0}class Pt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!fn(this))throw pn("view");return this._view}respond(r){if(!fn(this))throw pn("respond");if(Ee(r,1,"respond"),r=So(r,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Jt(this._view.buffer),rr(this._associatedReadableByteStreamController,r)}respondWithNewView(r){if(!fn(this))throw pn("respondWithNewView");if(Ee(r,1,"respondWithNewView"),!ArrayBuffer.isView(r))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Jt(r.buffer),nr(this._associatedReadableByteStreamController,r)}}Object.defineProperties(Pt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Pt.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class it{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!He(this))throw Ct("byobRequest");return hn(this)}get desiredSize(){if(!He(this))throw Ct("desiredSize");return Uo(this)}close(){if(!He(this))throw Ct("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let r=this._controlledReadableByteStream._state;if(r!=="readable")throw new TypeError(`The stream (in ${r} state) is not in the readable state and cannot be closed`);At(this)}enqueue(r){if(!He(this))throw Ct("enqueue");if(Ee(r,1,"enqueue"),!ArrayBuffer.isView(r))throw new TypeError("chunk must be an array buffer view");if(r.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(r.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let s=this._controlledReadableByteStream._state;if(s!=="readable")throw new TypeError(`The stream (in ${s} state) is not in the readable state and cannot be enqueued to`);tr(this,r)}error(r=void 0){if(!He(this))throw Ct("error");pe(this,r)}[tn](r){qo(this),Ie(this);let s=this._cancelAlgorithm(r);return er(this),s}[rn](r){let s=this._controlledReadableByteStream;if(this._queueTotalSize>0){let c=this._queue.shift();this._queueTotalSize-=c.byteLength,Lo(this);let p=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);r._chunkSteps(p);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let c;try{c=new ArrayBuffer(u)}catch(b){r._errorSteps(b);return}let p={buffer:c,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(p)}wo(s,r),Ve(this)}}Object.defineProperties(it.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(it.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function He(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof it}function fn(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Pt}function Ve(e){if(!Ea(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();x(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ve(e))},u=>{pe(e,u)})}function qo(e){dn(e),e._pendingPullIntos=new te}function cn(e,r){let s=!1;e._state==="closed"&&(s=!0);let u=Do(r);r.readerType==="default"?an(e,u,s):Ca(e,u,s)}function Do(e){let r=e.bytesFilled,s=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,r/s)}function Zt(e,r,s,u){e._queue.push({buffer:r,byteOffset:s,byteLength:u}),e._queueTotalSize+=u}function Io(e,r){let s=r.elementSize,u=r.bytesFilled-r.bytesFilled%s,c=Math.min(e._queueTotalSize,r.byteLength-r.bytesFilled),p=r.bytesFilled+c,b=p-p%s,R=c,E=!1;b>u&&(R=b-r.bytesFilled,E=!0);let A=e._queue;for(;R>0;){let O=A.peek(),k=Math.min(R,O.byteLength),j=r.byteOffset+r.bytesFilled;Oo(r.buffer,j,O.buffer,O.byteOffset,k),O.byteLength===k?A.shift():(O.byteOffset+=k,O.byteLength-=k),e._queueTotalSize-=k,xo(e,k,r),R-=k}return E}function xo(e,r,s){s.bytesFilled+=r}function Lo(e){e._queueTotalSize===0&&e._closeRequested?(er(e),Lt(e._controlledReadableByteStream)):Ve(e)}function dn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Wo(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let r=e._pendingPullIntos.peek();Io(e,r)&&(Xt(e),cn(e._controlledReadableByteStream,r))}}function Ra(e,r,s){let u=e._controlledReadableByteStream,c=1;r.constructor!==DataView&&(c=r.constructor.BYTES_PER_ELEMENT);let p=r.constructor,b=r.buffer,R={buffer:b,bufferByteLength:b.byteLength,byteOffset:r.byteOffset,byteLength:r.byteLength,bytesFilled:0,elementSize:c,viewConstructor:p,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(R),$o(u,s);return}if(u._state==="closed"){let E=new p(R.buffer,R.byteOffset,0);s._closeSteps(E);return}if(e._queueTotalSize>0){if(Io(e,R)){let E=Do(R);Lo(e),s._chunkSteps(E);return}if(e._closeRequested){let E=new TypeError("Insufficient bytes to fill elements in the given buffer");pe(e,E),s._errorSteps(E);return}}e._pendingPullIntos.push(R),$o(u,s),Ve(e)}function va(e,r){let s=e._controlledReadableByteStream;if(mn(s))for(;zo(s)>0;){let u=Xt(e);cn(s,u)}}function Ta(e,r,s){if(xo(e,r,s),s.bytesFilled<s.elementSize)return;Xt(e);let u=s.bytesFilled%s.elementSize;if(u>0){let c=s.byteOffset+s.bytesFilled,p=ko(s.buffer,c-u,c);Zt(e,p,0,p.byteLength)}s.bytesFilled-=u,cn(e._controlledReadableByteStream,s),Wo(e)}function Fo(e,r){let s=e._pendingPullIntos.peek();dn(e),e._controlledReadableByteStream._state==="closed"?va(e):Ta(e,r,s),Ve(e)}function Xt(e){return e._pendingPullIntos.shift()}function Ea(e){let r=e._controlledReadableByteStream;return r._state!=="readable"||e._closeRequested||!e._started?!1:!!(Ro(r)&&Qt(r)>0||mn(r)&&zo(r)>0||Uo(e)>0)}function er(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function At(e){let r=e._controlledReadableByteStream;if(!(e._closeRequested||r._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw pe(e,u),u}er(e),Lt(r)}}function tr(e,r){let s=e._controlledReadableByteStream;if(e._closeRequested||s._state!=="readable")return;let u=r.buffer,c=r.byteOffset,p=r.byteLength,b=u;if(e._pendingPullIntos.length>0){let R=e._pendingPullIntos.peek();Jt(R.buffer),R.buffer=R.buffer}if(dn(e),Ro(s))if(Qt(s)===0)Zt(e,b,c,p);else{e._pendingPullIntos.length>0&&Xt(e);let R=new Uint8Array(b,c,p);an(s,R,!1)}else mn(s)?(Zt(e,b,c,p),Wo(e)):Zt(e,b,c,p);Ve(e)}function pe(e,r){let s=e._controlledReadableByteStream;s._state==="readable"&&(qo(e),Ie(e),er(e),hi(s,r))}function hn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let r=e._pendingPullIntos.peek(),s=new Uint8Array(r.buffer,r.byteOffset+r.bytesFilled,r.byteLength-r.bytesFilled),u=Object.create(Pt.prototype);Aa(u,e,s),e._byobRequest=u}return e._byobRequest}function Uo(e){let r=e._controlledReadableByteStream._state;return r==="errored"?null:r==="closed"?0:e._strategyHWM-e._queueTotalSize}function rr(e,r){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(r!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(r===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(s.bytesFilled+r>s.byteLength)throw new RangeError("bytesWritten out of range")}s.buffer=s.buffer,Fo(e,r)}function nr(e,r){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(r.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(r.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(s.byteOffset+s.bytesFilled!==r.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(s.bufferByteLength!==r.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(s.bytesFilled+r.byteLength>s.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=r.byteLength;s.buffer=r.buffer,Fo(e,c)}function Mo(e,r,s,u,c,p,b){r._controlledReadableByteStream=e,r._pullAgain=!1,r._pulling=!1,r._byobRequest=null,r._queue=r._queueTotalSize=void 0,Ie(r),r._closeRequested=!1,r._started=!1,r._strategyHWM=p,r._pullAlgorithm=u,r._cancelAlgorithm=c,r._autoAllocateChunkSize=b,r._pendingPullIntos=new te,e._readableStreamController=r;let R=s();x(g(R),()=>{r._started=!0,Ve(r)},E=>{pe(r,E)})}function Pa(e,r,s){let u=Object.create(it.prototype),c=()=>{},p=()=>g(void 0),b=()=>g(void 0);r.start!==void 0&&(c=()=>r.start(u)),r.pull!==void 0&&(p=()=>r.pull(u)),r.cancel!==void 0&&(b=E=>r.cancel(E));let R=r.autoAllocateChunkSize;if(R===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Mo(e,u,c,p,b,s,R)}function Aa(e,r,s){e._associatedReadableByteStreamController=r,e._view=s}function pn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Ct(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function jo(e){return new Ot(e)}function $o(e,r){e._reader._readIntoRequests.push(r)}function Ca(e,r,s){let c=e._reader._readIntoRequests.shift();s?c._closeSteps(r):c._chunkSteps(r)}function zo(e){return e._reader._readIntoRequests.length}function mn(e){let r=e._reader;return!(r===void 0||!Ye(r))}class Ot{constructor(r){if(Ee(r,1,"ReadableStreamBYOBReader"),sn(r,"First parameter"),Fe(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!He(r._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");co(this,r),this._readIntoRequests=new te}get closed(){return Ye(this)?this._closedPromise:S(or("closed"))}cancel(r=void 0){return Ye(this)?this._ownerReadableStream===void 0?S(nt("cancel")):Zr(this,r):S(or("cancel"))}read(r){if(!Ye(this))return S(or("read"));if(!ArrayBuffer.isView(r))return S(new TypeError("view must be an array buffer view"));if(r.byteLength===0)return S(new TypeError("view must have non-zero byteLength"));if(r.buffer.byteLength===0)return S(new TypeError("view's buffer must have non-zero byteLength"));if(Jt(r.buffer),this._ownerReadableStream===void 0)return S(nt("read from"));let s,u,c=_((b,R)=>{s=b,u=R});return No(this,r,{_chunkSteps:b=>s({value:b,done:!1}),_closeSteps:b=>s({value:b,done:!0}),_errorSteps:b=>u(b)}),c}releaseLock(){if(!Ye(this))throw or("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ve(this)}}}Object.defineProperties(Ot.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ot.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Ye(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Ot}function No(e,r,s){let u=e._ownerReadableStream;u._disturbed=!0,u._state==="errored"?s._errorSteps(u._storedError):Ra(u._readableStreamController,r,s)}function or(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function kt(e,r){let{highWaterMark:s}=e;if(s===void 0)return r;if(Co(s)||s<0)throw new RangeError("Invalid highWaterMark");return s}function ir(e){let{size:r}=e;return r||(()=>1)}function sr(e,r){Te(e,r);let s=e==null?void 0:e.highWaterMark,u=e==null?void 0:e.size;return{highWaterMark:s===void 0?void 0:on(s),size:u===void 0?void 0:Oa(u,`${r} has member 'size' that`)}}function Oa(e,r){return he(e,r),s=>on(e(s))}function ka(e,r){Te(e,r);let s=e==null?void 0:e.abort,u=e==null?void 0:e.close,c=e==null?void 0:e.start,p=e==null?void 0:e.type,b=e==null?void 0:e.write;return{abort:s===void 0?void 0:Ba(s,e,`${r} has member 'abort' that`),close:u===void 0?void 0:qa(u,e,`${r} has member 'close' that`),start:c===void 0?void 0:Da(c,e,`${r} has member 'start' that`),write:b===void 0?void 0:Ia(b,e,`${r} has member 'write' that`),type:p}}function Ba(e,r,s){return he(e,s),u=>D(e,r,[u])}function qa(e,r,s){return he(e,s),()=>D(e,r,[])}function Da(e,r,s){return he(e,s),u=>U(e,r,[u])}function Ia(e,r,s){return he(e,s),(u,c)=>D(e,r,[u,c])}function Ho(e,r){if(!st(e))throw new TypeError(`${r} is not a WritableStream.`)}function xa(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let La=typeof AbortController=="function";function Wa(){if(La)return new AbortController}class Bt{constructor(r={},s={}){r===void 0?r=null:go(r,"First parameter");let u=sr(s,"Second parameter"),c=ka(r,"First parameter");if(Yo(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let b=ir(u),R=kt(u,1);Ja(this,c,R,b)}get locked(){if(!st(this))throw cr("locked");return at(this)}abort(r=void 0){return st(this)?at(this)?S(new TypeError("Cannot abort a stream that already has a writer")):ar(this,r):S(cr("abort"))}close(){return st(this)?at(this)?S(new TypeError("Cannot close a stream that already has a writer")):_e(this)?S(new TypeError("Cannot close an already-closing stream")):Go(this):S(cr("close"))}getWriter(){if(!st(this))throw cr("getWriter");return Vo(this)}}Object.defineProperties(Bt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Bt.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function Vo(e){return new qt(e)}function Fa(e,r,s,u,c=1,p=()=>1){let b=Object.create(Bt.prototype);Yo(b);let R=Object.create(ut.prototype);return ei(b,R,e,r,s,u,c,p),b}function Yo(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new te,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function st(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof Bt}function at(e){return e._writer!==void 0}function ar(e,r){var s;if(e._state==="closed"||e._state==="errored")return g(void 0);e._writableStreamController._abortReason=r,(s=e._writableStreamController._abortController)===null||s===void 0||s.abort();let u=e._state;if(u==="closed"||u==="errored")return g(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;u==="erroring"&&(c=!0,r=void 0);let p=_((b,R)=>{e._pendingAbortRequest={_promise:void 0,_resolve:b,_reject:R,_reason:r,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=p,c||yn(e,r),p}function Go(e){let r=e._state;if(r==="closed"||r==="errored")return S(new TypeError(`The stream (in ${r} state) is not in the writable state and cannot be closed`));let s=_((c,p)=>{let b={_resolve:c,_reject:p};e._closeRequest=b}),u=e._writer;return u!==void 0&&e._backpressure&&r==="writable"&&Pn(u),Za(e._writableStreamController),s}function Ua(e){return _((s,u)=>{let c={_resolve:s,_reject:u};e._writeRequests.push(c)})}function bn(e,r){if(e._state==="writable"){yn(e,r);return}gn(e)}function yn(e,r){let s=e._writableStreamController;e._state="erroring",e._storedError=r;let u=e._writer;u!==void 0&&Ko(u,r),!Na(e)&&s._started&&gn(e)}function gn(e){e._state="errored",e._writableStreamController[bo]();let r=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(r)}),e._writeRequests=new te,e._pendingAbortRequest===void 0){ur(e);return}let s=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,s._wasAlreadyErroring){s._reject(r),ur(e);return}let u=e._writableStreamController[mo](s._reason);x(u,()=>{s._resolve(),ur(e)},c=>{s._reject(c),ur(e)})}function Ma(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function ja(e,r){e._inFlightWriteRequest._reject(r),e._inFlightWriteRequest=void 0,bn(e,r)}function $a(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let s=e._writer;s!==void 0&&oi(s)}function za(e,r){e._inFlightCloseRequest._reject(r),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(r),e._pendingAbortRequest=void 0),bn(e,r)}function _e(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Na(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Ha(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Va(e){e._inFlightWriteRequest=e._writeRequests.shift()}function ur(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let r=e._writer;r!==void 0&&Tn(r,e._storedError)}function _n(e,r){let s=e._writer;s!==void 0&&r!==e._backpressure&&(r?iu(s):Pn(s)),e._backpressure=r}class qt{constructor(r){if(Ee(r,1,"WritableStreamDefaultWriter"),Ho(r,"First parameter"),at(r))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=r,r._writer=this;let s=r._state;if(s==="writable")!_e(r)&&r._backpressure?hr(this):ii(this),dr(this);else if(s==="erroring")En(this,r._storedError),dr(this);else if(s==="closed")ii(this),nu(this);else{let u=r._storedError;En(this,u),ni(this,u)}}get closed(){return Ge(this)?this._closedPromise:S(Qe("closed"))}get desiredSize(){if(!Ge(this))throw Qe("desiredSize");if(this._ownerWritableStream===void 0)throw Dt("desiredSize");return Ka(this)}get ready(){return Ge(this)?this._readyPromise:S(Qe("ready"))}abort(r=void 0){return Ge(this)?this._ownerWritableStream===void 0?S(Dt("abort")):Ya(this,r):S(Qe("abort"))}close(){if(!Ge(this))return S(Qe("close"));let r=this._ownerWritableStream;return r===void 0?S(Dt("close")):_e(r)?S(new TypeError("Cannot close an already-closing stream")):Qo(this)}releaseLock(){if(!Ge(this))throw Qe("releaseLock");this._ownerWritableStream!==void 0&&Jo(this)}write(r=void 0){return Ge(this)?this._ownerWritableStream===void 0?S(Dt("write to")):Zo(this,r):S(Qe("write"))}}Object.defineProperties(qt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(qt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Ge(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof qt}function Ya(e,r){let s=e._ownerWritableStream;return ar(s,r)}function Qo(e){let r=e._ownerWritableStream;return Go(r)}function Ga(e){let r=e._ownerWritableStream,s=r._state;return _e(r)||s==="closed"?g(void 0):s==="errored"?S(r._storedError):Qo(e)}function Qa(e,r){e._closedPromiseState==="pending"?Tn(e,r):ou(e,r)}function Ko(e,r){e._readyPromiseState==="pending"?si(e,r):su(e,r)}function Ka(e){let r=e._ownerWritableStream,s=r._state;return s==="errored"||s==="erroring"?null:s==="closed"?0:ti(r._writableStreamController)}function Jo(e){let r=e._ownerWritableStream,s=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Ko(e,s),Qa(e,s),r._writer=void 0,e._ownerWritableStream=void 0}function Zo(e,r){let s=e._ownerWritableStream,u=s._writableStreamController,c=Xa(u,r);if(s!==e._ownerWritableStream)return S(Dt("write to"));let p=s._state;if(p==="errored")return S(s._storedError);if(_e(s)||p==="closed")return S(new TypeError("The stream is closing or closed and cannot be written to"));if(p==="erroring")return S(s._storedError);let b=Ua(s);return eu(u,r,c),b}let Xo={};class ut{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Sn(this))throw vn("abortReason");return this._abortReason}get signal(){if(!Sn(this))throw vn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(r=void 0){if(!Sn(this))throw vn("error");this._controlledWritableStream._state==="writable"&&ri(this,r)}[mo](r){let s=this._abortAlgorithm(r);return lr(this),s}[bo](){Ie(this)}}Object.defineProperties(ut.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(ut.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Sn(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof ut}function ei(e,r,s,u,c,p,b,R){r._controlledWritableStream=e,e._writableStreamController=r,r._queue=void 0,r._queueTotalSize=void 0,Ie(r),r._abortReason=void 0,r._abortController=Wa(),r._started=!1,r._strategySizeAlgorithm=R,r._strategyHWM=b,r._writeAlgorithm=u,r._closeAlgorithm=c,r._abortAlgorithm=p;let E=Rn(r);_n(e,E);let A=s(),O=g(A);x(O,()=>{r._started=!0,fr(r)},k=>{r._started=!0,bn(e,k)})}function Ja(e,r,s,u){let c=Object.create(ut.prototype),p=()=>{},b=()=>g(void 0),R=()=>g(void 0),E=()=>g(void 0);r.start!==void 0&&(p=()=>r.start(c)),r.write!==void 0&&(b=A=>r.write(A,c)),r.close!==void 0&&(R=()=>r.close()),r.abort!==void 0&&(E=A=>r.abort(A)),ei(e,c,p,b,R,E,s,u)}function lr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Za(e){ln(e,Xo,0),fr(e)}function Xa(e,r){try{return e._strategySizeAlgorithm(r)}catch(s){return wn(e,s),1}}function ti(e){return e._strategyHWM-e._queueTotalSize}function eu(e,r,s){try{ln(e,r,s)}catch(c){wn(e,c);return}let u=e._controlledWritableStream;if(!_e(u)&&u._state==="writable"){let c=Rn(e);_n(u,c)}fr(e)}function fr(e){let r=e._controlledWritableStream;if(!e._started||r._inFlightWriteRequest!==void 0)return;if(r._state==="erroring"){gn(r);return}if(e._queue.length===0)return;let u=wa(e);u===Xo?tu(e):ru(e,u)}function wn(e,r){e._controlledWritableStream._state==="writable"&&ri(e,r)}function tu(e){let r=e._controlledWritableStream;Ha(r),un(e);let s=e._closeAlgorithm();lr(e),x(s,()=>{$a(r)},u=>{za(r,u)})}function ru(e,r){let s=e._controlledWritableStream;Va(s);let u=e._writeAlgorithm(r);x(u,()=>{Ma(s);let c=s._state;if(un(e),!_e(s)&&c==="writable"){let p=Rn(e);_n(s,p)}fr(e)},c=>{s._state==="writable"&&lr(e),ja(s,c)})}function Rn(e){return ti(e)<=0}function ri(e,r){let s=e._controlledWritableStream;lr(e),yn(s,r)}function cr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function vn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Qe(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Dt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function dr(e){e._closedPromise=_((r,s)=>{e._closedPromise_resolve=r,e._closedPromise_reject=s,e._closedPromiseState="pending"})}function ni(e,r){dr(e),Tn(e,r)}function nu(e){dr(e),oi(e)}function Tn(e,r){e._closedPromise_reject!==void 0&&(Q(e._closedPromise),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function ou(e,r){ni(e,r)}function oi(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function hr(e){e._readyPromise=_((r,s)=>{e._readyPromise_resolve=r,e._readyPromise_reject=s}),e._readyPromiseState="pending"}function En(e,r){hr(e),si(e,r)}function ii(e){hr(e),Pn(e)}function si(e,r){e._readyPromise_reject!==void 0&&(Q(e._readyPromise),e._readyPromise_reject(r),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function iu(e){hr(e)}function su(e,r){En(e,r)}function Pn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let ai=typeof DOMException<"u"?DOMException:void 0;function au(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function uu(){let e=function(s,u){this.message=s||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let lu=au(ai)?ai:uu();function ui(e,r,s,u,c,p){let b=ot(e),R=Vo(r);e._disturbed=!0;let E=!1,A=g(void 0);return _((O,k)=>{let j;if(p!==void 0){if(j=()=>{let T=new lu("Aborted","AbortError"),P=[];u||P.push(()=>r._state==="writable"?ar(r,T):g(void 0)),c||P.push(()=>e._state==="readable"?me(e,T):g(void 0)),K(()=>Promise.all(P.map(L=>L())),!0,T)},p.aborted){j();return}p.addEventListener("abort",j)}function be(){return _((T,P)=>{function L(re){re?T():w(ct(),L,P)}L(!1)})}function ct(){return E?g(!0):w(R._readyPromise,()=>_((T,P)=>{Tt(b,{_chunkSteps:L=>{A=w(Zo(R,L),void 0,o),T(!1)},_closeSteps:()=>T(!0),_errorSteps:P})}))}if(Pe(e,b._closedPromise,T=>{u?ae(!0,T):K(()=>ar(r,T),!0,T)}),Pe(r,R._closedPromise,T=>{c?ae(!0,T):K(()=>me(e,T),!0,T)}),V(e,b._closedPromise,()=>{s?ae():K(()=>Ga(R))}),_e(r)||r._state==="closed"){let T=new TypeError("the destination writable stream closed before all data could be piped to it");c?ae(!0,T):K(()=>me(e,T),!0,T)}Q(be());function Ue(){let T=A;return w(A,()=>T!==A?Ue():void 0)}function Pe(T,P,L){T._state==="errored"?L(T._storedError):q(P,L)}function V(T,P,L){T._state==="closed"?L():B(P,L)}function K(T,P,L){if(E)return;E=!0,r._state==="writable"&&!_e(r)?B(Ue(),re):re();function re(){x(T(),()=>Ae(P,L),dt=>Ae(!0,dt))}}function ae(T,P){E||(E=!0,r._state==="writable"&&!_e(r)?B(Ue(),()=>Ae(T,P)):Ae(T,P))}function Ae(T,P){Jo(R),ve(b),p!==void 0&&p.removeEventListener("abort",j),T?k(P):O(void 0)}})}class lt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!pr(this))throw yr("desiredSize");return An(this)}close(){if(!pr(this))throw yr("close");if(!ft(this))throw new TypeError("The stream is not in a state that permits close");xt(this)}enqueue(r=void 0){if(!pr(this))throw yr("enqueue");if(!ft(this))throw new TypeError("The stream is not in a state that permits enqueue");return br(this,r)}error(r=void 0){if(!pr(this))throw yr("error");xe(this,r)}[tn](r){Ie(this);let s=this._cancelAlgorithm(r);return mr(this),s}[rn](r){let s=this._controlledReadableStream;if(this._queue.length>0){let u=un(this);this._closeRequested&&this._queue.length===0?(mr(this),Lt(s)):It(this),r._chunkSteps(u)}else wo(s,r),It(this)}}Object.defineProperties(lt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(lt.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function pr(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof lt}function It(e){if(!li(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();x(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,It(e))},u=>{xe(e,u)})}function li(e){let r=e._controlledReadableStream;return!ft(e)||!e._started?!1:!!(Fe(r)&&Qt(r)>0||An(e)>0)}function mr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function xt(e){if(!ft(e))return;let r=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(mr(e),Lt(r))}function br(e,r){if(!ft(e))return;let s=e._controlledReadableStream;if(Fe(s)&&Qt(s)>0)an(s,r,!1);else{let u;try{u=e._strategySizeAlgorithm(r)}catch(c){throw xe(e,c),c}try{ln(e,r,u)}catch(c){throw xe(e,c),c}}It(e)}function xe(e,r){let s=e._controlledReadableStream;s._state==="readable"&&(Ie(e),mr(e),hi(s,r))}function An(e){let r=e._controlledReadableStream._state;return r==="errored"?null:r==="closed"?0:e._strategyHWM-e._queueTotalSize}function fu(e){return!li(e)}function ft(e){let r=e._controlledReadableStream._state;return!e._closeRequested&&r==="readable"}function fi(e,r,s,u,c,p,b){r._controlledReadableStream=e,r._queue=void 0,r._queueTotalSize=void 0,Ie(r),r._started=!1,r._closeRequested=!1,r._pullAgain=!1,r._pulling=!1,r._strategySizeAlgorithm=b,r._strategyHWM=p,r._pullAlgorithm=u,r._cancelAlgorithm=c,e._readableStreamController=r;let R=s();x(g(R),()=>{r._started=!0,It(r)},E=>{xe(r,E)})}function cu(e,r,s,u){let c=Object.create(lt.prototype),p=()=>{},b=()=>g(void 0),R=()=>g(void 0);r.start!==void 0&&(p=()=>r.start(c)),r.pull!==void 0&&(b=()=>r.pull(c)),r.cancel!==void 0&&(R=E=>r.cancel(E)),fi(e,c,p,b,R,s,u)}function yr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function du(e,r){return He(e._readableStreamController)?pu(e):hu(e)}function hu(e,r){let s=ot(e),u=!1,c=!1,p=!1,b=!1,R,E,A,O,k,j=_(V=>{k=V});function be(){return u?(c=!0,g(void 0)):(u=!0,Tt(s,{_chunkSteps:K=>{C(()=>{c=!1;let ae=K,Ae=K;p||br(A._readableStreamController,ae),b||br(O._readableStreamController,Ae),u=!1,c&&be()})},_closeSteps:()=>{u=!1,p||xt(A._readableStreamController),b||xt(O._readableStreamController),(!p||!b)&&k(void 0)},_errorSteps:()=>{u=!1}}),g(void 0))}function ct(V){if(p=!0,R=V,b){let K=Et([R,E]),ae=me(e,K);k(ae)}return j}function Ue(V){if(b=!0,E=V,p){let K=Et([R,E]),ae=me(e,K);k(ae)}return j}function Pe(){}return A=Cn(Pe,be,ct),O=Cn(Pe,be,Ue),q(s._closedPromise,V=>{xe(A._readableStreamController,V),xe(O._readableStreamController,V),(!p||!b)&&k(void 0)}),[A,O]}function pu(e){let r=ot(e),s=!1,u=!1,c=!1,p=!1,b=!1,R,E,A,O,k,j=_(T=>{k=T});function be(T){q(T._closedPromise,P=>{T===r&&(pe(A._readableStreamController,P),pe(O._readableStreamController,P),(!p||!b)&&k(void 0))})}function ct(){Ye(r)&&(ve(r),r=ot(e),be(r)),Tt(r,{_chunkSteps:P=>{C(()=>{u=!1,c=!1;let L=P,re=P;if(!p&&!b)try{re=Bo(P)}catch(dt){pe(A._readableStreamController,dt),pe(O._readableStreamController,dt),k(me(e,dt));return}p||tr(A._readableStreamController,L),b||tr(O._readableStreamController,re),s=!1,u?Pe():c&&V()})},_closeSteps:()=>{s=!1,p||At(A._readableStreamController),b||At(O._readableStreamController),A._readableStreamController._pendingPullIntos.length>0&&rr(A._readableStreamController,0),O._readableStreamController._pendingPullIntos.length>0&&rr(O._readableStreamController,0),(!p||!b)&&k(void 0)},_errorSteps:()=>{s=!1}})}function Ue(T,P){De(r)&&(ve(r),r=jo(e),be(r));let L=P?O:A,re=P?A:O;No(r,T,{_chunkSteps:ht=>{C(()=>{u=!1,c=!1;let pt=P?b:p;if(P?p:b)pt||nr(L._readableStreamController,ht);else{let Pi;try{Pi=Bo(ht)}catch(kn){pe(L._readableStreamController,kn),pe(re._readableStreamController,kn),k(me(e,kn));return}pt||nr(L._readableStreamController,ht),tr(re._readableStreamController,Pi)}s=!1,u?Pe():c&&V()})},_closeSteps:ht=>{s=!1;let pt=P?b:p,Pr=P?p:b;pt||At(L._readableStreamController),Pr||At(re._readableStreamController),ht!==void 0&&(pt||nr(L._readableStreamController,ht),!Pr&&re._readableStreamController._pendingPullIntos.length>0&&rr(re._readableStreamController,0)),(!pt||!Pr)&&k(void 0)},_errorSteps:()=>{s=!1}})}function Pe(){if(s)return u=!0,g(void 0);s=!0;let T=hn(A._readableStreamController);return T===null?ct():Ue(T._view,!1),g(void 0)}function V(){if(s)return c=!0,g(void 0);s=!0;let T=hn(O._readableStreamController);return T===null?ct():Ue(T._view,!0),g(void 0)}function K(T){if(p=!0,R=T,b){let P=Et([R,E]),L=me(e,P);k(L)}return j}function ae(T){if(b=!0,E=T,p){let P=Et([R,E]),L=me(e,P);k(L)}return j}function Ae(){}return A=di(Ae,Pe,K),O=di(Ae,V,ae),be(r),[A,O]}function mu(e,r){Te(e,r);let s=e,u=s==null?void 0:s.autoAllocateChunkSize,c=s==null?void 0:s.cancel,p=s==null?void 0:s.pull,b=s==null?void 0:s.start,R=s==null?void 0:s.type;return{autoAllocateChunkSize:u===void 0?void 0:So(u,`${r} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:bu(c,s,`${r} has member 'cancel' that`),pull:p===void 0?void 0:yu(p,s,`${r} has member 'pull' that`),start:b===void 0?void 0:gu(b,s,`${r} has member 'start' that`),type:R===void 0?void 0:_u(R,`${r} has member 'type' that`)}}function bu(e,r,s){return he(e,s),u=>D(e,r,[u])}function yu(e,r,s){return he(e,s),u=>D(e,r,[u])}function gu(e,r,s){return he(e,s),u=>U(e,r,[u])}function _u(e,r){if(e=`${e}`,e!=="bytes")throw new TypeError(`${r} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Su(e,r){Te(e,r);let s=e==null?void 0:e.mode;return{mode:s===void 0?void 0:wu(s,`${r} has member 'mode' that`)}}function wu(e,r){if(e=`${e}`,e!=="byob")throw new TypeError(`${r} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Ru(e,r){return Te(e,r),{preventCancel:!!(e==null?void 0:e.preventCancel)}}function ci(e,r){Te(e,r);let s=e==null?void 0:e.preventAbort,u=e==null?void 0:e.preventCancel,c=e==null?void 0:e.preventClose,p=e==null?void 0:e.signal;return p!==void 0&&vu(p,`${r} has member 'signal' that`),{preventAbort:!!s,preventCancel:!!u,preventClose:!!c,signal:p}}function vu(e,r){if(!xa(e))throw new TypeError(`${r} is not an AbortSignal.`)}function Tu(e,r){Te(e,r);let s=e==null?void 0:e.readable;nn(s,"readable","ReadableWritablePair"),sn(s,`${r} has member 'readable' that`);let u=e==null?void 0:e.writable;return nn(u,"writable","ReadableWritablePair"),Ho(u,`${r} has member 'writable' that`),{readable:s,writable:u}}class Le{constructor(r={},s={}){r===void 0?r=null:go(r,"First parameter");let u=sr(s,"Second parameter"),c=mu(r,"First parameter");if(On(this),c.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let p=kt(u,0);Pa(this,c,p)}else{let p=ir(u),b=kt(u,1);cu(this,c,b,p)}}get locked(){if(!We(this))throw Ke("locked");return Fe(this)}cancel(r=void 0){return We(this)?Fe(this)?S(new TypeError("Cannot cancel a stream that already has a reader")):me(this,r):S(Ke("cancel"))}getReader(r=void 0){if(!We(this))throw Ke("getReader");return Su(r,"First parameter").mode===void 0?ot(this):jo(this)}pipeThrough(r,s={}){if(!We(this))throw Ke("pipeThrough");Ee(r,1,"pipeThrough");let u=Tu(r,"First parameter"),c=ci(s,"Second parameter");if(Fe(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(at(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let p=ui(this,u.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return Q(p),u.readable}pipeTo(r,s={}){if(!We(this))return S(Ke("pipeTo"));if(r===void 0)return S("Parameter 1 is required in 'pipeTo'.");if(!st(r))return S(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=ci(s,"Second parameter")}catch(c){return S(c)}return Fe(this)?S(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):at(r)?S(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ui(this,r,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!We(this))throw Ke("tee");let r=du(this);return Et(r)}values(r=void 0){if(!We(this))throw Ke("values");let s=Ru(r,"First parameter");return _a(this,s.preventCancel)}}Object.defineProperties(Le.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Le.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(Le.prototype,t.asyncIterator,{value:Le.prototype.values,writable:!0,configurable:!0});function Cn(e,r,s,u=1,c=()=>1){let p=Object.create(Le.prototype);On(p);let b=Object.create(lt.prototype);return fi(p,b,e,r,s,u,c),p}function di(e,r,s){let u=Object.create(Le.prototype);On(u);let c=Object.create(it.prototype);return Mo(u,c,e,r,s,0,void 0),u}function On(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function We(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Le}function Fe(e){return e._reader!==void 0}function me(e,r){if(e._disturbed=!0,e._state==="closed")return g(void 0);if(e._state==="errored")return S(e._storedError);Lt(e);let s=e._reader;s!==void 0&&Ye(s)&&(s._readIntoRequests.forEach(c=>{c._closeSteps(void 0)}),s._readIntoRequests=new te);let u=e._readableStreamController[tn](r);return F(u,o)}function Lt(e){e._state="closed";let r=e._reader;r!==void 0&&(po(r),De(r)&&(r._readRequests.forEach(s=>{s._closeSteps()}),r._readRequests=new te))}function hi(e,r){e._state="errored",e._storedError=r;let s=e._reader;s!==void 0&&(en(s,r),De(s)?(s._readRequests.forEach(u=>{u._errorSteps(r)}),s._readRequests=new te):(s._readIntoRequests.forEach(u=>{u._errorSteps(r)}),s._readIntoRequests=new te))}function Ke(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function pi(e,r){Te(e,r);let s=e==null?void 0:e.highWaterMark;return nn(s,"highWaterMark","QueuingStrategyInit"),{highWaterMark:on(s)}}let mi=e=>e.byteLength;try{Object.defineProperty(mi,"name",{value:"size",configurable:!0})}catch{}class gr{constructor(r){Ee(r,1,"ByteLengthQueuingStrategy"),r=pi(r,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=r.highWaterMark}get highWaterMark(){if(!yi(this))throw bi("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!yi(this))throw bi("size");return mi}}Object.defineProperties(gr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(gr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function bi(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function yi(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof gr}let gi=()=>1;try{Object.defineProperty(gi,"name",{value:"size",configurable:!0})}catch{}class _r{constructor(r){Ee(r,1,"CountQueuingStrategy"),r=pi(r,"First parameter"),this._countQueuingStrategyHighWaterMark=r.highWaterMark}get highWaterMark(){if(!Si(this))throw _i("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Si(this))throw _i("size");return gi}}Object.defineProperties(_r.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(_r.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function _i(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Si(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof _r}function Eu(e,r){Te(e,r);let s=e==null?void 0:e.flush,u=e==null?void 0:e.readableType,c=e==null?void 0:e.start,p=e==null?void 0:e.transform,b=e==null?void 0:e.writableType;return{flush:s===void 0?void 0:Pu(s,e,`${r} has member 'flush' that`),readableType:u,start:c===void 0?void 0:Au(c,e,`${r} has member 'start' that`),transform:p===void 0?void 0:Cu(p,e,`${r} has member 'transform' that`),writableType:b}}function Pu(e,r,s){return he(e,s),u=>D(e,r,[u])}function Au(e,r,s){return he(e,s),u=>U(e,r,[u])}function Cu(e,r,s){return he(e,s),(u,c)=>D(e,r,[u,c])}class Sr{constructor(r={},s={},u={}){r===void 0&&(r=null);let c=sr(s,"Second parameter"),p=sr(u,"Third parameter"),b=Eu(r,"First parameter");if(b.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(b.writableType!==void 0)throw new RangeError("Invalid writableType specified");let R=kt(p,0),E=ir(p),A=kt(c,1),O=ir(c),k,j=_(be=>{k=be});Ou(this,j,A,O,R,E),Bu(this,b),b.start!==void 0?k(b.start(this._transformStreamController)):k(void 0)}get readable(){if(!wi(this))throw Ei("readable");return this._readable}get writable(){if(!wi(this))throw Ei("writable");return this._writable}}Object.defineProperties(Sr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Sr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function Ou(e,r,s,u,c,p){function b(){return r}function R(j){return Iu(e,j)}function E(j){return xu(e,j)}function A(){return Lu(e)}e._writable=Fa(b,R,A,E,s,u);function O(){return Wu(e)}function k(j){return Rr(e,j),g(void 0)}e._readable=Cn(b,O,k,c,p),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,vr(e,!0),e._transformStreamController=void 0}function wi(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Sr}function wr(e,r){xe(e._readable._readableStreamController,r),Rr(e,r)}function Rr(e,r){Ri(e._transformStreamController),wn(e._writable._writableStreamController,r),e._backpressure&&vr(e,!1)}function vr(e,r){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=_(s=>{e._backpressureChangePromise_resolve=s}),e._backpressure=r}class Wt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Tr(this))throw Er("desiredSize");let r=this._controlledTransformStream._readable._readableStreamController;return An(r)}enqueue(r=void 0){if(!Tr(this))throw Er("enqueue");vi(this,r)}error(r=void 0){if(!Tr(this))throw Er("error");qu(this,r)}terminate(){if(!Tr(this))throw Er("terminate");Du(this)}}Object.defineProperties(Wt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Wt.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Tr(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Wt}function ku(e,r,s,u){r._controlledTransformStream=e,e._transformStreamController=r,r._transformAlgorithm=s,r._flushAlgorithm=u}function Bu(e,r){let s=Object.create(Wt.prototype),u=p=>{try{return vi(s,p),g(void 0)}catch(b){return S(b)}},c=()=>g(void 0);r.transform!==void 0&&(u=p=>r.transform(p,s)),r.flush!==void 0&&(c=()=>r.flush(s)),ku(e,s,u,c)}function Ri(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function vi(e,r){let s=e._controlledTransformStream,u=s._readable._readableStreamController;if(!ft(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{br(u,r)}catch(p){throw Rr(s,p),s._readable._storedError}fu(u)!==s._backpressure&&vr(s,!0)}function qu(e,r){wr(e._controlledTransformStream,r)}function Ti(e,r){let s=e._transformAlgorithm(r);return F(s,void 0,u=>{throw wr(e._controlledTransformStream,u),u})}function Du(e){let r=e._controlledTransformStream,s=r._readable._readableStreamController;xt(s);let u=new TypeError("TransformStream terminated");Rr(r,u)}function Iu(e,r){let s=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return F(u,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return Ti(s,r)})}return Ti(s,r)}function xu(e,r){return wr(e,r),g(void 0)}function Lu(e){let r=e._readable,s=e._transformStreamController,u=s._flushAlgorithm();return Ri(s),F(u,()=>{if(r._state==="errored")throw r._storedError;xt(r._readableStreamController)},c=>{throw wr(e,c),r._storedError})}function Wu(e){return vr(e,!1),e._backpressureChangePromise}function Er(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Ei(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}n.ByteLengthQueuingStrategy=gr,n.CountQueuingStrategy=_r,n.ReadableByteStreamController=it,n.ReadableStream=Le,n.ReadableStreamBYOBReader=Ot,n.ReadableStreamBYOBRequest=Pt,n.ReadableStreamDefaultController=lt,n.ReadableStreamDefaultReader=vt,n.TransformStream=Sr,n.TransformStreamDefaultController=Wt,n.WritableStream=Bt,n.WritableStreamDefaultController=ut,n.WritableStreamDefaultWriter=qt,Object.defineProperty(n,"__esModule",{value:!0})})});var Ds=Y(()=>{if(!globalThis.ReadableStream)try{let n=require("node:process"),{emitWarning:t}=n;try{n.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),n.emitWarning=t}catch(o){throw n.emitWarning=t,o}}catch{Object.assign(globalThis,qs())}try{let{Blob:n}=require("buffer");n&&!n.prototype.stream&&(n.prototype.stream=function(o){let i=0,a=this;return new ReadableStream({type:"bytes",async pull(l){let m=await a.slice(i,Math.min(a.size,i+65536)).arrayBuffer();i+=m.byteLength,l.enqueue(new Uint8Array(m)),i===a.size&&l.close()}})})}catch{}});async function*eo(n,t=!0){for(let o of n)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(t){let i=o.byteOffset,a=o.byteOffset+o.byteLength;for(;i!==a;){let l=Math.min(a-i,Is),f=o.buffer.slice(i,i+l);i+=f.byteLength,yield new Uint8Array(f)}}else yield o;else{let i=0,a=o;for(;i!==a.size;){let f=await a.slice(i,Math.min(a.size,i+Is)).arrayBuffer();i+=f.byteLength,yield new Uint8Array(f)}}}var Hc,Is,xs,_f,Oe,jt=$(()=>{Hc=ne(Ds(),1);Is=65536;xs=class to{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],o={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let i=new TextEncoder;for(let l of t){let f;ArrayBuffer.isView(l)?f=new Uint8Array(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)):l instanceof ArrayBuffer?f=new Uint8Array(l.slice(0)):l instanceof to?f=l:f=i.encode(`${l}`),this.#r+=ArrayBuffer.isView(f)?f.byteLength:f.size,this.#e.push(f)}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let a=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(a)?a:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,o="";for await(let i of eo(this.#e,!1))o+=t.decode(i,{stream:!0});return o+=t.decode(),o}async arrayBuffer(){let t=new Uint8Array(this.size),o=0;for await(let i of eo(this.#e,!1))t.set(i,o),o+=i.length;return t.buffer}stream(){let t=eo(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let i=await t.next();i.done?o.close():o.enqueue(i.value)},async cancel(){await t.return()}})}slice(t=0,o=this.size,i=""){let{size:a}=this,l=t<0?Math.max(a+t,0):Math.min(t,a),f=o<0?Math.max(a+o,0):Math.min(o,a),m=Math.max(f-l,0),h=this.#e,d=[],y=0;for(let g of h){if(y>=m)break;let S=ArrayBuffer.isView(g)?g.byteLength:g.size;if(l&&S<=l)l-=S,f-=S;else{let w;ArrayBuffer.isView(g)?(w=g.subarray(l,Math.min(S,f)),y+=w.byteLength):(w=g.slice(l,Math.min(S,f)),y+=w.size),f-=S,d.push(w),l=0}}let _=new to([],{type:String(i).toLowerCase()});return _.#r=m,_.#e=d,_}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(xs.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});_f=xs,Oe=_f});var Sf,wf,St,ro=$(()=>{jt();Sf=class extends Oe{#e=0;#t="";constructor(t,o,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,i),i===null&&(i={});let a=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(a)||(this.#e=a),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof Oe&&/^(File)$/.test(t[Symbol.toStringTag])}},wf=Sf,St=wf});function Fs(n,t=Oe){var o=`${Ls()}${Ls()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],a=`--${o}\r
Content-Disposition: form-data; name="`;return n.forEach((l,f)=>typeof l=="string"?i.push(a+no(f)+`"\r
\r
${l.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(a+no(f)+`"; filename="${no(l.name,1)}"\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,l,`\r
`)),i.push(`--${o}--`),new t(i,{type:"multipart/form-data; boundary="+o})}var $t,Rf,vf,Ls,Tf,Ws,no,Ze,Xe,$r=$(()=>{jt();ro();({toStringTag:$t,iterator:Rf,hasInstance:vf}=Symbol),Ls=Math.random,Tf="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Ws=(n,t,o)=>(n+="",/^(Blob|File)$/.test(t&&t[$t])?[(o=o!==void 0?o+"":t[$t]=="File"?t.name:"blob",n),t.name!==o||t[$t]=="blob"?new St([t],o,t):t]:[n,t+""]),no=(n,t)=>(t?n:n.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Ze=(n,t,o)=>{if(t.length<o)throw new TypeError(`Failed to execute '${n}' on 'FormData': ${o} arguments required, but only ${t.length} present.`)},Xe=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[$t](){return"FormData"}[Rf](){return this.entries()}static[vf](t){return t&&typeof t=="object"&&t[$t]==="FormData"&&!Tf.some(o=>typeof t[o]!="function")}append(...t){Ze("append",arguments,2),this.#e.push(Ws(...t))}delete(t){Ze("delete",arguments,1),t+="",this.#e=this.#e.filter(([o])=>o!==t)}get(t){Ze("get",arguments,1),t+="";for(var o=this.#e,i=o.length,a=0;a<i;a++)if(o[a][0]===t)return o[a][1];return null}getAll(t,o){return Ze("getAll",arguments,1),o=[],t+="",this.#e.forEach(i=>i[0]===t&&o.push(i[1])),o}has(t){return Ze("has",arguments,1),t+="",this.#e.some(o=>o[0]===t)}forEach(t,o){Ze("forEach",arguments,1);for(var[i,a]of this)t.call(o,a,i,this)}set(...t){Ze("set",arguments,2);var o=[],i=!0;t=Ws(...t),this.#e.forEach(a=>{a[0]===t[0]?i&&(i=!o.push(t)):o.push(a)}),i&&o.push(t),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var zs=Y((od,$s)=>{if(!globalThis.DOMException)try{let{MessageChannel:n}=require("worker_threads"),t=new n().port1,o=new ArrayBuffer;t.postMessage(o,[o,o])}catch(n){n.constructor.name==="DOMException"&&(globalThis.DOMException=n.constructor)}$s.exports=globalThis.DOMException});var Nt,Hs,Ef,Ns,io=$(()=>{Nt=require("node:fs"),Hs=ne(zs(),1);ro();jt();({stat:Ef}=Nt.promises),Ns=class n{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified}slice(t,o){return new n({path:this.#e,lastModified:this.lastModified,size:o-t,start:this.#t+t})}async*stream(){let{mtimeMs:t}=await Ef(this.#e);if(t>this.lastModified)throw new Hs.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Nt.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var Ys={};Ai(Ys,{toFormData:()=>qf});function Bf(n){let t=n.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let o=t[2]||t[3]||"",i=o.slice(o.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(a,l)=>String.fromCharCode(l)),i}async function qf(n,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let o=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new so(o[1]||o[2]),a,l,f,m,h,d,y=[],_=new Xe,g=q=>{f+=B.decode(q,{stream:!0})},S=q=>{y.push(q)},w=()=>{let q=new St(y,d,{type:h});_.append(m,q)},x=()=>{_.append(m,f)},B=new TextDecoder("utf-8");B.decode(),i.onPartBegin=function(){i.onPartData=g,i.onPartEnd=x,a="",l="",f="",m="",h="",d=null,y.length=0},i.onHeaderField=function(q){a+=B.decode(q,{stream:!0})},i.onHeaderValue=function(q){l+=B.decode(q,{stream:!0})},i.onHeaderEnd=function(){if(l+=B.decode(),a=a.toLowerCase(),a==="content-disposition"){let q=l.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);q&&(m=q[2]||q[3]||""),d=Bf(l),d&&(i.onPartData=S,i.onPartEnd=w)}else a==="content-type"&&(h=l);l="",a=""};for await(let q of n)i.write(q);return i.end(),_}var we,W,Vs,Ne,Nr,Hr,Pf,Ht,Af,Cf,Of,kf,et,so,Gs=$(()=>{io();$r();we=0,W={START_BOUNDARY:we++,HEADER_FIELD_START:we++,HEADER_FIELD:we++,HEADER_VALUE_START:we++,HEADER_VALUE:we++,HEADER_VALUE_ALMOST_DONE:we++,HEADERS_ALMOST_DONE:we++,PART_DATA_START:we++,PART_DATA:we++,END:we++},Vs=1,Ne={PART_BOUNDARY:Vs,LAST_BOUNDARY:Vs*=2},Nr=10,Hr=13,Pf=32,Ht=45,Af=58,Cf=97,Of=122,kf=n=>n|32,et=()=>{},so=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=et,this.onHeaderField=et,this.onHeadersEnd=et,this.onHeaderValue=et,this.onPartBegin=et,this.onPartData=et,this.onPartEnd=et,this.boundaryChars={},t=`\r
--`+t;let o=new Uint8Array(t.length);for(let i=0;i<t.length;i++)o[i]=t.charCodeAt(i),this.boundaryChars[o[i]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=W.START_BOUNDARY}write(t){let o=0,i=t.length,a=this.index,{lookbehind:l,boundary:f,boundaryChars:m,index:h,state:d,flags:y}=this,_=this.boundary.length,g=_-1,S=t.length,w,x,B=C=>{this[C+"Mark"]=o},q=C=>{delete this[C+"Mark"]},F=(C,U,D,qe)=>{(U===void 0||U!==D)&&this[C](qe&&qe.subarray(U,D))},Q=(C,U)=>{let D=C+"Mark";D in this&&(U?(F(C,this[D],o,t),delete this[D]):(F(C,this[D],t.length,t),this[D]=0))};for(o=0;o<i;o++)switch(w=t[o],d){case W.START_BOUNDARY:if(h===f.length-2){if(w===Ht)y|=Ne.LAST_BOUNDARY;else if(w!==Hr)return;h++;break}else if(h-1===f.length-2){if(y&Ne.LAST_BOUNDARY&&w===Ht)d=W.END,y=0;else if(!(y&Ne.LAST_BOUNDARY)&&w===Nr)h=0,F("onPartBegin"),d=W.HEADER_FIELD_START;else return;break}w!==f[h+2]&&(h=-2),w===f[h+2]&&h++;break;case W.HEADER_FIELD_START:d=W.HEADER_FIELD,B("onHeaderField"),h=0;case W.HEADER_FIELD:if(w===Hr){q("onHeaderField"),d=W.HEADERS_ALMOST_DONE;break}if(h++,w===Ht)break;if(w===Af){if(h===1)return;Q("onHeaderField",!0),d=W.HEADER_VALUE_START;break}if(x=kf(w),x<Cf||x>Of)return;break;case W.HEADER_VALUE_START:if(w===Pf)break;B("onHeaderValue"),d=W.HEADER_VALUE;case W.HEADER_VALUE:w===Hr&&(Q("onHeaderValue",!0),F("onHeaderEnd"),d=W.HEADER_VALUE_ALMOST_DONE);break;case W.HEADER_VALUE_ALMOST_DONE:if(w!==Nr)return;d=W.HEADER_FIELD_START;break;case W.HEADERS_ALMOST_DONE:if(w!==Nr)return;F("onHeadersEnd"),d=W.PART_DATA_START;break;case W.PART_DATA_START:d=W.PART_DATA,B("onPartData");case W.PART_DATA:if(a=h,h===0){for(o+=g;o<S&&!(t[o]in m);)o+=_;o-=g,w=t[o]}if(h<f.length)f[h]===w?(h===0&&Q("onPartData",!0),h++):h=0;else if(h===f.length)h++,w===Hr?y|=Ne.PART_BOUNDARY:w===Ht?y|=Ne.LAST_BOUNDARY:h=0;else if(h-1===f.length)if(y&Ne.PART_BOUNDARY){if(h=0,w===Nr){y&=~Ne.PART_BOUNDARY,F("onPartEnd"),F("onPartBegin"),d=W.HEADER_FIELD_START;break}}else y&Ne.LAST_BOUNDARY&&w===Ht?(F("onPartEnd"),d=W.END,y=0):h=0;if(h>0)l[h-1]=w;else if(a>0){let C=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);F("onPartData",0,a,C),a=0,B("onPartData"),o--}break;case W.END:break;default:throw new Error(`Unexpected state entered: ${d}`)}Q("onHeaderField"),Q("onHeaderValue"),Q("onPartData"),this.index=h,this.state=d,this.flags=y}end(){if(this.state===W.HEADER_FIELD_START&&this.index===0||this.state===W.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==W.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var da=ne(Ur());var H=ne(Ur()),Mr=class{error(t){(0,H.error)(t)}debug(t){(0,H.debug)(t)}exportVariable(t,o){(0,H.exportVariable)(t,o)}getIDToken(t){return(0,H.getIDToken)(t)}getInput(t,o){return(0,H.getInput)(t,o)}setOutput(t,o){return(0,H.setOutput)(t,o)}setFailed(t){return(0,H.setFailed)(t)}info(t){return(0,H.info)(t)}};var fo=require("os");var la=ne(require("node:http"),1),fa=ne(require("node:https"),1),rt=ne(require("node:zlib"),1),se=ne(require("node:stream"),1),Gt=require("node:buffer");function gf(n){if(!/^data:/i.test(n))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');n=n.replace(/\r?\n/g,"");let t=n.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let o=n.substring(5,t).split(";"),i="",a=!1,l=o[0]||"text/plain",f=l;for(let y=1;y<o.length;y++)o[y]==="base64"?a=!0:o[y]&&(f+=`;${o[y]}`,o[y].indexOf("charset=")===0&&(i=o[y].substring(8)));!o[0]&&!i.length&&(f+=";charset=US-ASCII",i="US-ASCII");let m=a?"base64":"ascii",h=unescape(n.substring(t+1)),d=Buffer.from(h,m);return d.type=l,d.typeFull=f,d.charset=i,d}var ks=gf;var ce=ne(require("node:stream"),1),Be=require("node:util"),oe=require("node:buffer");jt();$r();var ke=class extends Error{constructor(t,o){super(t),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var X=class extends ke{constructor(t,o,i){super(t,o),i&&(this.code=this.errno=i.code,this.erroredSysCall=i.syscall)}};var zr=Symbol.toStringTag,oo=n=>typeof n=="object"&&typeof n.append=="function"&&typeof n.delete=="function"&&typeof n.get=="function"&&typeof n.getAll=="function"&&typeof n.has=="function"&&typeof n.set=="function"&&typeof n.sort=="function"&&n[zr]==="URLSearchParams",zt=n=>n&&typeof n=="object"&&typeof n.arrayBuffer=="function"&&typeof n.type=="string"&&typeof n.stream=="function"&&typeof n.constructor=="function"&&/^(Blob|File)$/.test(n[zr]),Us=n=>typeof n=="object"&&(n[zr]==="AbortSignal"||n[zr]==="EventTarget"),Ms=(n,t)=>{let o=new URL(t).hostname,i=new URL(n).hostname;return o===i||o.endsWith(`.${i}`)},js=(n,t)=>{let o=new URL(t).protocol,i=new URL(n).protocol;return o===i};var Df=(0,Be.promisify)(ce.default.pipeline),ee=Symbol("Body internals"),Re=class{constructor(t,{size:o=0}={}){let i=null;t===null?t=null:oo(t)?t=oe.Buffer.from(t.toString()):zt(t)||oe.Buffer.isBuffer(t)||(Be.types.isAnyArrayBuffer(t)?t=oe.Buffer.from(t):ArrayBuffer.isView(t)?t=oe.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof ce.default||(t instanceof Xe?(t=Fs(t),i=t.type.split("=")[1]):t=oe.Buffer.from(String(t))));let a=t;oe.Buffer.isBuffer(t)?a=ce.default.Readable.from(t):zt(t)&&(a=ce.default.Readable.from(t.stream())),this[ee]={body:t,stream:a,boundary:i,disturbed:!1,error:null},this.size=o,t instanceof ce.default&&t.on("error",l=>{let f=l instanceof ke?l:new X(`Invalid response body while trying to fetch ${this.url}: ${l.message}`,"system",l);this[ee].error=f})}get body(){return this[ee].stream}get bodyUsed(){return this[ee].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:o,byteLength:i}=await ao(this);return t.slice(o,o+i)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let i=new Xe,a=new URLSearchParams(await this.text());for(let[l,f]of a)i.append(l,f);return i}let{toFormData:o}=await Promise.resolve().then(()=>(Gs(),Ys));return o(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[ee].body&&this[ee].body.type||"",o=await this.arrayBuffer();return new Oe([o],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await ao(this);return new TextDecoder().decode(t)}buffer(){return ao(this)}};Re.prototype.buffer=(0,Be.deprecate)(Re.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Re.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Be.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function ao(n){if(n[ee].disturbed)throw new TypeError(`body used already for: ${n.url}`);if(n[ee].disturbed=!0,n[ee].error)throw n[ee].error;let{body:t}=n;if(t===null)return oe.Buffer.alloc(0);if(!(t instanceof ce.default))return oe.Buffer.alloc(0);let o=[],i=0;try{for await(let a of t){if(n.size>0&&i+a.length>n.size){let l=new X(`content size at ${n.url} over limit: ${n.size}`,"max-size");throw t.destroy(l),l}i+=a.length,o.push(a)}}catch(a){throw a instanceof ke?a:new X(`Invalid response body while trying to fetch ${n.url}: ${a.message}`,"system",a)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return o.every(a=>typeof a=="string")?oe.Buffer.from(o.join("")):oe.Buffer.concat(o,i)}catch(a){throw new X(`Could not create Buffer from response body for ${n.url}: ${a.message}`,"system",a)}else throw new X(`Premature close of server response while trying to fetch ${n.url}`)}var wt=(n,t)=>{let o,i,{body:a}=n[ee];if(n.bodyUsed)throw new Error("cannot clone body after it is used");return a instanceof ce.default&&typeof a.getBoundary!="function"&&(o=new ce.PassThrough({highWaterMark:t}),i=new ce.PassThrough({highWaterMark:t}),a.pipe(o),a.pipe(i),n[ee].stream=o,a=i),a},If=(0,Be.deprecate)(n=>n.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Vr=(n,t)=>n===null?null:typeof n=="string"?"text/plain;charset=UTF-8":oo(n)?"application/x-www-form-urlencoded;charset=UTF-8":zt(n)?n.type||null:oe.Buffer.isBuffer(n)||Be.types.isAnyArrayBuffer(n)||ArrayBuffer.isView(n)?null:n instanceof Xe?`multipart/form-data; boundary=${t[ee].boundary}`:n&&typeof n.getBoundary=="function"?`multipart/form-data;boundary=${If(n)}`:n instanceof ce.default?null:"text/plain;charset=UTF-8",Qs=n=>{let{body:t}=n[ee];return t===null?0:zt(t)?t.size:oe.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},Ks=async(n,{body:t})=>{t===null?n.end():await Df(t,n)};var uo=require("node:util"),Vt=ne(require("node:http"),1),Yr=typeof Vt.default.validateHeaderName=="function"?Vt.default.validateHeaderName:n=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(n)){let t=new TypeError(`Header name must be a valid HTTP token [${n}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},lo=typeof Vt.default.validateHeaderValue=="function"?Vt.default.validateHeaderValue:(n,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let o=new TypeError(`Invalid character in header content ["${n}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},ie=class n extends URLSearchParams{constructor(t){let o=[];if(t instanceof n){let i=t.raw();for(let[a,l]of Object.entries(i))o.push(...l.map(f=>[a,f]))}else if(t!=null)if(typeof t=="object"&&!uo.types.isBoxedPrimitive(t)){let i=t[Symbol.iterator];if(i==null)o.push(...Object.entries(t));else{if(typeof i!="function")throw new TypeError("Header pairs must be iterable");o=[...t].map(a=>{if(typeof a!="object"||uo.types.isBoxedPrimitive(a))throw new TypeError("Each header pair must be an iterable object");return[...a]}).map(a=>{if(a.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...a]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([i,a])=>(Yr(i),lo(i,String(a)),[String(i).toLowerCase(),String(a)])):void 0,super(o),new Proxy(this,{get(i,a,l){switch(a){case"append":case"set":return(f,m)=>(Yr(f),lo(f,String(m)),URLSearchParams.prototype[a].call(i,String(f).toLowerCase(),String(m)));case"delete":case"has":case"getAll":return f=>(Yr(f),URLSearchParams.prototype[a].call(i,String(f).toLowerCase()));case"keys":return()=>(i.sort(),new Set(URLSearchParams.prototype.keys.call(i)).keys());default:return Reflect.get(i,a,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let o=this.getAll(t);if(o.length===0)return null;let i=o.join(", ");return/^content-encoding$/i.test(t)&&(i=i.toLowerCase()),i}forEach(t,o=void 0){for(let i of this.keys())Reflect.apply(t,o,[this.get(i),i,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,o)=>(t[o]=this.getAll(o),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,o)=>{let i=this.getAll(o);return o==="host"?t[o]=i[0]:t[o]=i.length>1?i:i[0],t},{})}};Object.defineProperties(ie.prototype,["get","entries","forEach","values"].reduce((n,t)=>(n[t]={enumerable:!0},n),{}));function Js(n=[]){return new ie(n.reduce((t,o,i,a)=>(i%2===0&&t.push(a.slice(i,i+2)),t),[]).filter(([t,o])=>{try{return Yr(t),lo(t,String(o)),!0}catch{return!1}}))}var xf=new Set([301,302,303,307,308]),Gr=n=>xf.has(n);var ge=Symbol("Response internals"),de=class n extends Re{constructor(t=null,o={}){super(t,o);let i=o.status!=null?o.status:200,a=new ie(o.headers);if(t!==null&&!a.has("Content-Type")){let l=Vr(t,this);l&&a.append("Content-Type",l)}this[ge]={type:"default",url:o.url,status:i,statusText:o.statusText||"",headers:a,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[ge].type}get url(){return this[ge].url||""}get status(){return this[ge].status}get ok(){return this[ge].status>=200&&this[ge].status<300}get redirected(){return this[ge].counter>0}get statusText(){return this[ge].statusText}get headers(){return this[ge].headers}get highWaterMark(){return this[ge].highWaterMark}clone(){return new n(wt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,o=302){if(!Gr(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new n(null,{headers:{location:new URL(t).toString()},status:o})}static error(){let t=new n(null,{status:0,statusText:""});return t[ge].type="error",t}static json(t=void 0,o={}){let i=JSON.stringify(t);if(i===void 0)throw new TypeError("data is not JSON serializable");let a=new ie(o&&o.headers);return a.has("content-type")||a.set("content-type","application/json"),new n(i,{...o,headers:a})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(de.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var sa=require("node:url"),aa=require("node:util");var Zs=n=>{if(n.search)return n.search;let t=n.href.length-1,o=n.hash||(n.href[t]==="#"?"#":"");return n.href[t-o.length]==="?"?"?":""};var ea=require("node:net");function Xs(n,t=!1){return n==null||(n=new URL(n),/^(about|blob|data):$/.test(n.protocol))?"no-referrer":(n.username="",n.password="",n.hash="",t&&(n.pathname="",n.search=""),n)}var ta=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),ra="strict-origin-when-cross-origin";function na(n){if(!ta.has(n))throw new TypeError(`Invalid referrerPolicy: ${n}`);return n}function Lf(n){if(/^(http|ws)s:$/.test(n.protocol))return!0;let t=n.host.replace(/(^\[)|(]$)/g,""),o=(0,ea.isIP)(t);return o===4&&/^127\./.test(t)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:n.host==="localhost"||n.host.endsWith(".localhost")?!1:n.protocol==="file:"}function Rt(n){return/^about:(blank|srcdoc)$/.test(n)||n.protocol==="data:"||/^(blob|filesystem):$/.test(n.protocol)?!0:Lf(n)}function oa(n,{referrerURLCallback:t,referrerOriginCallback:o}={}){if(n.referrer==="no-referrer"||n.referrerPolicy==="")return null;let i=n.referrerPolicy;if(n.referrer==="about:client")return"no-referrer";let a=n.referrer,l=Xs(a),f=Xs(a,!0);l.toString().length>4096&&(l=f),t&&(l=t(l)),o&&(f=o(f));let m=new URL(n.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return l;case"strict-origin":return Rt(l)&&!Rt(m)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return l.origin===m.origin?l:Rt(l)&&!Rt(m)?"no-referrer":f;case"same-origin":return l.origin===m.origin?l:"no-referrer";case"origin-when-cross-origin":return l.origin===m.origin?l:f;case"no-referrer-when-downgrade":return Rt(l)&&!Rt(m)?"no-referrer":l;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function ia(n){let t=(n.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let i of t)i&&ta.has(i)&&(o=i);return o}var z=Symbol("Request internals"),Yt=n=>typeof n=="object"&&typeof n[z]=="object",Wf=(0,aa.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),tt=class n extends Re{constructor(t,o={}){let i;if(Yt(t)?i=new URL(t.url):(i=new URL(t),t={}),i.username!==""||i.password!=="")throw new TypeError(`${i} is an url with embedded credentials.`);let a=o.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(a)&&(a=a.toUpperCase()),!Yt(o)&&"data"in o&&Wf(),(o.body!=null||Yt(t)&&t.body!==null)&&(a==="GET"||a==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=o.body?o.body:Yt(t)&&t.body!==null?wt(t):null;super(l,{size:o.size||t.size||0});let f=new ie(o.headers||t.headers||{});if(l!==null&&!f.has("Content-Type")){let d=Vr(l,this);d&&f.set("Content-Type",d)}let m=Yt(t)?t.signal:null;if("signal"in o&&(m=o.signal),m!=null&&!Us(m))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let h=o.referrer==null?t.referrer:o.referrer;if(h==="")h="no-referrer";else if(h){let d=new URL(h);h=/^about:(\/\/)?client$/.test(d)?"client":d}else h=void 0;this[z]={method:a,redirect:o.redirect||t.redirect||"follow",headers:f,parsedURL:i,signal:m,referrer:h},this.follow=o.follow===void 0?t.follow===void 0?20:t.follow:o.follow,this.compress=o.compress===void 0?t.compress===void 0?!0:t.compress:o.compress,this.counter=o.counter||t.counter||0,this.agent=o.agent||t.agent,this.highWaterMark=o.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||t.referrerPolicy||""}get method(){return this[z].method}get url(){return(0,sa.format)(this[z].parsedURL)}get headers(){return this[z].headers}get redirect(){return this[z].redirect}get signal(){return this[z].signal}get referrer(){if(this[z].referrer==="no-referrer")return"";if(this[z].referrer==="client")return"about:client";if(this[z].referrer)return this[z].referrer.toString()}get referrerPolicy(){return this[z].referrerPolicy}set referrerPolicy(t){this[z].referrerPolicy=na(t)}clone(){return new n(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(tt.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var ua=n=>{let{parsedURL:t}=n[z],o=new ie(n[z].headers);o.has("Accept")||o.set("Accept","*/*");let i=null;if(n.body===null&&/^(post|put)$/i.test(n.method)&&(i="0"),n.body!==null){let m=Qs(n);typeof m=="number"&&!Number.isNaN(m)&&(i=String(m))}i&&o.set("Content-Length",i),n.referrerPolicy===""&&(n.referrerPolicy=ra),n.referrer&&n.referrer!=="no-referrer"?n[z].referrer=oa(n):n[z].referrer="no-referrer",n[z].referrer instanceof URL&&o.set("Referer",n.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),n.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip, deflate, br");let{agent:a}=n;typeof a=="function"&&(a=a(t));let l=Zs(t),f={path:t.pathname+l,method:n.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:n.insecureHTTPParser,agent:a};return{parsedURL:t,options:f}};var Qr=class extends ke{constructor(t,o="aborted"){super(t,o)}};$r();io();var Ff=new Set(["data:","http:","https:"]);async function Kr(n,t){return new Promise((o,i)=>{let a=new tt(n,t),{parsedURL:l,options:f}=ua(a);if(!Ff.has(l.protocol))throw new TypeError(`node-fetch cannot load ${n}. URL scheme "${l.protocol.replace(/:$/,"")}" is not supported.`);if(l.protocol==="data:"){let w=ks(a.url),x=new de(w,{headers:{"Content-Type":w.typeFull}});o(x);return}let m=(l.protocol==="https:"?fa.default:la.default).request,{signal:h}=a,d=null,y=()=>{let w=new Qr("The operation was aborted.");i(w),a.body&&a.body instanceof se.default.Readable&&a.body.destroy(w),!(!d||!d.body)&&d.body.emit("error",w)};if(h&&h.aborted){y();return}let _=()=>{y(),S()},g=m(l.toString(),f);h&&h.addEventListener("abort",_);let S=()=>{g.abort(),h&&h.removeEventListener("abort",_)};g.on("error",w=>{i(new X(`request to ${a.url} failed, reason: ${w.message}`,"system",w)),S()}),Uf(g,w=>{d&&d.body&&d.body.destroy(w)}),process.version<"v14"&&g.on("socket",w=>{let x;w.prependListener("end",()=>{x=w._eventsCount}),w.prependListener("close",B=>{if(d&&x<w._eventsCount&&!B){let q=new Error("Premature close");q.code="ERR_STREAM_PREMATURE_CLOSE",d.body.emit("error",q)}})}),g.on("response",w=>{g.setTimeout(0);let x=Js(w.rawHeaders);if(Gr(w.statusCode)){let C=x.get("Location"),U=null;try{U=C===null?null:new URL(C,a.url)}catch{if(a.redirect!=="manual"){i(new X(`uri requested responds with an invalid redirect URL: ${C}`,"invalid-redirect")),S();return}}switch(a.redirect){case"error":i(new X(`uri requested responds with a redirect, redirect mode is set to error: ${a.url}`,"no-redirect")),S();return;case"manual":break;case"follow":{if(U===null)break;if(a.counter>=a.follow){i(new X(`maximum redirect reached at: ${a.url}`,"max-redirect")),S();return}let D={headers:new ie(a.headers),follow:a.follow,counter:a.counter+1,agent:a.agent,compress:a.compress,method:a.method,body:wt(a),signal:a.signal,size:a.size,referrer:a.referrer,referrerPolicy:a.referrerPolicy};if(!Ms(a.url,U)||!js(a.url,U))for(let te of["authorization","www-authenticate","cookie","cookie2"])D.headers.delete(te);if(w.statusCode!==303&&a.body&&t.body instanceof se.default.Readable){i(new X("Cannot follow redirect with body being a readable stream","unsupported-redirect")),S();return}(w.statusCode===303||(w.statusCode===301||w.statusCode===302)&&a.method==="POST")&&(D.method="GET",D.body=void 0,D.headers.delete("content-length"));let qe=ia(x);qe&&(D.referrerPolicy=qe),o(Kr(new tt(U,D))),S();return}default:return i(new TypeError(`Redirect option '${a.redirect}' is not a valid value of RequestRedirect`))}}h&&w.once("end",()=>{h.removeEventListener("abort",_)});let B=(0,se.pipeline)(w,new se.PassThrough,C=>{C&&i(C)});process.version<"v12.10"&&w.on("aborted",_);let q={url:a.url,status:w.statusCode,statusText:w.statusMessage,headers:x,size:a.size,counter:a.counter,highWaterMark:a.highWaterMark},F=x.get("Content-Encoding");if(!a.compress||a.method==="HEAD"||F===null||w.statusCode===204||w.statusCode===304){d=new de(B,q),o(d);return}let Q={flush:rt.default.Z_SYNC_FLUSH,finishFlush:rt.default.Z_SYNC_FLUSH};if(F==="gzip"||F==="x-gzip"){B=(0,se.pipeline)(B,rt.default.createGunzip(Q),C=>{C&&i(C)}),d=new de(B,q),o(d);return}if(F==="deflate"||F==="x-deflate"){let C=(0,se.pipeline)(w,new se.PassThrough,U=>{U&&i(U)});C.once("data",U=>{(U[0]&15)===8?B=(0,se.pipeline)(B,rt.default.createInflate(),D=>{D&&i(D)}):B=(0,se.pipeline)(B,rt.default.createInflateRaw(),D=>{D&&i(D)}),d=new de(B,q),o(d)}),C.once("end",()=>{d||(d=new de(B,q),o(d))});return}if(F==="br"){B=(0,se.pipeline)(B,rt.default.createBrotliDecompress(),C=>{C&&i(C)}),d=new de(B,q),o(d);return}d=new de(B,q),o(d)}),Ks(g,a).catch(i)})}function Uf(n,t){let o=Gt.Buffer.from(`0\r
\r
`),i=!1,a=!1,l;n.on("response",f=>{let{headers:m}=f;i=m["transfer-encoding"]==="chunked"&&!m["content-length"]}),n.on("socket",f=>{let m=()=>{if(i&&!a){let d=new Error("Premature close");d.code="ERR_STREAM_PREMATURE_CLOSE",t(d)}},h=d=>{a=Gt.Buffer.compare(d.slice(-5),o)===0,!a&&l&&(a=Gt.Buffer.compare(l.slice(-3),o.slice(0,3))===0&&Gt.Buffer.compare(d.slice(-2),o.slice(3))===0),l=d};f.prependListener("close",m),f.on("data",h),n.on("close",()=>{f.removeListener("close",m),f.removeListener("data",h)})})}var Jr={URL:"OCTOPUS_URL",ApiKey:"OCTOPUS_API_KEY",AccessToken:"OCTOPUS_ACCESS_TOKEN"},Mf="urn:ietf:params:oauth:grant-type:token-exchange",jf="urn:ietf:params:oauth:token-type:jwt";async function ca({getInput:n,info:t,getIDToken:o,error:i,exportVariable:a,setOutput:l}){let f={server:n("server"),serviceAccountId:n("service_account_id"),apiKey:n("api_key")},m=[];if(f.server||m.push("The Octopus instance URL is required, please specify using the 'server' input."),!f.serviceAccountId&&!f.apiKey&&m.push("A Service Account Id or API Key is required. Please specify using either the 'service_account_id' or 'api_key' inputs."),m.length>0)throw new Error(m.join(fo.EOL));if(f.serviceAccountId){t(`Logging in with OpenID Connect to '${f.server}' using service account '${f.serviceAccountId}'`),t(`Obtaining OIDC token from GitHub for service account '${f.serviceAccountId}'`);let h;try{h=await o(f.serviceAccountId)}catch(S){throw i("Please make sure to give write permissions to id-token in the workflow."),S}t(`Exchanging GitHub OIDC token for access token at '${f.server}' for service account '${f.serviceAccountId}'`);let d=`${f.server}/token/v1`,y={grant_type:Mf,audience:f.serviceAccountId,subject_token:h,subject_token_type:jf},_=await Kr(d,{method:"POST",body:JSON.stringify(y),headers:{"Content-Type":"application/json"}});if(!_.ok){let S=await _.json();throw new Error(S.Errors.join(fo.EOL))}let g=await _.json();t(`Configuring environment to use access token for Octopus Instance '${f.server}' on behalf of service account '${f.serviceAccountId}'`),a(Jr.URL,f.server),a(Jr.AccessToken,g.access_token),l("access_token",g.access_token)}else f.apiKey&&(t(`Configuring environment to use API Key for '${f.server}'`),a(Jr.URL,f.server),a(Jr.ApiKey,f.apiKey));t("\u{1F419} Login successful, your GitHub actions environment has been configured to allow access to your Octopus Instance via the API without needing to supply credentials. Happy deployments!")}ca(new Mr).catch(n=>{(0,da.setFailed)(n),process.exit(1)});
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)
*/
